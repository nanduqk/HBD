define("zen.rt.components.dialogm/resources/js/dialog_handler",["sap/zen/basehandler"],function(c){var a=function(){c.apply(this,arguments);var e=c.dispatcher;var f=this;jQuery.sap.require("sap.m.Dialog");jQuery.sap.require("sap.m.CheckBox");sap.m.Dialog.extend("sap.zen.Dialog",{metadata:{properties:{height:"sap.ui.core.CSSSize",width:"sap.ui.core.CSSSize"}},getInitialFocus:function(){var i=this.$().prop("id");return i||"sap-ui-blocklayer-popup";},renderer:{},onAfterRendering:function(k){if(sap.m.Dialog.prototype.onAfterRendering){sap.m.Dialog.prototype.onAfterRendering.apply(this,[k]);}var j=this.$();var i=this.getHeight();if(i!=="auto"){j.height(this.zenCalcHeight());}var l=this.getWidth();if(l!=="auto"){j.width(this.zenRemovePX(l));}this.$().addClass("zenDialogPadding");this.$().addClass("zenDialogFixHeight");},zenCalcHeight:function(){return this.zenGetHeightAsInt()-this.zenGetPaddingTop()-this.zenGetPaddingBottom();},zenGetPaddingTop:function(){return this.zenRemovePX(this.$().css("padding-top"));},zenGetPaddingBottom:function(){return this.zenRemovePX(this.$().css("padding-bottom"));},zenRemovePX:function(i){if(i.indexOf("px")!=-1){return parseInt(i.substring(0,i.indexOf("px")),10);}return parseInt(i,10);},zenGetHeightAsInt:function(){return parseInt(this.getHeight(),10);}});var h=function(i){if(i instanceof sap.zen.commons.layout.AbsoluteLayout){return i;}if(i.oDialog){return i.oDialog.getContent()[1];}return null;};var d=function(i){return i.oDialog;};function g(p,q,t){var s=p.oDialog;var l=h(p);l.setWidth("100%");l.setHeight("100%");if(t){if(t.width){var k=sap.zen.Dispatcher.instance.getUnifiedPropertyValue(t.width,"100%");s.setWidth(k);s.setContentWidth(k);p.setWidth(k);}if(t.height){var m=sap.zen.Dispatcher.instance.getUnifiedPropertyValue(t.height,"100%");s.setHeight(m);p.setHeight(m);}}s.setHorizontalScrolling(false);s.setVerticalScrolling(false);if(q){s.setTitle(q.title);s.setStretch(q.fullscreen);s.setResizable(q.resizable);s.setDraggable(q.draggable);s.removeAllButtons();for(var n in q.Buttons){var r=q.Buttons[n].Button;var o=new sap.m.Button({text:r.text,enabled:r.buttonenabled==="X",visible:r.buttonvisible==="X"});if(r.onclick){(function(i){o.attachPress(function(v){var u=new Function(i);u();});})(r.onclick);}s.addButton(o);}if(!(q.designmode)){if(q.show){d(p).setVisible(true);d(p).open();}else{d(p).setVisible(false);d(p).close();}}if(q.content){var j=q.content;f.updateChildren(j,l,function(v,u,i){e.insertIntoAbsoluteLayoutContainer(l,v,u);},function(i){l.removeContent(i);});}}}this.create=function(l,j,m){var i=this.createTextWithHeight(j.id);if(j.designmode){i.addStyleClass("zenDesignModeDialogTextInvisible");}else{i.setVisible(false);}var o=this.createAbsoluteLayout();if(!(j.designmode)){i.sResizeHandlerId=sap.ui.core.ResizeHandler.register(o,sap.zen.Dispatcher.instance.getResizeCallbackFunction());}var k=new sap.m.CheckBox();k.addStyleClass("dialogCBDummyFocusHidden");i.oDialog=new sap.zen.Dialog({content:[k,o]});i.oDialog.addStyleClass("zenDialogNoMinWidth");i.oDialog.attachBrowserEvent("keydown",function(p){if(p.which===27){if(p.stopPropagation){p.stopPropagation();}if(p.cancelBubble){p.cancelBubble=true;}}});var n=i.destroy;i.destroy=function(){this.oDialog.close();this.oDialog.destroy();if(!(j.designmode)){sap.ui.core.ResizeHandler.deregister(i.sResizeHandlerId);}n.apply(this,arguments);};g(i,j,m);if(j.designmode){i.oDialog.addStyleClass("zenDialogNoAnimation");i.oDialog.open();$("#sap-ui-blocklayer-popup").addClass("zenLayerInvisible");}return i;};this.update=function(k,i,j){if(i||j){g(k,i,j);}return k;};this.applyForChildren=function(k,l){var o=h(k);if(o){if(!o.getPositions){return null;}var p=o.getPositions();for(var m=0;m<p.length;m++){var n=p[m].getControl();if(n){var j=l(n);if(j){return j;}}}}return null;};this.getDefaultProxyClass=function(){return["sap.m.Text"];};this.getType=function(){return"dialog";};this.getDecorator=function(){return"DialogDecorator";};};var b=new a();return b;});
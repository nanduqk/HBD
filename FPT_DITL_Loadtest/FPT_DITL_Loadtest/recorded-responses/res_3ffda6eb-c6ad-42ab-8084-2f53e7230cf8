define("zen.rt.components.sdkhtml5chart/resources/js/utilities/SDKUtilsHelper",[],function(){return function(){var a={};this.isChartTypeBubbleOrScatter=function(b){var c=false;if(b=="viz/scatter"||b=="viz/bubble"){c=true;}return c;};this.isChartTypeHorizontal=function(b){var c=false;if(b=="viz/bar"||b=="viz/horizontal_combination"||b=="viz/horizontal_line"||b=="viz/stacked_bar"||b=="viz/100_stacked_bar"||b=="viz/horizontal_waterfall"||b=="viz/dual_bar"||b=="viz/dual_horizontal_combination"||b=="viz/horizontal_area"){c=true;}return c;};this.getDimensionsData=function(c){var b=c.dimensions;if(c.externalDimensions!==undefined){b=c.externalDimensions.concat(b);}b=b.filter(function(d){return d.isFake!==true;});return b;};this.selectDeselect=function(v){var f=v.getOnSelect();var w=v.data;var h=this.getDimensionsData(w);var n=v.cvomChart.chart.selection();var g=_.map(n,function(e){if(e.data){e.data=_.omit(e.data,"");}return e;});if(!_.isEqual(a,g)){a=g.slice(0);var m=[];for(var i=0;i<h.length;i++){var d={};var p=this.getDimensionValue(h,i,g);d.dimension=h[i].key;d.value=p;m.push(d);}var o={};for(var i=0;i<g.length;i++){var u=g[i].data;for(var c in u){for(var r=0;r<h.length;r++){for(var q=0;q<h[r].members.length;q++){var l=(h[r].containsMeasures)&&c!="Measures"?c:u[c];if(l===h[r].members[q].text){if(o.hasOwnProperty(h[r].key)){if(!_.find(o[h[r].key],function(e){return e.val===u[c];})){o[h[r].key].push({key:h[r].members[q].key,val:u[c]});}}else{o[h[r].key]=[{key:h[r].members[q].key,val:u[c]}];}}}}}}if(_.every(m,function(e){return e.value==="";})){m=[];}var b={selectedMembers:JSON.parse(JSON.stringify(m).replace(/'/g,"__APOS__")),allSelection:JSON.parse(JSON.stringify(o).replace(/'/g,"__APOS__")),selection:JSON.parse(JSON.stringify(g).replace(/'/g,"__APOS__"))};f=f.replace("__KEY__",JSON.stringify(b));f=f.replace(/__APOS__/g,"\\'");try{var s=new Function(f);s();}catch(t){console.log("An exception occurred when processing a chart select or unselect event.");}}};this.clearOldSelection=function(){a={};};this.getDimensionValue=function(e,c,d){if(!d[0]){return"";}var h=e[c],g=d[0].data,f=function(k){var j=_.pluck(e,"text");return !_.contains(j,k);},b=h.containsMeasures?_.find(_.keys(g),f):g[h.text],i=b&&_.findWhere(h.members,{text:b});return(i&&i.key)||"";};this.getMembersInAxis=function(e,d){var g=[];var l=0;var k=0;var j=e.defaultValues;if(e.data!=undefined){j=e.data;}else{if(e.dataByInitialView!=undefined){j=[];var h=0;for(var b in e.dataByInitialView.data){j[h]=[];j[h].push(e.dataByInitialView.data[b][0]);j[h].push(e.dataByInitialView.data[b][1]);h++;}}else{j=e.defaultValues;}}for(var f=0;f<j.length;f++){if(j[f][1]=="axis1"){l++;}else{k++;}}var c=1;if(d!=undefined&&d.data()!=undefined&&d.data().analysisAxis.length==2&&d.data().analysisAxis[1].data!=undefined&&d.data().analysisAxis[1].data[0]!=undefined&&d.data().analysisAxis[1].data[0].values!=undefined){c=d.data().analysisAxis[1].data[0].values.length;}g.push(l*c);g.push(k*c);return g;};this.getUpdatedScalingFactors=function(e){var k=e;if(k!=undefined&&k.dimensions!=undefined){var c=k.dimensions;for(var g=0;g<k.dimensions.length;g++){if(c[g].containsMeasures){for(var f=0;f<c[g].members.length;f++){var d=c[g].members[f];if(d.scalingFactor!=undefined){var h=d.scalingFactor;var j="";if(h!=undefined&&h!=0){j=this.getScalingDisplayString(h);}var b=d.text;b+=j;d.text=b;c[g].members[f]=d;}}}}}return k;};this.getScalingDisplayString=function(f){var e="1";for(var d=0;d<f;d++){e+=("0");}var c="$1"+sap.common.globalization.NumericFormatManager.getThousandSeparator()+"";var b=e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,c);b=" (\u200b*"+b+")";return b;};this.getScalingFactorsMap=function(g){var b=g;var f={};if(b!=undefined&&b.dimensions!=undefined){var e=b.dimensions;for(var h=0;h<b.dimensions.length;h++){if(e[h].containsMeasures){for(var d=0;d<e[h].members.length;d++){var j=e[h].members[d];if(j.scalingFactor!=undefined){var c=j.scalingFactor;f[j.key]=c;}}}}}return f;};this.getMeasuresKeyMap=function(d){var f={};if(d!=undefined&&d.dimensions!=undefined){var c=d.dimensions;for(var e=0;e<d.dimensions.length;e++){if(c[e].containsMeasures){for(var b=0;b<c[e].members.length;b++){var g=c[e].members[b];f[g.key]=g.text;}}else{f[c[e].key]=c[e].text;}}}return f;};this.createConditionalFormatting=function(f,b,h,w){var m=JSON.parse(h);var n;var v={};var x={};if(m!=undefined){n=m.conditions;v=this.getScalingFactorsMap(w);x=this.getMeasuresKeyMap(w);}else{return;}if(f==undefined){f={plotArea:{animation:{dataLoading:true}}};}var t=b.data().measureValuesGroup[0].data;if(b.data().measureValuesGroup[1]!=null){for(var c=0;c<b.data().measureValuesGroup[1].data.length;c++){t.push(b.data().measureValuesGroup[1].data[c]);}}f.plotArea.formatRules=[];var j=1e-7;for(var i=n.length-1;i>-1;i--){var o=[];var q=n[i];var g=q.dimensionMember;var p=q.color;var k=q.operator;var d=q.value;var r=x[g];if(k!=":"){var e=v[g];if(e!=undefined){var u=Math.pow(10,e);d=q.value/u;}var l={};if(k==="=="){l[r]=d;o.push(l);}else{if(k==="<"){l[r]={max:d-j};o.push(l);}else{if(k===">"){l[r]={min:d+j};o.push(l);}}}}else{var l={};var s=x[g];l[s]=d;o.push(l);}if(o.length>0){f.plotArea.formatRules.push({condition:o,color:p});}}return f;};this.updateChartAxisScaling=function(f,b,c,e,g){var d={fixedRange:c,minValue:e,maxValue:g};if(f==undefined){f={};if(b=="X_AXIS"){f.xAxis={};f.xAxis.scale=d;}else{if(b=="Y_AXIS"){f.yAxis={};f.yAxis.scale=d;}else{if(b=="X_AXIS_2"){f.xAxis2={};f.xAxis2.scale=d;}else{if(b=="Y_AXIS_2"){f.yAxis2={};f.yAxis2.scale=d;}else{if(b=="VALUE_AXIS"){f.plotArea={};f.plotArea.valueAxis={};f.plotArea.valueAxis.scale=d;}}}}}}else{if(f.xAxis!=null&&f.xAxis!=undefined&&b=="X_AXIS"){f.xAxis.scale={};f.xAxis.scale=d;}else{if(f.yAxis!=null&&f.yAxis!=undefined&&b=="Y_AXIS"){f.yAxis.scale={};f.yAxis.scale=d;}else{if(f.xAxis2!=null&&f.xAxis2!=undefined&&b=="X_AXIS_2"){f.xAxis2.scale={};f.xAxis2.scale=d;}else{if(f.yAxis2!=null&&f.yAxis2!=undefined&&b=="Y_AXIS_2"){f.yAxis2.scale={};f.yAxis2.scale=d;}else{if(f.plotArea!=null&&f.plotArea!=undefined&&f.plotArea.valueAxis!=undefined&&b=="VALUE_AXIS"){f.plotArea.valueAxis.scale={};f.plotArea.valueAxis.scale=d;}}}}}}return f;};this.getMetadataFeedsArray=function(g,e){var c=sap.viz.api.manifest.Viz.get(g)[0];var f=0;var h=[];if(c){var b=c.allFeeds();for(var d=0;d<b.length;d++){if(b[d].type==e){f++;h.push(b[d]);}}}return h;};this.isChartFeedsEmpty=function(b){if(b!=undefined&&b.feeds!=undefined){return false;}return true;};this.allChartOptionsMeasures=function(b){var d=[];if(!this.isChartFeedsEmpty(b)){for(var e in b.feeds){var f=b.feeds[e];if((f.indexOf("ROWS#")==0)||(f.indexOf("COLUMNS#")==0)){continue;}if(f==="ROWS"||f==="COLUMNS"){continue;}if(f==="BLANK"){continue;}if(f.length===1&&f[0]===""){continue;}for(var c=0;c<f.length;c++){d.push(f[c]);}}}return d;};this.getValueAxes=function(b,e){var g=true;var h=this.getMeasureGroup(e);var d=[];var f=[];for(var c=0;c<h.length;c++){if(g){d=[b[c][0],"axis1"];f.push(d);g=!g;}else{d=[b[c][0],"axis2"];f.push(d);g=!g;}}return f;},this.getMeasureGroup=function(d){var c=d.dimensions;if(c!=undefined){for(var b=0;b<c.length;b++){if(c[b].containsMeasures){return c[b];}}}},this.hasMeasures=function(d){var c=d.dimensions;if(c!=undefined){for(var b=0;b<c.length;b++){if(c[b].containsMeasures){return true;}}}return false;},this.getDualAxis=function(d){var c=[];var b=[];if(d!=undefined){for(var e in d){c.push(d[e][0]);c.push(d[e][1]);c.push(d[e][2]);b.push(c);c=[];}}return b;};this.convertFormatString=function(e,g,f){var i=e.chartOption;var j=false;if(i.dualAxis){j=true;}if(g){for(var b in g){if(g.hasOwnProperty(b)&&!g[b].formatString){g[b].formatString="None";}}this.checkEmptyFormatString(i,g);if(g.dataLabel!=undefined&&g.dataLabel.formatString!=undefined){var d=g.dataLabel.formatString;if(d instanceof Array){i.dataLabel.formatString=[];g.dataLabel.formatString=d;}else{g.dataLabel.formatString=this.replaceFormatValues(i.dataLabel.formatString,d,j);}}if(g.tooltip!=undefined&&g.tooltip.formatString!=undefined){i.tooltip.formatString=[];if(typeof g.tooltip.formatString==="string"){var d=[g.tooltip.formatString];if("viz/bubble"===f){var k=[];var c=e.ds._crosstableDataset.getMeasureValuesGroupCount();for(var h=0;h<c;h++){k.push(d);}g.tooltip.formatString=k;}else{g.tooltip.formatString=[d,d];}}}else{if(g.tooltip==""&&i.tooltip!=undefined){g.tooltip=i.tooltip;}}}};this.replaceFormatValues=function(c,b,d){if(d){c[1]=[b];c[0]=[b];}else{c[0]=[b];}return c;};this.replaceValues=function(e,b,c){for(var d=0;d<e.length;d++){if(e[d] instanceof Array){this.replaceValues(e[d],b,c);}else{if(e[d]===b){e[d]=c;}else{if(b==="All"){e[d]=c;}}}}};this.checkEmptyFormatString=function(d,b){if(d.tooltip){if(d.tooltip.formatString instanceof Array){this.replaceValues(d.tooltip.formatString,null,"");}}for(var c in b){if(b.hasOwnProperty(c)){if(typeof b[c]==="object"&&d[c]!=undefined){this.checkEmptyFormatString(d[c],b[c]);}else{if(c=="formatString"){if(b.formatString&&$.type(b.formatString)==="string"){if(b.formatString.toUpperCase()=="NONE"){b.formatString="";}else{if(b.formatString.toUpperCase()=="DEFAULT"){b.formatString=d[c];}}}}}}}};this.getMeasureKeyArr=function(e){var b=[];if(e!=undefined&&e.dimensions!=undefined){var d=e.dimensions;for(var f=0;f<e.dimensions.length;f++){if(d[f].containsMeasures){for(var c=0;c<d[f].members.length;c++){var g={};g.key=d[f].members[c].key;g.text=d[f].members[c].text;b.push(g);}}}}return b;};this.plotObjectContainsMeasure=function(f,e,b){var d=1;if(b){d=2;}for(var c=0;c<f.length;c++){if(f[c][d]===undefined||typeof f[c]==="string"){return -2;}if(f[c][d]===e){return c;}}return -1;};};});
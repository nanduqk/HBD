define("zen.rt.uiframework/legacyfeeding/zen.rt.components.html5charts/charts/helpers/DualDataSeriesHelper",["zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/utilities/SDKUtilsHelper"],function(b){function a(){this.getPlotAreaDataSeriesByMeasure=function(){var d=this.createDataMapper();try{var f=$.extend(true,{},this.getProperty("plotObjectType"));}catch(k){var f={};}var c={};if(!this.getData()){f.dataByInitialView={};f.dataByInitialView.errorMessage="There are no additional properties for the selected chart.";return f;}var m=new b();measuresArr=m.getMeasureKeyArr(this.getData());var n=[];if(!measuresArr||measuresArr.length==0){c.errorMessage='Cannot display "Measures" properties. Â In the "Edit Initial View" window of the data source, in the "Columns" area, you included measures. In this data structure, lines cannot appear. If you want to display lines, move the measures to the "Rows" area.';}else{if(f.data){var j=true;var e={axis1:false,axis2:false};for(var l=0;l<measuresArr.length;l++){var h=m.plotObjectContainsMeasure(f.data,measuresArr[l].key,true);if(h>-1){j=false;n.push(f.data[h]);}else{if(h===-2){j=false;n.push([f.data[l][0],f.data[l][1],measuresArr[l].key]);}else{n.push(["line","axis2",measuresArr[l].key]);}}e[n[n.length-1][1]]=true;}if(j||!e.axis1||!e.axis2){n=this.setDefaultValues(measuresArr,f.defaultSingleValue);}f.data=n;}else{if(f.changedData!=undefined&&f.dataByInitialView!=undefined&&!this.allMeasuresInObject(measuresArr,f.dataByInitialView)){n=this.setDefaultValues(measuresArr,f.defaultSingleValue);delete f.changedData;}else{if(f.changedData!=undefined&&f.data!=undefined){n=f.changedData;}else{if(f.dataByInitialView!=undefined&&this.allMeasuresInObject(measuresArr,f.dataByInitialView)){n=this.getByInitialView(measuresArr,f.dataByInitialView);}else{n=this.setDefaultValues(measuresArr,f.defaultSingleValue);}}}}f.defaultValues=this.setDefaultValues(measuresArr,f.defaultSingleValue);c.data={};for(var g=0;g<measuresArr.length;g++){c.data[measuresArr[g].text+"#KEY#"+measuresArr[g].key]=n[g];}}f.dataByInitialView=c;return f;};this.getByInitialView=function(f,e){var d=[];for(var c=0;c<f.length;c++){d[c]=[];d[c].push(e.data[f[c]][0]);d[c].push(e.data[f[c]][1]);}return d;};this.setDefaultValues=function(d,c){c=c||(function(){var h=_.find(d,function(i){return i[0];});return h&&h[0]||"bar";})();var g=Math.ceil(d.length/2);var f=[];for(var e=0;e<d.length;e++){f[e]=[];f[e].push(c);if(e<g){f[e].push("axis1");}else{f[e].push("axis2");}f[e].push(d[e].key);}return f;};this.setPlotObjectType=function(d){var c=$.extend(true,{},this.getProperty("plotObjectType"));if(d.changedData==undefined){if(c.data){delete c.data;}if(c.dataByInitialView){delete c.dataByInitialView;}}$.extend(true,c,d);this.setProperty("plotObjectType",c);};this.getPlotObjectType=function(){var c=this.getPlotAreaDataSeriesByMeasure();this.setProperty("plotObjectType",c,true);return c;};this.allMeasuresInObject=function(e,d){for(var c=0;c<e.length;c++){if(d.data==undefined||d.data[e[c].text]==undefined){return false;}}for(var d in d.data){if(d){if(!this.containsMeasure(e,d)){return false;}}}return true;};this.containsMeasure=function(e,d){for(var c=0;c<e.length;c++){if(e[c].key===d){return true;}}return false;};}a.prototype.updateCvomDataOnPropertyChangeHelper=function(){var c=$.extend(true,{},this.getProperty("plotObjectType"));if(c.defaultValues){c.data=$.parseJSON(JSON.stringify(c.defaultValues));}this.setProperty("plotObjectType",c);};return a;});
define("zen.rt.components.tabstrip/resources/js/tabstrip_handler",["sap/zen/basehandler","zen.rt.components.tabstrip/resources/js/tab_handler","css!../css/tabpanel.css"],function(BaseHandler){var TabStripHandler=function(){BaseHandler.apply(this,arguments);var dispatcher=BaseHandler.dispatcher;var that=this;this.update=function(oControl,oControlProperties,oComponentProperties){if(oControlProperties){init(oControl,oControlProperties,oComponentProperties);}return oControl;};this.createAndAdd=function(oChainedControl,oControlProperties,oComponentProperties,fAppendToParentFunclet,iIndex){var id=oControlProperties.id;var oControl=this.createDefaultProxy(id);wrapFunctions(oControl);if(sap.zen.Dispatcher.instance.isMainMode()){oControl.setExpandable(false);}oControl.orgOnAfterRendering=oControl.onAfterRendering;oControl.onAfterRendering=setTabStyles;fAppendToParentFunclet(oControl,iIndex,oComponentProperties);init(oControl,oControlProperties,oComponentProperties);sap.zen.Dispatcher.instance.updateComponentProperties(oControl,oComponentProperties,fAppendToParentFunclet);return oControl;};function setTabStyles(){var oTabStrip=this;if(this.orgOnAfterRendering){this.orgOnAfterRendering();}var jqTabStrip=oTabStrip.$();if(oTabStrip.tablocation=="TOP"){var divTag=$("div.sapUiTabBar:first",jqTabStrip);divTag.removeClass("sapUiTabBarHidden");divTag.removeClass("sapUiTabBarBottom");divTag.addClass("sapUiTabBar");divTag=$("div.sapUiTabPanel:first",jqTabStrip);divTag.removeClass("sapUiTabPanelHidden");divTag.removeClass("sapUiTabPanelBottom");divTag.addClass("sapUiTabPanel");}else{if(oTabStrip.tablocation=="BOTTOM"){var divTag=$("div.sapUiTabBar:first",jqTabStrip);divTag.removeClass("sapUiTabBar");divTag.removeClass("sapUiTabBarHidden");divTag.addClass("sapUiTabBarBottom");divTag=$("div.sapUiTabPanel:first",jqTabStrip);divTag.removeClass("sapUiTabPanel");divTag.removeClass("sapUiTabPanelHidden");divTag.addClass("sapUiTabPanelBottom");}else{if(oTabStrip.tablocation=="HIDDEN"){var oDivTag=jqTabStrip;oDivTag.css("border-style","none");var divTag=oDivTag.find("div.sapUiTabBar:first");divTag.removeClass("sapUiTabBar");divTag.removeClass("sapUiTabBarBottom");divTag.addClass("sapUiTabBarHidden");divTag=$("div.sapUiTabPanel:first",jqTabStrip);divTag.removeClass("sapUiTabPanel");divTag.removeClass("sapUiTabPanelBottom");divTag.addClass("sapUiTabPanelHidden");}}}}function init(oTabStrip,oControlProperties,oComponentProperties){if(oControlProperties){var aChildren=oControlProperties.content;if(aChildren){that.updateChildren(aChildren,oTabStrip,function(oTab,i){oTabStrip.insertTab(oTab,i);},function(oTabToDelete){oTabStrip.removeTab(oTabToDelete);});}if(oTabStrip.zenfs){oTabStrip.detachSelect(oTabStrip.zenfs);}var selectedtabindex=oControlProperties.selectedtabindex;if(selectedtabindex!=undefined){if(oTabStrip.getSelectedIndex()!=selectedtabindex){oTabStrip.setSelectedIndex(selectedtabindex);}}if(oControlProperties.command){var f=function(oParams){if(!isRemoveActive){var index=this.getSelectedIndex();if(index!=selectedtabindex){var command=that.prepareCommand(oControlProperties.command,"__KEY__",index);eval(command);}}};oTabStrip.zenfs=f;oTabStrip.attachSelect(f);}}oTabStrip.tablocation=oControlProperties.tablocation;}var super_remove=this.remove;var isRemoveActive=false;this.remove=function(oTabStrip){isRemoveActive=true;super_remove.apply(this,arguments);isRemoveActive=false;};this.applyForChildren=function(oTabStrip,fFunclet){var tabs=oTabStrip.getTabs();for(var i=0;i<tabs.length;i++){var oTab=tabs[i];fFunclet(oTab);}};this.getDefaultProxyClass=function(){return["sap.zen.ZenIconTabBar","sap.ui.commons.TabStrip"];};this.provideFunctionMapping=function(){return[["getItems","getTabs"],["insertItem","insertTab"],["removeItem","removeTab"]];};var wrapFunctions=function(oControl){if(sap.zen.Dispatcher.instance.isMainMode()){oControl.getSelectedIndex=function(){var aItems=this.getItems();for(var i=0;i<aItems.length;i++){if(aItems[i].getId()===this.getSelectedKey()){return i;}}return 0;};oControl.setSelectedIndex=function(iTabindex){var aItems=this.getItems();if(iTabindex<0||iTabindex>=aItems.length){return;}this.setSelectedKey(aItems[iTabindex].getId());};}};this.getDecorator=function(){return"TabStripDecorator";};this.getType=function(){return"tabstrip";};};return new TabStripHandler();});if(sap.zen.Dispatcher.instance.isMainMode()){sap.m.IconTabBar.extend("sap.zen.ZenIconTabBar",{metadata:{properties:{width:"sap.ui.core.CSSSize",height:"sap.ui.core.CSSSize"}},renderer:{},getStretchContentHeight:function(){return true;},onAfterRendering:function(c){if(sap.m.IconTabBar.prototype.onAfterRendering){sap.m.IconTabBar.prototype.onAfterRendering.apply(this,[c]);}var b=this.getHeight();var a=this.$();if(b!=="auto"){a.height(b);}var d=this.getWidth();var a=this.$();if(d!=="auto"){a.width(d);}a.css("position","relative");}});}
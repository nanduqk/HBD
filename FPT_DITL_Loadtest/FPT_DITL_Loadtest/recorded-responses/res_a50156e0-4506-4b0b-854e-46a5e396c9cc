define("zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/dataMappers/SDKStackedWaterfallDataMapper",["zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/dataMappers/SDKChartDataMapper","zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/charts/ChartException"],function(c,b){function a(){c.apply(this,arguments);var e=true;var d=0;var g=false;var f=false;this.getAnalysisAxisValue=function(){return this.analysisAxisValue;};this.createAnalysisAxis=function(l,k,i,n,j){var h=[];var m=this.getDataMapperHelper();if(this.getMeasureAxis()=="COLUMNS"){j++;}n++;if(this.isMeasuresOnlyCheck(l)){if(this.getMeasureAxis()=="ROWS"){m.setMeasuresOnAxis(2,l,h,true);m.setMeasuresOnAxis(1,l,h,false);d=1;}else{m.setMeasuresOnAxis(1,l,h,false);m.setMeasuresOnAxis(2,l,h,true);d=1;}}else{if(this.getMeasureAxis()=="ROWS"&&n>0&&j>0){this.setDimensionsOnAxis(2,l,h,"ROWS",n,l.axis_rows,true);this.setDimensionsOnAxis(1,l,h,"COLUMNS",j,l.axis_columns,true);d=this.getIDimensionOnCols(l,h,1);g=true;}else{if(this.getMeasureAxis()=="COLUMNS"&&n>0&&j>0){this.setDimensionsOnAxis(1,l,h,"ROWS",n,l.axis_rows,true);this.setDimensionsOnAxis(2,l,h,"COLUMNS",j,l.axis_columns,true);d=this.getIDimensionOnCols(l,h,0);g=true;}else{if(this.getMeasureAxis()=="ROWS"){this.setDimensionsOnAxis(2,l,h,"ROWS",n,l.axis_rows,false);this.setDimensionsOnAxis(1,l,h,"COLUMNS",j,l.axis_columns,true);}else{this.setDimensionsOnAxis(1,l,h,"ROWS",n,l.axis_rows,true);this.setDimensionsOnAxis(2,l,h,"COLUMNS",j,l.axis_columns,false);}f=true;}}}if(this.getMeasureAxis()=="COLUMNS"&&l.dimensions[0].containsMeasures){e=false;if(h[0].data[0]!=undefined){d=h[0].data[0].values.length;}else{d=1;}}return h;};this.getIDimensionOnCols=function(m,h,l){var k=0;for(var j=0;j<m.dimensions.length;j++){var n=m.dimensions[j];if(n.containsMeasures==true){k=h[l].data[0].values.length;}}return k;};this.setDimensionsOnAxis=function(o,k,j,x,s,m,i){var q={};var u=[];q.index=o;q.data=[];var w=-1;var t=0;var v=-1;var p=false;$.each(m,function(r,y){if(v==-1||y[t]==v){$.each(y,function(z,A){if(A!=-1&&(!k.dimensions[z].containsMeasures&&i)){if(v!=-1&&v){if(w==-1){w=z;}}if(u[z-w]==undefined){u[z-w]=[];}u[z-w].push(k.dimensions[z].members[A].text);}else{if(k.dimensions[z].containsMeasures&&v==-1){t=z;v=A;}}});}});for(var h=0;h<k.dimensions.length;h++){var n=k.dimensions[h];if((n.containsMeasures&&!i)||n.axis!=x){p=true;continue;}if(!n.containsMeasures){var l={};l.name=n.text;l.type="Dimension";l.values=u[h-w];q.data.push(l);}}this.setEmptyDimension(o,x,q);j.push(q);};this.isMeasuresOnlyCheck=function(h){if(h.dimensions.length==1){if(h.dimensions[0].containsMeasures==true){return true;}}return false;};this.createMeasureValues=function(n,l,t,u){var s=[];var r=[];var h={};h.index=1;h.data=[];var j={};var k={};var q=this;var p=0;var v=[];v=this.getValues(n.data,t,p,false,d,e,g,u);j.type="Measure";for(var m=0;m<n.dimensions.length;m++){var o=n.dimensions[m];if(o.containsMeasures){if(n.dimensions.length===1&&n.dimensions[0].containsMeasures){j.name="";}else{j.name=n.dimensions[m].members[0].text;}}}j.values=v;h.data.push(j);s.push(h);return s;};this.setEmptyDimension=function(h,k,i){if(k=="COLUMNS"&&this._getColDimensionCounter()==0){var j={};j.name="";j.type="Dimension";j.values=[""];i.data.push(j);}else{if(k=="ROWS"&&this._getRowDimensionCounter()==0){var j={};j.name="";j.type="Dimension";j.values=[""];i.data.push(j);}}};this.getValues=function(j,i,k,m,o,p,h,l){var n=[];if(i=="ROWS"){if(h){n=this.getAllRowValuesInArray(j,k,o,m,p,l);}else{n.push(j);}}else{if(i=="COLUMNS"){if(m){n=this.getFirstMeasureColValuesInArray(j,k,o);}else{if(h){n=this.getAllColValuesInArray(j,k,o,m,p,l);}else{n.push(j);}}}}return n;};this.getAllRowValuesInArray=function(i,k,v,p,w,n){var l=[];var r=[];var q=i.length/this.getMeasureCounter()*k;var j=v;var o=v*k;if(!p){j=i.length;}var t=0;if(!w){for(var m=q;m<j;++m){t++;var h=i[m]+"";r.push(parseFloat(h.replace(/,/g,"")));if(v==0||t==v){l.push(r);t=0;r=[];}}}else{var u=n>1?this.getMeasureCounter():1;var s=0;for(var m=q;m<j/this.getMeasureCounter();++m){t++;var h=i[o+((u*v)*s)]+"";r.push(parseFloat(h.replace(/,/g,"")));if(v==0||t==v){l.push(r);t=0;r=[];s++;o=0;}else{o++;}}}return l;};this.getFirstMeasureColValuesInArray=function(n,k,i){var h=[];var j=[];var l=0;for(var m=0;m<i;++m){l++;var o=n[k]+"";j.push(parseFloat(o.replace(/,/g,"")));k+=n.length/i;if(i==0||l==i){h.push(j);l=0;j=[];}}return h;};this.getAllColValuesInArray=function(k,l,t,u,n){var m=[];var p=[];var q=0;var s=this.getMeasureCounter();if(u){for(var h=0;h<k.length/this.getMeasureCounter();++h){q++;var i=k[l]+"";p.push(parseFloat(i.replace(/,/g,"")));l+=this.getMeasureCounter();if(t==0||q==t){m.push(p);q=0;p=[];}}}else{var s=n==1?this.getMeasureCounter():1;var o=t*l;var j=0;for(var h=0;h<k.length/this.getMeasureCounter();++h){q++;var i=k[o+(j*s)]+"";p.push(parseFloat(i.replace(/,/g,"")));if(t==0||q==t){m.push(p);q=0;p=[];j++;o=0;}else{o=o+Math.round(k.length/t);}}}return m;};this.validateData=function(){var j=this._getColDimensionCounter();var m=this._getRowDimensionCounter();var h=this.getMeasureCounter();var k=this.getMeasureAxis();var l=this.getMessages().chart_mapping_error;var i=null;if(h>0&&m>=1&&j==0&&k=="ROWS"){i=this.getMessages().waterfall_datamapping_rmd;}else{if(h>0&&m==0&&j>=1&&k=="COLUMNS"){i=this.getMessages().waterfall_datamapping_cmd;}else{if(m>1&&k=="COLUMNS"){i=this.getMessages().waterfall_datamapping_rnd_cm;}else{if(j>1&&k=="ROWS"){i=this.getMessages().waterfall_datamapping_rm_cnd;}else{return;}}}}throw new b(l,i);};}return a;});
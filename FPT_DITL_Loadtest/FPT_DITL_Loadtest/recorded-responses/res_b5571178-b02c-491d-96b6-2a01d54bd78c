/*
ï¿½2010 - 2016 SAP SE or an SAP affiliate company.  All rights reserved.
 
SAP and other SAP products and services mentioned herein as well as their respective logos are trademarks or registered trademarks of SAP SE in Germany and other countries.  Please see http://www.sap.com/corporate-en/legal/copyright/index.epx#trademark for additional trademark information and notices.
*/

jQuery.sap.declare({modName:"com.sap.fioribi.modules.UserSettings.UserSettingsView",type:"view"});jQuery.sap.require({modName:"com.sap.fioribi.modules.common.BILPView",type:"view"});com.sap.fioribi.modules.UserSettings.UserSettingsView=function(){com.sap.fioribi.modules.common.BILPView.apply(this,arguments);};com.sap.fioribi.modules.UserSettings.UserSettingsView.prototype=jQuery.sap.newObject(com.sap.fioribi.modules.common.BILPView.prototype);com.sap.fioribi.modules.UserSettings.UserSettingsView.prototype.getControllerName=function(){return"com.sap.fioribi.modules.UserSettings.UserSettingsController";};com.sap.fioribi.modules.UserSettings.UserSettingsView.prototype.openHelpLink=function(){var locale=BILaunchpadApp.getProductLocale();locale=locale.replace(/_/g,"-");var sResourceBundlePath="https://help.sap.com/viewer/baaf5c869e824d07ab0109e7b093348e/4.3.1/"+locale;openInNewTab(sResourceBundlePath);function openInNewTab(path){var newTab=window.open();newTab.opener=null;newTab.location=path;}};com.sap.fioribi.modules.UserSettings.UserSettingsView.prototype.createContent=function(oController){BILaunchpadApp.includeStyleSheet("com/sap/fioribi/css/UserSettings.css");var vBoxContainer=new sap.m.VBox().addStyleClass("containerVBox");var userDetailContainer=new sap.m.HBox().addStyleClass("userDetailContainer");userDetailContainer.setAlignItems("Center");userDetailContainer.setJustifyContent("Center");userDetailContainer.setWidth("45%");var userLabel=new sap.m.Label({text:{parts:[{path:"/fullname"},{path:"/accountname"}],formatter:function(name,accountname){if(name!=""&&name!=undefined){this.setTooltip(name);return name;}else{this.setTooltip(accountname);return accountname;}}}}).addStyleClass("nameLabel");userDetailContainer.addItem(userLabel);var $this=this;var helpIcon=new sap.m.Button({icon:"sap-icon://sys-help",press:function(){$this.openHelpLink();}}).addStyleClass("size32px helpIcon iconHover BILP-settingsPageIcons");var helpLabel=new sap.m.Label({text:BILaunchpadApp.localized("UserSettings_Help")}).addStyleClass("label");var helpItem=new sap.m.VBox({items:[helpIcon,helpLabel]}).addStyleClass("itemPadding helpStyling");helpItem.setAlignItems("Center");var aboutCustomToolbar=new sap.m.Toolbar({height:"95px"});var toolbarText=new sap.m.Label({text:BILaunchpadApp.localized("UserSettings_Header"),}).addStyleClass("PaddingLeft32 PaddingTop32 PaddingBottom32 aboutHeader fontHelvatica");aboutCustomToolbar.setDesign(sap.m.BarDesign.Auto);aboutCustomToolbar.addContent(toolbarText);aboutCustomToolbar.addStyleClass("SetBarStyle");var aboutDialogBox=new sap.m.Dialog("aboutDialog",{modal:true,contentWidth:"714px",contentHeight:"auto",horizontalScrolling:false,resizable:false,endButton:new sap.m.Button({text:BILaunchpadApp.localized("UserSettings_Close"),press:function(){aboutDialogBox.close();}})}).addStyleClass("DialogBorderRadius PaddingTop0 sapUiNoContentPadding");var aboutView=null;aboutDialogBox.setCustomHeader(aboutCustomToolbar);aboutDialogBox.setShowHeader(false);var aboutIcon=BILaunchpadApp.about=new sap.m.Button({icon:"sap-icon://lightbulb",press:function(){if(aboutView==null){jQuery.sap.require("com.sap.fioribi.modules.UserSettings.AboutDialog.AboutContainer");aboutView=new com.sap.fioribi.modules.UserSettings.AboutDialog.AboutContainer();aboutDialogBox.addContent(aboutView.getUI());}aboutDialogBox.open();}}).addStyleClass("size32px aboutIcon iconHover BILP-settingsPageIcons");var aboutLabel=new sap.m.Label({text:BILaunchpadApp.localized("UserSettings_About")}).addStyleClass("label");var aboutItem=new sap.m.VBox({items:[aboutIcon,aboutLabel]}).addStyleClass("itemPadding");aboutItem.setAlignItems("Center");var settingsDialogContents=null;var userSettingDialogBox=new sap.m.Dialog("userSettingsDialog",{modal:true,contentWidth:"100%",contentHeight:"100%",resizable:false,beginButton:new sap.m.Button({text:BILaunchpadApp.localized("UserSettings_Save"),press:function(){oController.submitData();if(!BILaunchpadApp.getDBUpdateFlag()){if(sap.ui.getCore().byId("showChangePassword")==undefined||!sap.ui.getCore().byId("showChangePassword").getVisible()){userSettingDialogBox.close();userSettingDialogBox.removeContent(0);settingsDialogContents.destroy();settingsDialogContents=null;sap.m.MessageToast.show(BILaunchpadApp.localized("UserSettings_PageReload"),{autoClose:true});}}else{sap.m.MessageToast.show(BILaunchpadApp.localized("Password_Validation_Incorrect"),{autoClose:true});}}}),endButton:new sap.m.Button({text:BILaunchpadApp.localized("UserSettings_Cancel"),press:function(){userSettingDialogBox.close();userSettingDialogBox.removeContent(0);settingsDialogContents.destroy();settingsDialogContents=null;}})}).addStyleClass("DialogBorderRadius generalDialog sapUiNoContentPadding");userSettingDialogBox.setHorizontalScrolling(false);userSettingDialogBox.setVerticalScrolling(false);userSettingDialogBox.setShowHeader(false);var settingsIcon=BILaunchpadApp.settings=new sap.m.Button({icon:"sap-icon://action-settings",backgroundSize:"initial",press:function(){jQuery.sap.require("com.sap.fioribi.modules.UserSettings.SettingsDialog.SettingsDialogContainer");if(settingsDialogContents==null){settingsDialogContents=new com.sap.fioribi.modules.UserSettings.SettingsDialog.SettingsDialogContainer();userSettingDialogBox.addContent(settingsDialogContents.getUI());}userSettingDialogBox.open();}}).addStyleClass("size32px settingsIcon iconHover BILP-settingsPageIcons");var settingsLabel=new sap.m.Label({text:BILaunchpadApp.localized("UserSettings_Settings")}).addStyleClass("label");var settingsItem=new sap.m.VBox({items:[settingsIcon,settingsLabel],visible:"{/preferencepageenabled}"}).addStyleClass("itemPadding");settingsItem.setAlignItems("Center");var logOutIcon=BILaunchpadApp.logout=new sap.m.Button({icon:"sap-icon://log",press:oController.logout}).addStyleClass("size32px logOutIcon iconHover BILP-settingsPageIcons");var logLabel=new sap.m.Label({text:BILaunchpadApp.localized("UserSettings_Logout")}).addStyleClass("label");var logOutItem=new sap.m.VBox({items:[logOutIcon,logLabel]}).addStyleClass("itemPadding");logOutItem.setAlignItems("Center");var userSettingsContainer=new sap.m.HBox({items:[helpItem,aboutItem,settingsItem,logOutItem],alignItems:sap.m.FlexAlignItems.Stretch,justifyContent:sap.m.FlexJustifyContent.SpaceBetween}).addStyleClass("userSettingsContainer");vBoxContainer.addItem(userDetailContainer);vBoxContainer.addItem(userSettingsContainer);vBoxContainer.setAlignItems("Center");vBoxContainer.setJustifyContent("Center");return vBoxContainer;};
define("zen.rt.components.filterpanel/resources/js/filterpanel_handler",["sap/zen/basehandler","./docking","./emptyComponent","./helperfunctions","./input","./range","./selection","zen.rt.components.pagebook/resources/js/pagebook_handler","zen.rt.components.pagebook/resources/js/pagebook","zen.rt.components.pagebook/resources/js/page"],function(j,h,c,b,f,e,a,i,d,m){var l=j.dispatcher;var g=function(){var n=this;j.apply(this,arguments);this.getDockingHandler=function(o){return h[o];};this.isDesignModeD4LIncluded=function(o){return sap.zen.designmode&&sap.zen.designmode.isDesignMode(o);};this.getRepeaterRowElement=function(o){if(o.hasClass("sapzenfilterpanel-RowRepeaterRow")){return o;}else{return o.parents(".sapzenfilterpanel-RowRepeaterRow");}};this.getContextMenuAction=function(u,s,p){var r=s.getModel().getProperty("/command/createcontextmenu");if(r&&s.ZEN_IdToDimensionMap){var q=this.getRepeaterRowElement(p);if(q&&q[0]){var t=s.ZEN_IdToDimensionMap[q[0].id];if(t){var o=n.prepareCommand(r,"__STRING__",u);o=n.prepareCommand(o,"__STRING2__",t);o=n.prepareCommand(o,"__STRING3__",p[0].id);return new Function(o);}}}return null;};this.create=function(D,ai,aj){var P,q,ag,au,ah,t,av,aJ,aa,ap,R,S,Y,N,z,u,K,aM,az,al,aw,Q,M,an,V,I,B,L,ab,X,aO,af,x,v,ay,O,aC,am,aN,o,W,aA,C,ae,aH,ao,J,aG,G,aB;var r="",E=false;$.sap.require("sap.ui.model.json.JSONModel");sap.ui.getCore().loadLibrary("sap.ui.table");q=ai.id;au=new sap.ui.model.json.JSONModel();au.setSizeLimit(Number.MAX_VALUE);au.setData(ai);ah=au.getProperty("/property/showembedded");t=au.getProperty("/property/indialog");av=au.getProperty("/property/variablescreen");v=au.getProperty("/property/filterpanel");ay=au.getProperty("/property/navigationpanel");o=au.getProperty("/property/sfinnavigation");C=au.getProperty("/property/sfinprompt");W=au.getProperty("/property/labelontop");aC=au.getProperty("/property/memberselector");am=au.getProperty("/property/showonescreen");ae=au.getProperty("/property/navigationdragdrop");aH=au.getProperty("/property/desktopstyle");aG=au.getProperty("/property/directinput");G=au.getProperty("/property/fillservercache");if(aC||au.getProperty("/property/popupreference")){P=D?D:new c(q);}else{if(am){if(D){P=D;}else{P=new sap.ui.commons.Splitter(q,{splitterPosition:"40%"});P.addStyleClass("sapzenfilterpanel-OnePage");}if(C){P.addStyleClass("sapzenfilterpanel-SFinPrompt");}}else{P=D?D:new d(q,{transitionEffect:"slide_in",transitionDirection:"horizontal",transitionHandler:{slide_in:i.getTransitionHandler("slide_in")},enableGestures:false});}}if(D){if(ai.changeVisibility){ag="#"+P.getId();if(ai.visible){$(ag).css("display","");}else{if(P.ZEN_popup&&P.ZEN_popup.isOpen()){$("#"+P.ZEN_popup.getContent().getId()).find(".sapzenfilterpanel-BtnFilter").click();}$(ag).css("display","none");}}if(P.destroyPages){P.destroyPages();}if(P.ZEN_popup){P.ZEN_popup.getContent().destroy();P.ZEN_popup.destroy();}}else{aJ=P.exit;P.exit=function(){if(aJ){aJ.apply(P,arguments);}if(P.ZEN_popup){if(P.ZEN_popup.getContent()){P.ZEN_popup.getContent().destroy();}P.ZEN_popup.destroy();}new Function(au.getProperty("/command/destroyfiltercomponent"))();};}P.setModel(au);if(!av){P.ZEN_IdToDimensionMap={};}var ak=function(){if(O){var aR=au.getProperty("/");if(aR.axis&&(aR.axis.rows.dirty||aR.axis.columns.dirty)){O.setEnabled(true);return;}if(aR.characteristics){for(var aS=0,aP=aR.characteristics.length;aS<aP;aS++){var aQ=aR.characteristics[aS].characteristic;if(aQ.axisdirty||(aR.filters[aQ.name]&&aR.filters[aQ.name].dirty)){O.setEnabled(true);return;}}}O.setEnabled(false);}};P.ZEN_changeSubmitButton=ak;aa=au.getProperty("/property/label");ap=au.getProperty("/property/appearance");R=function(aP){return function(aY){var aS,aQ,aW,aX,aU,aV,aT,aZ;if(!aY||!aP||!aY[aP]){return"";}else{aZ=aY[aP];}if(aZ.notsupported&&!aZ.dirty){return"("+P.getModel().getProperty("/text/complexselection")+")";}aS="";aQ=aZ.members;aW=aZ.ranges;aX=aZ.input;if((aQ&&aQ.length>0)||(aW&&aW.length>0)){if(aQ&&aQ.length>0){var aR=function(a0){return a0.text?a0.text:a0.displaykey;};aS+=aR(aQ[0]);for(aU=1,aV=aQ.length;aU<aV;aU++){aS+=", "+aR(aQ[aU]);}}if(aW&&aW.length>0){for(aU=0,aV=aW.length;aU<aV;aU++){if(aS){aS+=", ";}aT=aW[aU];if(aT.from){aS+=aT.from.displaykey+" ";}aS+="-";if(aT.to){aS+=" "+aT.to.displaykey;}else{aS+=" ";}}}}else{if(aX){aS=aX;}}if(aS&&aZ.exclude){aS="≠ "+aS;}return aS;};};S=function(aP){return function(aS){var aR,aQ,aV,aT,aU;if(!aS||!aP||!aS[aP]){return"";}else{aU=aS[aP];}aR="";if(!aU){return aR;}if(aU.notsupported&&!aU.dirty){return"##";}aQ=aU.members;aV=aU.ranges;aT=aU.input;if(aQ&&aQ.length>0){aR=""+aQ.length;}else{if(aV&&aV.length>0){aR=""+aV.length;}else{if(aT){aR=""+1;}}}if(aR&&aU.exclude){aR="≠ "+aR;}return aR;};};N=function(aR,aU,aP,aV,a3){var aQ,aT,aW,a5,aZ,a1,a4,a6,aX,aY,a2,aS,a8,a7,a0;aQ=P.getModel();aW=[];a5=-1;aZ=undefined;if(aU){a1=aQ.getProperty("/dialog/filters");aZ=aQ.getProperty("/dialog/name");if(a1&&a1.dirty){a1.dirty=!aR;ak();a1.notsupported=false;aW[++a5]={};aW[a5].name=aZ;aW[a5].exclude=a1.exclude;if(a1.input!==undefined){aW[a5].input=a1.input;}aW[a5].keys=[];for(a4=0,a6=a1.members.length;a4<a6;a4++){aW[0].keys[a4]=a1.members[a4].key;}aW[a5].ranges=[];for(a4=0,a6=a1.ranges.length;a4<a6;a4++){aX=a1.ranges[a5];aW[a5].ranges[a4]={from:(aX.from?aX.from.key:""),to:(aX.to?aX.to.key:"")};}}}aT=aQ.getProperty("/filters");aY=undefined;for(aY in aT){if(aY===aZ){continue;}a2=aT[aY];if(a2.dirty){a2.dirty=!aR;ak();a2.notsupported=false;aW[++a5]={};aW[a5].name=aY;aW[a5].exclude=a2.exclude;if(a2.input!==undefined){aW[a5].input=a2.input;}aW[a5].keys=[];for(a4=0,a6=a2.members.length;a4<a6;a4++){aW[a5].keys[a4]=a2.members[a4].key;}aW[a5].ranges=[];for(a4=0,a6=a2.ranges.length;a4<a6;a4++){aX=a2.ranges[a4];aW[a5].ranges[a4]={from:(aX.from?aX.from.key:""),to:(aX.to?aX.to.key:"")};}}}a7={};a0=aQ.getProperty("/characteristics");for(a5=0;a5<a0.length;a5++){if(a0[a5].characteristic.axisdirty){if(!a7.axis){a7=aQ.getProperty("/axis");}a0[a5].characteristic.axisdirty=!aR;ak();}}if(!a7.axis&&(aQ.getProperty("/axis/rows/dirty")||aQ.getProperty("/axis/columns/dirty"))){a7=aQ.getProperty("/axis");}if(aR&&a7){aQ.setProperty("/axis/rows/dirty",undefined);aQ.setProperty("/axis/columns/dirty",undefined);ak();}if(a7||aW.length>0||(aP&&aQ.getProperty("/command/containsonsubmit"))){if(av){sap.zen.MessageViewHandler.clearMessages();}a8={filters:aW,axis:a7};if(aV&&a3){aS=n.prepareCommand(a3,aV,JSON.stringify(a8));return aS;}else{aS=n.prepareCommand(aQ.getProperty(aP?"/command/submitfilter":"/command/submitonlyfilter"),"__STRING__",JSON.stringify(a8));aS=n.prepareCommand(aS,"__BOOLEAN__",aR?"X":" ");new Function(aS)();}}};var p=function(aX,aW,aT,aU){var aP=au.getProperty(aX+"/characteristic/axis");if(aP===aW){return;}var aQ=au.getProperty(aX+"/characteristic/name");au.setProperty(aX+"/characteristic/axisdirty",true);ak();aT.addStyleClass("sapzenfilterpanel-NavigationDirtyState");ac=$($("#"+q+" .sapzenfilterpanel-RowRepeater").children()[0]).scrollTop();au.setProperty(aX+"/characteristic/axis",aW);if(E){ar=true;au.setProperty("/axisfilterselected",aW==="FREE"?undefined:aQ);}if(aP!=="FREE"){var aV=au.getProperty("/axis/"+aP.toLowerCase());for(var aS=0;aS<aV.length;aS++){var aR=aV[aS].entry.name;if(aR===aQ){aV.splice(aS,1);break;}}}if(aW!=="FREE"){var aV=au.getProperty("/axis/"+aW.toLowerCase());if(aU){aV.unshift({entry:{name:aQ}});}else{aV.push({entry:{name:aQ}});}}if(E){aM.triggerSort(q+"_Sorter_text");aM.triggerSort(q+"_Sorter_nav");}if(au.getProperty("/property/autoapply")||!O.getVisible()){N(true,false,true);}else{if(G){N();}}};var T=function(aS,aR,aQ,aT,aP){return function(){if(aS.getPressed()){if(aR.getPressed()){aR.setPressed(false);}p(aQ,aT,aP);}else{p(aQ,"FREE",aP);}};};var A=function(aQ,aP){return function(aR,aS){var aT=N(aQ,false,aP,aR,aS);P.ZEN_initFunction();return aT;};};P.ZEN_submit=A(true);P.ZEN_submit_with_apply=A(true,true);P.ZEN_check=A(false);P.ZEN_cancel=function(){new Function(au.getProperty("/command/cancelonlyfilter"))();};P.zenCleanup=function(){if(P.ZEN_table){P.ZEN_table.setVisible(false);}if(P.ZEN_tableH){P.ZEN_tableH.setVisible(false);}if(P.ZEN_selectionTable){P.ZEN_selectionTable.setVisible(false);}if(P.ZEN_rangeTable){P.ZEN_rangeTable.setVisible(false);}if(P.ZEN_rangeSelectionTable){P.ZEN_rangeSelectionTable.setVisible(false);}};P.ZEN_resize=function(){var aR,aQ,aU,aP,aT,aS;if(P.ZEN_fitTable){for(var aW=0,aV=P.ZEN_fitTable.length;aW<aV;aW++){P.ZEN_fitTable[aW]();}}if(P.ZEN_fitRangeTable){P.ZEN_fitRangeTable();}aR=P.$();if(aR){aQ=aR.find(".sapzenfilterpanel-TextVariableFieldContainer");for(aU=0,aP=aQ.length;aU<aP;aU++){aT=$(aQ[aU]);aS=aT.find("input");if(!aS.hasClass("sapzenfilterpanel-TextVariableField")){aS.width(aT.outerWidth()-$(aT.find(".sapUiHLayoutChildWrapper")[1]).outerWidth());}}}};P.ZEN_resizeEnd=P.ZEN_resize;if(aC||au.getProperty("/property/popupreference")){z=au.getProperty("/characteristics/0/characteristic/name");P.onAfterRendering=function(){new Function(n.prepareCommand(P.getModel().getProperty("/command/showfilterdialog"),"__STRING__",z))();P.onAfterRendering=undefined;};P.ZEN_initFunction=function(){};}else{if(!ah&&!aa){z=au.getProperty("/characteristics/0/characteristic/name");Y=new sap.ui.commons.ValueHelpField({width:"100%",valueHelpRequest:function(){new Function(n.prepareCommand(P.getModel().getProperty("/command/showfilterdialog"),"__STRING__",z))();}});Y.onAfterRendering=function(){Y.$().find("input").attr("readonly","readonly");};Y.removeStyleClass("sapzenfilterpanel-Container");Y.removeStyleClass("sapzenfilterpanel-PopupContainer");Y.removeStyleClass("sapzenfilterpanel-DialogContainer");Y.addStyleClass("sapzenfilterpanel-ValueHelp");Y.bindProperty("value",{path:"/filters",formatter:ap==="FILTERCOUNT"?S(z):R(z)});P.ZEN_initFunction=function(){var aP=P.getModel().getProperty("/filters")[z];if(aP&&aP.dirty){Y.addStyleClass("sapzenfilterpanel-DirtyState");if(aA){aA.addStyleClass("sapzenfilterpanel-DirtyState");}}else{Y.removeStyleClass("sapzenfilterpanel-DirtyState");if(aA){aA.removeStyleClass("sapzenfilterpanel-DirtyState");}}Y.getBinding("value")._fireChange();if(aA){aA.getBinding("text")._fireChange();}};}else{Y=new sap.ui.commons.layout.BorderLayout();if(ay&&v){Y.addStyleClass("sapzenfilterpanel-ModeFilteringNavigation");Y.addStyleClass("sapzenfilterpanel-NavigationAxisFilterAll");Y.removeStyleClass("sapzenfilterpanel-ModeNavigation");Y.removeStyleClass("sapzenfilterpanel-SFinNavigation");}else{if(ay){Y.addStyleClass("sapzenfilterpanel-ModeNavigation");Y.addStyleClass("sapzenfilterpanel-NavigationAxisFilterAll");Y.removeStyleClass("sapzenfilterpanel-ModeFilteringNavigation");if(o){Y.addStyleClass("sapzenfilterpanel-SFinNavigation");}else{Y.removeStyleClass("sapzenfilterpanel-SFinNavigation");}}else{Y.removeStyleClass("sapzenfilterpanel-ModeNavigation");Y.removeStyleClass("sapzenfilterpanel-ModeFilteringNavigation");Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterAll");Y.removeStyleClass("sapzenfilterpanel-SFinNavigation");}}if(ah){Y.removeStyleClass("sapzenfilterpanel-ValueHelp");Y.removeStyleClass("sapzenfilterpanel-Container");Y.addStyleClass("sapzenfilterpanel-PopupContainer");if(!t){Y.removeStyleClass("sapzenfilterpanel-DialogContainer");if(ay&&o){u=new sap.zen.commons.layout.MatrixLayout({columns:3}).addStyleClass("sapzenfilterpanel-SFinHeader");O=new sap.ui.commons.Button({lite:true,enabled:false,press:A(true,true)}).addStyleClass("sapzenfilterpanel-SFinButton").addStyleClass("sapzenfilterpanel-SFinApply");aN=new sap.ui.commons.Button({lite:true,press:function(){O.setVisible(!O.getVisible());if(!O.getVisible()&&O.getEnabled()){N(true,false,true);}}}).addStyleClass("sapzenfilterpanel-SFinButton").addStyleClass("sapzenfilterpanel-SFinSettings");u.createRow(new sap.zen.commons.layout.MatrixLayoutCell().addContent(new sap.ui.commons.TextView({text:"{/text/title}"}).addStyleClass("sapzenfilterpanel-SFinTitle")).addStyleClass("sapzenfilterpanel-SFinTitleCell"),new sap.zen.commons.layout.MatrixLayoutCell().addContent(O).addStyleClass("sapzenfilterpanel-SFinButtonCell"),new sap.zen.commons.layout.MatrixLayoutCell().addContent(aN).addStyleClass("sapzenfilterpanel-SFinButtonCell"));u.createRow(new sap.zen.commons.layout.MatrixLayoutCell({colSpan:3}).addContent(new sap.ui.commons.SearchField({width:"100%",enableListSuggest:false,enableClear:true,startSuggestion:0,suggest:function(aP){var aQ=new sap.ui.model.Filter("characteristic/text",sap.ui.model.FilterOperator.Contains,aP.getParameter("value"));aM.getBinding("rows").filter([aQ]);aM.triggerSort(q+"_Sorter_text");aM.triggerSort(q+"_Sorter_nav");}}).addStyleClass("sapzenfilterpanel-SFinSearch")).addStyleClass("sapzenfilterpanel-SFinSearchCell"));}else{u=new sap.ui.commons.layout.BorderLayout();u.addStyleClass("sapzenfilterpanel-PopupContainerHeader");u.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,new sap.ui.commons.Button({text:"{/text/cancel}",visible:"{=!${/property/autoapply}}",press:function(){new Function(au.getProperty("/command/cancelfilter"))();}}).addStyleClass("sapzenfilterpanel-BtnClear"));u.getBegin().setOverflowX("hidden").setOverflowY("hidden");var F=au.getProperty("/text/title");if(!ay){u.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,new sap.ui.commons.TextView({text:"{/text/title}"}).addStyleClass("sapzenfilterpanel-PopupTitle"));u.getCenter().setOverflowX("hidden").setOverflowY("hidden");}else{if(F&&F.length>0){u.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,new sap.ui.commons.TextView({text:"{/text/title}"}).addStyleClass("sapzenfilterpanel-PopupTitle"));u.getTop().setOverflowX("hidden").setOverflowY("hidden");Y.addStyleClass("sapzenfilterpanel-TitleOnTop");}}O=new sap.ui.commons.Button({text:"{/text/submit}",visible:"{=!${/property/autoapply}}",enabled:false,press:A(true,true)}).addStyleClass("sapzenfilterpanel-BtnSubmit");u.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.end,O);u.getEnd().setOverflowX("hidden").setOverflowY("hidden");}Y.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,u);}else{Y.addStyleClass("sapzenfilterpanel-DialogContainer");}}else{Y.removeStyleClass("sapzenfilterpanel-ValueHelp");Y.removeStyleClass("sapzenfilterpanel-PopupContainer");Y.removeStyleClass("sapzenfilterpanel-DialogContainer");Y.addStyleClass("sapzenfilterpanel-Container");}K=new sap.ui.commons.layout.BorderLayout();if(ah){K.addStyleClass("sapzenfilterpanel-RowRepeater");}else{K.addStyleClass("sapzenfilterpanel-SingleRowRepeater");}aM=new sap.ui.commons.RowRepeater({design:sap.ui.commons.RowRepeaterDesign.BareShell,showMoreSteps:1,numberOfRows:"{/characteristics/length}"});az=new sap.ui.commons.TextView({text:ah?"{/text/nodata}":"{/text/selectdimension}",design:sap.ui.commons.TextViewDesign.H1});az.addStyleClass("sapzenfilterpanel-NoNotifications");aM.setNoData(az);Y.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,K);var ac=5;var ar=false;aM.onAfterRendering=function(){if(ar){var aT=$($("#"+q+" .sapzenfilterpanel-RowRepeater").children()[0]);var aR=$("#"+q+" .sapzenfilterpanel-MarkedRow");if(aR&&aR.position()){var aQ=aR.position().top+($(aR.parent().parent()).position().top-$(aR.parent().parent().parent()).position().top);var aS=aR.position().top+aR.height()+($(aR.parent().parent()).position().top-$(aR.parent().parent().parent()).position().top);var aP=ac+aT.height();if(aS>aP){ac=ac+(aS-aP);}else{if(ac>aQ){ac=aQ;}}}aT.scrollTop(ac);}ar=false;};aM.zenUpDownFunction=function(a8,a5,aS,aY){var aT={};var aZ=au.getProperty("/characteristics");for(var a3=0;a3<aZ.length;a3++){var aQ=aZ[a3];aT[aQ.characteristic.name]=aQ.characteristic.text;}var ba=["rows","columns"];var a2=aS;if(!a2){a2=au.getProperty("/axisfilterselected");}var aX=-2,a1,a6,a3,aV,a7,aW;if(a2){for(var a3=0;a3<ba.length;a3++){aV=au.getProperty("/axis/"+ba[a3]);a7=aV.length;for(a6=0;a6<a7;a6++){if(aV[a6].entry.name===a2){aX=a6;aW=ba[a3];break;}}if(aW){break;}}}var aU=false;a1=aX;do{a1=a5?a1-1:a1+1;if(a1>-1&&a1<a7){var aP=aT[aV[a1].entry.name];var a0=aM.getBinding("rows").aFilters[0].oValue1;if(a0==undefined||aP.toUpperCase().indexOf(a0.toUpperCase())>-1){aU=true;}}else{break;}}while(aU==false);if(a1==-1){a1=a7-1;}else{if(a1==a7){a1=0;}}if(a1>-1&&a1<a7){if(!aS){aV.splice(a1,0,aV.splice(aX,1)[0]);}else{var aR=null;if(aY){for(var a3=0;a3<ba.length;a3++){aV=au.getProperty("/axis/"+ba[a3]);a7=aV.length;for(a6=0;a6<a7;a6++){if(aV[a6].entry.name===aY){aR=a6;aW=ba[a3];break;}}if(aR!==null){break;}}}var a9=aR<aX?-1:0;var a4=a5?aX+a9:aX+a9+1;if(aR!==null){aV.splice(a4,0,aV.splice((aR),1)[0]);}}au.setProperty("/axis/"+aW+"/dirty",true);ak();ac=$($("#"+q+" .sapzenfilterpanel-RowRepeater").children()[0]).scrollTop();aM.triggerSort(q+"_Sorter_text");aM.triggerSort(q+"_Sorter_nav");ar=true;}if(a8){a8.cancelBubble=true;a8.returnValue=false;if(a8.stopPropagation){a8.stopPropagation();}if(a8.preventDefault){a8.preventDefault();}}if(au.getProperty("/property/autoapply")||!O.getVisible()){N(true,false,true);}else{if(G){N();}}};var aq=function(){var aS=function(aT){return function(aU){aM.zenUpDownFunction(aU,aT);};};var aQ=new sap.ui.commons.Button({press:aS(true),lite:o}).addStyleClass("sapzenfilterpanel-UpNavigationButton");var aP=new sap.ui.commons.Button({press:aS(false),lite:o}).addStyleClass("sapzenfilterpanel-DownNavigationButton");var aR=new sap.ui.commons.SegmentedButton({buttons:[aQ,aP],select:function(){this.setSelectedButton(undefined);}}).addStyleClass("sapzenfilterpanel-UpDownNavigationButtons");return aR;};var H=0;al=function(be,a9){var aR,aQ,aX,aV,aP,a2,a4,aZ,bh,a3,aU,bj,aY,bf,bb,aT,aS;if(P.ZEN_IdToDimensionMap&&H===0){P.ZEN_IdToDimensionMap={};}H++;aR=P.getModel();aQ=aR.getProperty(a9+"/characteristic");var aW=aM.getBinding("rows").iLength;aX=aQ.name;aV=aQ.valuehelp;aS=aQ.nofiltering;aP=new sap.ui.commons.layout.BorderLayout(be,{height:""}).addStyleClass("sapzenfilterpanel-RowRepeaterRow");if(ay&&ae&&E){aP.attachBrowserEvent("mousedown",function(bB){var bt=this;var by=bt.getParent().getParent().getParent().getParent().getParent().getParent().getParent().$();var bC=null;var br=0;var bq=0;var bE=null;var bp=[];var bH=[];function bG(bJ){var bI=bJ.offset();bI.height=bJ.outerHeight();bI.width=bJ.outerWidth();bI.oObject=bJ;return bI;}function bs(){bp=[];$(".sapzenfilterpanel-RowRepeaterRow").each(function(bJ,bL){var bI=sap.ui.getCore().byId(bL.id);if(bI.getParent()===bt.getParent()&&bI.getId()!==bt.getId()){var bK=bI.getCenter().$().offset();if(bI.getTop()){bK.top=bK.top;}bK.left=bI.getBegin()?bI.getBegin().$().offset().left:bI.getCenter().$().offset().left;bK.height=bI.$().outerHeight();bK.width=bI.$().outerWidth();bK.oObject=bI;bp.push(bK);}});bH=[];bH.push(bG($(".sapzenfilterpanel-AxisHeaderTextROWS")));bH.push(bG($(".sapzenfilterpanel-AxisHeaderTextCOLUMNS")));bH.push(bG($(".sapzenfilterpanel-AxisHeaderTextFREE")));}function bD(bO){if(bC===null){bC=(bt.$()).clone();bs();bC.addClass("sapzenfilterpanel-opacityDND");var bK=bC;bK.css("border-bottom",bt.$().css("border-right"));bK.css("border-top",bt.$().css("border-right"));if(bt.getBegin()){bK.children(".sapUiBorderLayoutCenter").css("left",bt.getCenter().$().css("left"));}bK.children(".sapUiBorderLayoutBottom").remove();bK.children(".sapUiBorderLayoutTop").remove();var bM=$(bt.$().children(".sapUiBorderLayoutBegin")).children("button");var bI=$(bK.children(".sapUiBorderLayoutBegin")).children("button");for(var bJ=0;bJ<bM.length;bJ++){var bL=$(bM[bJ]);var bP=$(bI[bJ]);bP.css("background-image",bL.css("background-image"));bP.css("background-size",bL.css("background-size"));bP.css("filter",bL.css("filter"));bP.css("margin-top",bL.css("margin-top"));bP.css("margin-left",bL.css("margin-left"));bP.css("background-repeat",bL.css("background-repeat"));bP.css("background-position",bL.css("background-position"));bP.css("background-color",bL.css("background-color"));bP.css("margin",bL.css("margin"));bP.css("width",bL.css("width"));bP.css("height",bL.css("height"));}br=bO.pageX;bq=bO.pageY;bE=bt.getCenter().$().offset();if(bt.getTop()){bE.top=bE.top;bC.css("margin-top","0px");}bE.left=bt.getBegin()?bt.getBegin().$().offset().left:bt.getCenter().$().offset().left;bC.css("position","absolute");bC.css("width",$(bt.$().parent()).css("width"));bC.appendTo($(document.body));}bE.left=(bE.left);bE.top=(bE.top+(bO.pageY-bq));if((bE.top<=bt.getParent().getParent().$().offset().top)||(bO.pageY<=bt.getParent().getParent().$().offset().top)){bE.top=bt.getParent().getParent().$().offset().top;bk(true);}var bN=bt.getParent().getParent().$().offset().top+bt.getParent().getParent().$().outerHeight();if((bE.top+bC.outerHeight())>=bN||bO.pageY>=bN){bE.top=(bN)-bC.outerHeight();bk(false);}bC.css("left",(bE.left)+"px");bC.css("top",(bE.top)+"px");br=bO.pageX;bq=bO.pageY;bx(bO);}var bm=5;var bu=aM.$().parent();var bA=aM.$().height()-bu.height();function bk(bJ){if(bA<=0){return;}var bK=bu.scrollTop();var bI=null;if(bJ){if(bK>0){bI=bK-bm;if(bI<0){bI=0;}}}else{if(bK<bA){bI=bK+bm;if(bI>bA){bI=bA;}}}if(bI!==null&&bI!=bK){bu.scrollTop(bI);bs();}}function bo(bO,bJ,bK){var bP=bC.offset().top+(bC.outerHeight()*0.5);for(var bM=0;bM<bJ.length;bM++){var bI=bJ[bM];var bN=bI.top;var bL=bN;if(bI.height<bC.outerHeight()){bL+=bC.outerHeight();}else{bL+=bI.height;}if(bN<=bP&&(bP<bL||(bK&&bI.oObject.hasClass("sapzenfilterpanel-AxisHeaderTextFREE")))){return bI;}}return null;}function bF(bM,bQ){var bN=bM.pageX;var bL=bM.pageY;var bK=bQ;var bJ=bK.offset().left;var bP=bK.offset().top;var bI=bJ+bK.outerWidth();var bO=bP+bK.outerHeight();if(bJ<=bN&&bN<bI&&bP<=bL&&bL<bO){return true;}return false;}function bw(bI){return bo(bI,bp,false);}function bn(bI){return bo(bI,bH,true);}function bx(bK){$(".sapzenfilterpanel-topHighlightDND").each(function(bM,bN){sap.ui.getCore().byId(bN.id).removeStyleClass("sapzenfilterpanel-topHighlightDND");});$(".sapzenfilterpanel-bottomHighlightDND").each(function(bM,bN){sap.ui.getCore().byId(bN.id).removeStyleClass("sapzenfilterpanel-bottomHighlightDND");});var bJ=$(".sapzenfilterpanel-catHighlightDND");if(bJ.length>0){bJ.each(function(bM,bN){sap.ui.getCore().byId(bN.id).removeStyleClass("sapzenfilterpanel-catHighlightDND");});}if(!bF(bK,by)){return;}var bI=bw(bK);var bL=bn(bK);if(bL){sap.ui.getCore().byId(bL.oObject.attr("id")).addStyleClass("sapzenfilterpanel-catHighlightDND");}else{if(bI){if((bC.offset().top+bC.height()*0.5)<=(bI.top+bI.oObject.$().height()*0.5)){bI.oObject.addStyleClass("sapzenfilterpanel-topHighlightDND");}else{bI.oObject.addStyleClass("sapzenfilterpanel-bottomHighlightDND");}}}}function bz(bN){if(!bF(bN,by)){bv();return;}var bQ=$(".sapzenfilterpanel-catHighlightDND");var bR=$(".sapzenfilterpanel-topHighlightDND");var bL=$(".sapzenfilterpanel-bottomHighlightDND");bv();if(bQ.length>=1||bL.length===0||bR.length===0){var bP="";var bO=null;if(bQ.length>=1){if(bQ.hasClass("sapzenfilterpanel-AxisHeaderTextROWS")){bP="ROWS";}else{if(bQ.hasClass("sapzenfilterpanel-AxisHeaderTextCOLUMNS")){bP="COLUMNS";}else{bP="FREE";}}}else{if(bR.length>0){bO=bR;}else{if(bL.length>0){bO=bL;}else{return;}}}var bJ="";if(bO!==null){bJ=P.ZEN_IdToDimensionMap[bO.attr("id")];}var bK=bt.getParent().getBinding("rows").oList;for(var bI=0;bI<bK.length;bI++){if(bK[bI].characteristic.name===bJ){bP=bK[bI].characteristic.axis;}}if(bP===""){return;}var bM=P.ZEN_IdToDimensionMap[bt.getId()];p(a9,bP,bt,true);if(bQ.length==0){if(bR.length>=1){aM.zenUpDownFunction(null,true,bJ,bM);}else{aM.zenUpDownFunction(null,false,bJ,bM);}}}}function bv(){if(bC){bC.remove();}aP.getParent().zenDragStart=false;aP.zenDragObject=false;$(document).unbind("mousemove",bD);$(document).unbind("mouseup",bz);$(document).unbind("keydown",bl);$(".sapzenfilterpanel-topHighlightDND").each(function(bJ,bK){sap.ui.getCore().byId(bK.id).removeStyleClass("sapzenfilterpanel-topHighlightDND");});$(".sapzenfilterpanel-bottomHighlightDND").each(function(bJ,bK){sap.ui.getCore().byId(bK.id).removeStyleClass("sapzenfilterpanel-bottomHighlightDND");});var bI=$(".sapzenfilterpanel-catHighlightDND");if(bI.length>0){bI.each(function(bJ,bK){sap.ui.getCore().byId(bK.id).removeStyleClass("sapzenfilterpanel-catHighlightDND");});}}function bl(bI){bv();}aP.getParent().zenDragStart=true;aP.zenDragObject=true;$(document).mouseup(bz);$(document).mousemove(bD);$(document).keydown(bl);if(bB){if(bB.preventDefault){bB.preventDefault();}if(bB.stopPropagation){bB.stopPropagation();}if(bB.cancelBubble){bB.cancelBubble=true;}}});}if(am){aT=aR.getProperty("/dialog");if(aT&&aT.name===aX){aP.addStyleClass("sapzenfilterpanel-RowActive");}else{aP.removeStyleClass("sapzenfilterpanel-RowActive");}}if(aQ.axis){var bd=[];var bi=function(bk){switch(bk){case"":return"ROWS";case"ROWS":return"COLUMNS";case"COLUMNS":return"FREE";}return bk;};var a1=function(bk,bq,bl){var bn=bq.length;if(bn>0){var bp=bk?bl.getBottom():bl.getTop();var bo=bk?"Bottom":"Top";bp.setSize("").setOverflowX("hidden").setOverflowY("hidden").addStyleClass("sapzenfilterpanel-AxisHeader"+bo).addStyleClass("sapzenfilterpanel-HeaderCount"+bo+bn);bl.addStyleClass("sapzenfilterpanel-RowRepeaterRowWithHeader"+bo+bn);for(var bm=0;bm<bq.length;bm++){bp.addStyleClass("sapzenfilterpanel-AxisHeader"+bq[bm]);}}};var a5=function(bl,bn){var bk=aR.getProperty("/text/"+bl);if(o&&bl==="FREE"){var bm=0;$(aR.getProperty("/characteristics")).each(function(bo){if(aR.getProperty("/characteristics")[bo].characteristic.axis==="FREE"){bm++;}});if(bm===bn){return"Unallocated ("+bn+")";}else{return"Unallocated ("+bn+" of "+bm+")";}}return bk?bk:bl;};while(E&&aQ.axis!==r){r=bi(r);var bc=new sap.ui.commons.TextView({text:a5(r,aW-H+1)}).addStyleClass("sapzenfilterpanel-AxisHeaderText"+r);aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,bc);if(o&&r!=="FREE"){var a7=new sap.ui.commons.TextView().addStyleClass("sapzenfilterpanel-"+r+"HeaderImage");aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,a7);}if(bd.length>0){bc.addStyleClass("sapzenfilterpanel-HeaderBorder");}bd.push(r);if(r==="FREE"){break;}else{if(r==="ROWS"){aP.getTop().addStyleClass("sapzenfilterpanel-AxisHeaderFirst");}}}a1(false,bd,aP);bf=new sap.ui.commons.ToggleButton({lite:o}).addStyleClass("sapzenfilterpanel-RowsNavigationButton").bindProperty("pressed",{path:a9+"/characteristic/axis",mode:sap.ui.model.BindingMode.OneWay,formatter:function(bk){return bk==="ROWS";}});bb=new sap.ui.commons.ToggleButton({lite:o}).addStyleClass("sapzenfilterpanel-ColumnsNavigationButton").bindProperty("pressed",{path:a9+"/characteristic/axis",mode:sap.ui.model.BindingMode.OneWay,formatter:function(bk){return bk==="COLUMNS";}});var a6=T(bf,bb,a9,"ROWS",aP);var bg=T(bb,bf,a9,"COLUMNS",aP);bf.attachPress(a6);bb.attachPress(bg);aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,bf);aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,bb);aP.getBegin().setOverflowX("hidden").setOverflowY("hidden");bd=[];while(E&&H===aW&&r!=="FREE"){r=bi(r);var bc=new sap.ui.commons.TextView({text:a5(r,0)}).addStyleClass("sapzenfilterpanel-AxisHeaderText"+r);aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,bc);if(o&&r!=="FREE"){var a7=new sap.ui.commons.TextView().addStyleClass("sapzenfilterpanel-"+r+"HeaderImage");aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,a7);}if(bd.length>0){bc.addStyleClass("sapzenfilterpanel-HeaderBorder");}bd.push(r);if(r==="FREE"){aP.getBottom().addStyleClass("sapzenfilterpanel-AxisHeaderBottom");break;}}a1(true,bd,aP);}if(am){aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,null);aP.getBegin().setOverflowX("hidden").setOverflowY("hidden").setSize("16px");}a2=new sap.ui.commons.TextView().addStyleClass("sapzenfilterpanel-HeaderText").bindProperty("text",{path:a9+"/characteristic",formatter:function(bk){return(bk.mandatory?"* ":"")+bk.text;}});aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,a2);if(E&&!ae){aP.attachBrowserEvent("click",function(bo){if(au.getProperty("/axisfilterselected")===aQ.name||aQ.axis==="FREE"){return;}var bm=aM.getRows(),bn,bk=bm.length;au.setProperty("/axisfilterselected",aQ.name);for(bn=0;bn<bk;bn++){var bl=bm[bn];bl.destroyContent(sap.ui.commons.layout.BorderLayoutAreaTypes.end);bl.removeStyleClass("sapzenfilterpanel-MarkedRow");}aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.end,aq());aP.addStyleClass("sapzenfilterpanel-MarkedRow");});}if((v||av)&&!E&&!am&&!aS){a4=new sap.ui.commons.TextView();aZ=function(bk){return function(bo){var bn,bl,bm=bo&&bo[bk]?R(bk)(bo):"";if(aQ.type==="PASSWORD"&&bm){sOldText=bm;bm="";for(bn=0,bl=sOldText.length;bn<bl;bn++){bm+="x";}}return bm?bm:"-";};};if(ap==="FILTERCOUNT"){a2.addStyleClass("sapzenfilterpanel-HeaderTextWidthFiltercount");a4.addStyleClass("sapzenfilterpanel-SelectionMemberTextWidthFiltercount");a4.bindProperty("tooltip",{path:"/filters",formatter:aZ(aX)});aZ=function(bk){return function(bm){var bl=bm&&bm[bk]?S(bk)(bm):"";return bl?"("+bl+")":"";};};}else{a2.addStyleClass("sapzenfilterpanel-HeaderTextWidthFiltertext");a4.addStyleClass("sapzenfilterpanel-SelectionMemberTextWidthFiltertext");}a4.bindProperty("text",{path:"/filters",formatter:aZ(aX)});a4.addStyleClass("sapzenfilterpanel-SelectionMemberText");aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,a4);if(aV){a3=function(){if(aQ.incorrectvalue){var bl=aR.getProperty("/filters");if(bl){var bk=bl[aX];if(bk){bk.members=[];bk.ranges=[];}}}new Function(n.prepareCommand(P.getModel().getProperty("/command/showfilterdialog"),"__STRING__",aX))();};var a8=new sap.ui.commons.Image({src:sap.zen.createStaticMimeUrl("zen.rt.components/resources/img/transparent.png")}).addStyleClass("sapzenfilterpanel-RightArrowImage");aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,a8);if(ah){a4.attachBrowserEvent("click",a3);a8.attachBrowserEvent("click",a3);}else{aP.attachBrowserEvent("click",a3);}}}if(ah&&(v||av)&&!E&&!am&&!aS&&aG!=="NONE"&&!(aQ.measureStructure&&aG==="NO_MEASURES")){if(aQ.type==="PASSWORD"){aU=new sap.ui.commons.PasswordField({value:{path:"/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:function(bk){return bk&&bk[aX]?bk[aX].input:"";}}});}else{aU=new sap.ui.commons.TextField({value:{path:"/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:function(bk){return bk&&bk[aX]?bk[aX].input:"";}}});}aU.addStyleClass("sapzenfilterpanel-TextVariableField");aU.bindProperty("tooltip",{path:a9+"/characteristic",formatter:function(bk){return bk.text;}});if(aV){if(a2.hasStyleClass("sapzenfilterpanel-HeaderTextWidthFiltercount")){aU.addStyleClass("sapzenfilterpanel-TextFieldWidthFiltercount");}else{if(a2.hasStyleClass("sapzenfilterpanel-HeaderTextWidthFiltertext")){aU.addStyleClass("sapzenfilterpanel-TextFieldWidthFiltertext");}}}else{aU.setWidth("100%");}bj=new sap.ui.commons.Button({text:"{/text/ok}"});aY=new sap.ui.commons.layout.HorizontalLayout({content:[aU,bj]}).addStyleClass("sapzenfilterpanel-TextVariableFieldContainer");aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,aY);bh=function(){var bm,bo,bp,bl,bk,bn,bq;bm=aY.$();bo=aP.$();bp=bo.outerHeight();bl=function(){var br=aU.$();br.width(bm.outerWidth()-$(bm.find(".sapUiHLayoutChildWrapper")[1]).outerWidth()-10);if(!br.is(":focus")){br.focus();}};bk=undefined;bn=undefined;aU.detachBrowserEvent("focus",bh);aU.removeStyleClass("sapzenfilterpanel-TextVariableField");bo.animate({height:"+="+bp},400,"swing",function(){var bw=$($("#"+q+" .sapzenfilterpanel-RowRepeater").children()[0]);var bt=bw.scrollTop();var bu=bo;if(bu&&bu.position()){var bs=bu.position().top;var bv=bu.position().top+bu.height();var br=bt+bw.height();if(bv>br){bt=bt+(bv-br);}else{if(bt>bs){bt=bs;}}}bw.scrollTop(bt);});bk=function(){var bu,bs,br,bt;bu=aU.getLiveValue();bt=aR.getProperty("/filters");if(bt&&bt[aX]){bs=bt[aX].input;}bj.detachPress(bk);aU.detachBrowserEvent("keyup",bn);bo.animate({height:bp});if(bu!==bs){br=bt[aX];br.dirty=true;ak();br.exclude=false;br.input=bu;br.members=[];br.ranges=[];}if(aR.getProperty("/property/autoapply")||av||G){N(aR.getProperty("/property/autoapply"));}setTimeout(function(){P.ZEN_initFunction();aU.addStyleClass("sapzenfilterpanel-TextVariableField");aU.attachBrowserEvent("focus",bh);},500);};bq=function(){var bt,br,bs=aR.getProperty("/filters");bt=aU.getLiveValue();br=bs[aX];if(br&&bt!==br.input){br.dirty=true;ak();br.exclude=false;br.input=bt;br.members=[];br.ranges=[];aR.setProperty("/filters/"+aX,br);}};bn=function(bs){var br=bs.which;if(br===10||br===13){bk();}};bl();bj.attachPress(bk);aU.attachBrowserEvent("blur",bq);aU.attachBrowserEvent("keyup",bn);};aU.attachBrowserEvent("focus",bh);if(sap.ui.Device.support.touch){aU.attachBrowserEvent("touchmove",function(bk){bk.preventDefault();});}}if(am){aP.attachBrowserEvent("click",function(){if(aQ.incorrectvalue){var bl=aR.getProperty("/filters");if(bl){var bk=bl[aX];if(bk){bk.members=[];bk.ranges=[];}}}N();new Function(n.prepareCommand(P.getModel().getProperty("/command/showfilterdialog"),"__STRING__",aX))();});}var a0=P.getModel().getProperty("/filters");if(a0&&a0[aX]&&a0[aX].dirty){aP.addStyleClass("sapzenfilterpanel-DirtyState");}else{aP.removeStyleClass("sapzenfilterpanel-DirtyState");}if(P.getModel().getProperty(a9+"/characteristic/axisdirty")){aP.addStyleClass("sapzenfilterpanel-NavigationDirtyState");}else{aP.removeStyleClass("sapzenfilterpanel-NavigationDirtyState");}if(aQ.incorrectvalue){aP.addStyleClass("sapzenfilterpanel-IncorrectValue");}else{aP.removeStyleClass("sapzenfilterpanel-IncorrectValue");}if(!ae){var ba=au.getProperty("/axisfilterselected");if(ba&&aQ.name===ba&&r!==""){aP.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.end,aq());aP.addStyleClass("sapzenfilterpanel-MarkedRow");}}if(H===aW){H=0;r="";}if(P.ZEN_IdToDimensionMap){P.ZEN_IdToDimensionMap[aP.getId()]=aX;}return aP;};aM.bindAggregation("rows",{path:"/characteristics",factory:al});K.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,aM);K.attachBrowserEvent("touchmove",function(aR){var aP,aQ;if(K.getCenter().$().find("#"+aR.target.id).length>0||aR.target.id===K.getCenter().getId()){aP=K.getCenter().$();aQ=(aM.$().height()-aP.outerHeight())-1;if(aQ<5||!$(aR.target).parents("#"+aP.attr("id")).length){return false;}if(aP.scrollTop()<1){aP.scrollTop(0);}if(aP.scrollTop()>=aQ){aP.scrollTop(aQ);}aR.stopPropagation();}});P.ZEN_initFunction=function(){var aP;if(P.getPages){aP=P.getPages()[0];}if(E){aM.triggerSort(q+"_Sorter_text");aM.triggerSort(q+"_Sorter_nav");}aM.getBinding("rows")._fireChange();if(aP){aP.invalidate();}};if(ah&&!av&&!am&&!o){Q=new sap.ui.commons.layout.VerticalLayout({width:"100%"}).addStyleClass("sapzenfilterpanel-PopupContainerFooter");Y.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,Q);}if(ah&&!av&&v&&!o){aw=new sap.ui.commons.Button({width:"100%",text:"{/text/clearfilter}",press:function(){var aV,aU,aR,aP,aT,aS,aQ;aV=P.getModel();aU=aV.getProperty("/characteristics");aQ=aV.getProperty("/filters");for(aR=0,aP=aU.length;aR<aP;aR++){aT=aU[aR].characteristic.name;aS=aQ[aT];aS.input="";if(aS.members&&aS.members.length>0){aS.dirty=true;ak();aS.members=[];}if(aS.ranges&&aS.ranges.length>0){aS.dirty=true;ak();aS.ranges=[];}if(aS.notsupported){aS.dirty=true;ak();aS.notsupported=false;}}aV.setProperty("/filters",aQ);P.ZEN_initFunction();}}).addStyleClass("sapzenfilterpanel-BtnClear");Q.addContent(aw);}if(ah&&ay){var w=function(aP){E=aP;if(Q){Q.removeAllContent();if(aw){Q.addContent(aw);}}};aM.addFilter(new sap.ui.commons.RowRepeaterFilter(q+"_Filter_all"));aM.addFilter(new sap.ui.commons.RowRepeaterFilter(q+"_Filter_no_axis",{filters:[new sap.ui.model.Filter("characteristic/axis","NE",null)]}));var aL=function(aR,aT,aQ){for(var aS=0,aP=aQ.length;aS<aP;aS++){if(aQ[aS].entry.name.toLocaleUpperCase()===aR){return -1;}if(aQ[aS].entry.name.toLocaleUpperCase()===aT){return 1;}}return 0;};var aE=new sap.ui.model.Sorter("characteristic/name");aE.fnCompare=function(aQ,aP){var aR=aL(aQ,aP,au.getProperty("/axis/rows"));if(aR!==0){return aR;}aR=aL(aQ,aP,au.getProperty("/axis/columns"));if(aR!==0){return aR;}return o?0:aL(aQ,aP,aK);};aM.addSorter(new sap.ui.commons.RowRepeaterSorter(q+"_Sorter_nav",{sorter:aE}));if(o){aM.addSorter(new sap.ui.commons.RowRepeaterSorter(q+"_Sorter_text",{sorter:new sap.ui.model.Sorter("characteristic/text")}));}var aK=[];var at=au.getProperty("/characteristics");if(at){for(var Z=0;Z<at.length;Z++){aK[Z]={};aK[Z].entry={};aK[Z].entry.name=at[Z].characteristic.name;}}var ax=new sap.ui.model.Sorter("characteristic/name");ax.fnCompare=function(aQ,aP){return aL(aQ,aP,aK);};aM.addSorter(new sap.ui.commons.RowRepeaterSorter(q+"_Sorter_all",{sorter:ax}));if(o){}else{var U=new sap.ui.commons.Button({press:function(){au.setProperty("/axisfilterselected",undefined);Y.addStyleClass("sapzenfilterpanel-NavigationAxisFilterAll");Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterRows");Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterColumns");w(false);aM.applyFilter(q+"_Filter_all");aM.triggerSort(q+"_Sorter_all");}}).addStyleClass("sapzenfilterpanel-ShowAllButton");var ad=new sap.ui.commons.SegmentedButton({buttons:[U,new sap.ui.commons.Button({press:function(){Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterAll");Y.addStyleClass("sapzenfilterpanel-NavigationAxisFilterRows");Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterColumns");w(true);aM.applyFilter(q+"_Filter_no_axis");aM.triggerSort(q+"_Sorter_text");aM.triggerSort(q+"_Sorter_nav");}}).addStyleClass("sapzenfilterpanel-ShowNavigationButton")]}).addStyleClass("sapzenfilterpanel-MainSegmentedButton");ad.setSelectedButton(U);u.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,ad);u.getCenter().setOverflowX("hidden").setOverflowY("hidden");}}}}var aF=P.onAfterRendering;P._isContainerVisible=true;P.onAfterRendering=function(){aF.apply(P);if(!ai.visible&&!P._isContainerVisible){$("#"+P.getId()).parent(".sapUiLayoutAbsPos").css("display","none");}};if(am){P.ZEN_main=K;P.addFirstPaneContent(K);}else{P.ZEN_main=Y;var aD=new m();if(W&&!ah&&!aa){Y.addStyleClass("sapzenfilterpanel-HasLabelOnTop");aA=new sap.ui.commons.TextView().addStyleClass("sapzenfilterpanel-LabelOnTop");var aI=function(aP){return function(aR){var aS=S(aP)(aR),aQ=au.getProperty("/characteristics/0/characteristic/text");return aQ+" ("+(aS===""?"0":aS)+")";};};aA.bindProperty("text",{path:"/filters",formatter:aI(z)});aD.addContent(aA);}aD.addContent(Y);P.insertPage(aD,0);}if(!this.isDesignModeD4LIncluded(ai.id)){M=[];if(!am){an=new sap.ui.commons.layout.BorderLayout();an.addStyleClass("sapzenfilterpanel-PopupContainerDialog");}if(!ah){P.ZEN_popup=new sap.ui.core.Popup(an,au.getProperty("/property/modalpopup"),!ah,false);P.ZEN_popup._opened=function(){if(this.eOpenState!==sap.ui.core.OpenState.OPENING){return;}this.bOpen=true;var aX=this._$(false,true);if(aX[0]&&aX[0].style){aX[0].style.display="block";}this.eOpenState=sap.ui.core.OpenState.OPEN;var aS=P.ZEN_popup.getContent();if(aS){var aW=aS.$();if(aW){var aT=aW.position().top;var aP=aW.height();var aR=$(window).height();if(aT>0&&aT+aP>aR){aT=aR-aP;aW.css("top",aT+"px");}if(aT<0){aW.css("top","0px");}var aV=aW.position().left;var aQ=aW.width();var aU=$(window).width();if(aV>0&&aV+aQ>aU){aV=aU-aQ;aW.css("left",aV+"px");}if(aV<0){aW.css("left","0px");}}}};}V=new sap.ui.commons.TabStrip();V.addStyleClass("sapzenfilterpanel-Tabstrip");V.setHeight("100%");I=function(aP){return function(){var aR,aV,aT,aZ,aW,aU,aX,aS,aY,aQ;aR=P.getModel();aZ=[{}];aQ=false;if(!aP){aP=aR.getProperty("/property/autoapply");}if(V.getSelectedIndex()===1&&P.ZEN_addRangeToList){P.ZEN_addRangeToList();}else{if(V.getSelectedIndex()===0){}}if(av){N(aP,true,aP);}else{if(aP||G){aV=aR.getProperty("/dialog/filters");if(aP){aT=aR.getProperty("/command/submitfilter");}else{aT=aR.getProperty("/command/submitonlyfilter");}if((aV&&aV.dirty)||aC){aV.dirty=!aP;ak();aV.notsupported=false;aZ[0].name=aR.getProperty("/dialog/name");aZ[0].exclude=aV.exclude;aZ[0].keys=[];for(aU=0,aX=aV.members.length;aU<aX;aU++){aZ[0].keys[aU]=aV.members[aU].key;}aZ[0].ranges=[];for(aU=0,aX=aV.ranges.length;aU<aX;aU++){aS=aV.ranges[aU];aZ[0].ranges[aU]={from:(aS.from?aS.from.key:""),to:(aS.to?aS.to.key:"")};}if(av){sap.zen.MessageViewHandler.clearMessages();}aY={filters:aZ};aW=n.prepareCommand(aT,"__STRING__",JSON.stringify(aY));aW=n.prepareCommand(aW,"__BOOLEAN__",aP?"X":" ");new Function(aW)();aQ=true;}else{if(aR.getProperty("/command/containsonsubmit")){if(av){sap.zen.MessageViewHandler.clearMessages();}aY={filters:aZ};aW=n.prepareCommand(aT,"__STRING__",JSON.stringify(aY));aW=n.prepareCommand(aW,"__BOOLEAN__",aP?"X":" ");new Function(aW)();aQ=true;}}}}if(ah&&!am){P.setSelectedIndex(0,false,2);}else{if(!am){P.ZEN_popup.close();}}if(!aP){P.ZEN_initFunction();}P.zenCleanup();if(!aC||(aC&&!aQ)){new Function(n.prepareCommand(aR.getProperty("/command/destroyfilterdialog"),"__BOOLEAN__",aC&&!aP?"X":" "))();}};};if(!am){B=new sap.ui.commons.layout.BorderLayout();B.addStyleClass("sapzenfilterpanel-PopupContainerHeader");J=new sap.ui.commons.Button({text:"{/text/back}",press:I(false),visible:!am}).addStyleClass("sapzenfilterpanel-BtnFilter");if(!aH){B.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.begin,J);}B.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,new sap.ui.commons.TextView({text:"{/dialog/title}"}).addStyleClass("sapzenfilterpanel-PopupTitle"));B.getCenter().setOverflowX("hidden").setOverflowY("hidden");ao=new sap.ui.commons.Button({text:"{/text/submit}",press:I(true),visible:!t&&!am}).addStyleClass("sapzenfilterpanel-BtnSubmit");if(!aH){B.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.end,ao);}an.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,B);}if(aH){L=a(P,n,ak,am,C,J,ao);aB=a(P,n,ak,am,C,J,ao,true);ab=e(P,n,ak,am,C,J,ao);}else{L=a(P,n,ak,am,C);aB=a(P,n,ak,am,C,null,null,true);ab=e(P,n,ak,am,C);}aO=new sap.ui.commons.Tab({title:new sap.ui.commons.Title({text:"{/text/selection}"}),visible:"{/dialog/selection/visible}"});aO.addContent(L);M.selection=L.ZEN_initFunction;V.addTab(aO);af=new sap.ui.commons.Tab({title:new sap.ui.commons.Title({text:"{/text/range}"}),visible:"{/dialog/range/visible}"});af.addContent(ab);M.range=ab.ZEN_initFunction;V.addTab(af);if(am){X=f(P);x=new sap.ui.commons.Tab({title:new sap.ui.commons.Title({text:"{/text/input}"}),visible:"{/dialog/input/visible}"});x.addContent(X);M.input=X.ZEN_initFunction;V.addTab(x);}V.attachSelect(function(aP){if(P.ZEN_fitRangeTable&&aP.getParameters().index===1){P.ZEN_fitRangeTable();}});if(!an){an=V;}else{an.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,V);if(aj&&aj.height==="auto"){an.getArea(sap.ui.commons.layout.BorderLayoutAreaTypes.center).setOverflowY("hidden");}}an.setModel(P.getModel());an.ZEN_initFunction=function(){var aS,aP,aR;aS=P.getModel();aO.removeAllContent();if(aS.getProperty("/dialog/hierarchical")){aO.addContent(aB);M.selection=aB.ZEN_initFunction;}else{aO.addContent(L);M.selection=L.ZEN_initFunction;}V.invalidate();aP=0;aR=undefined;for(aR in M){if(aS.getProperty("/dialog/"+aR+"/visible")){try{M[aR]();}catch(aQ){$.sap.log.warning(aQ);}aP++;}}if(aP===1){V.addStyleClass("sapzenfilterpanel-NoTabstrip");V.removeStyleClass("sapzenfilterpanel-Tabstrip");}else{V.addStyleClass("sapzenfilterpanel-Tabstrip");V.removeStyleClass("sapzenfilterpanel-NoTabstrip");}};P.ZEN_dialog=an;if(!ah){an.setParent(P);}if(ai.visible){P.removeStyleClass("zenHideFilterPanel");}else{P.addStyleClass("zenHideFilterPanel");}}if(am){P.addSecondPaneContent(P.ZEN_dialog);}else{if(!ah){P.setSelectedIndex(0,false,1);}else{if(!this.isDesignModeD4LIncluded(ai.id)){P.insertPage(new m().addContent(P.ZEN_dialog),1);}P.setSelectedIndex(0,false,2);}}if(am){at=au.getProperty("/characteristics");if(at&&at.length>0){z=at[0].characteristic.name;if(z){var aF=P.onAfterRendering;P.onAfterRendering=function(){aF.apply(P);new Function(n.prepareCommand(P.getModel().getProperty("/command/showfilterdialog"),"__STRING__",z))();P.onAfterRendering=aF;};}}}else{if(ay&&o){Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterAll");Y.addStyleClass("sapzenfilterpanel-NavigationAxisFilterRows");Y.removeStyleClass("sapzenfilterpanel-NavigationAxisFilterColumns");w(true);aM.applyFilter(q+"_Filter_no_axis");aM.triggerSort(q+"_Sorter_text");aM.triggerSort(q+"_Sorter_nav");}}if(av&&P.switchToPage){var y=aM.onAfterRendering;aM.onAfterRendering=function(){y.apply(P);if(P.onPageChangedRenderingCompleted&&P.visiblePageIndex===0){var aP=$("#"+P.getIdForInnerContainerDiv(P.getId())+" > div")[P.visiblePageIndex];P.onPageChangedRenderingCompleted(aP);}};var s=P.switchToPage;P.switchToPage=function(){s.apply(P,arguments);if(P.onPageChangedRenderingCompleted&&P.visiblePageIndex>0){var aP=$("#"+P.getIdForInnerContainerDiv(P.getId())+" > div")[P.visiblePageIndex];P.onPageChangedRenderingCompleted(aP);}};}return P;};this.update=function(P,p,r){var q,G,I,v,A,K,s,z,F,H,t,y,M,B,o,L,w;if(P&&p){P._isContainerVisible=p.visible;G=p.view;if(this.isDesignModeD4LIncluded(p.id)||p.newds){P=this.create(P,p,r);if(G!=="DIALOG"){return P;}}if(p.changeVisibility){if(p.visible){P.removeStyleClass("zenHideFilterPanel");P.ZEN_initFunction();}else{if(P.ZEN_popup&&P.ZEN_popup.isOpen()){$("#"+P.ZEN_popup.getContent().getId()).find(".sapzenfilterpanel-BtnFilter").click();}P.addStyleClass("zenHideFilterPanel");}if(G==="SUBMIT"){P.ZEN_submit();}else{if(G==="SUBMIT_WITH_APPLY"){P.ZEN_submit_with_apply();}else{if(G==="CANCEL"){P.ZEN_cancel();}}}return P;}if(!p.visible){setTimeout(function(){$("#"+P.getId()).parent(".sapUiLayoutAbsPos").css("display","none");},0);}q=P.getModel();I=p.dialog;w=q.getProperty("/property/showonescreen");v=p.filters;if(v){var C=false;var O=q.getProperty("/filters");A=undefined;for(A in v){K=O[A];s=v[A];if(K){C=true;if(p.filtercanceled||!K.dirty){O[A]=s;if(q.getProperty("/dialog/name")===A){q.setProperty("/dialog/filters",s);P.ZEN_dialog.ZEN_initFunction();}}}}q.setProperty("/filters",C?O:v);P.ZEN_initFunction();}var E=q.getProperty("/axis");var D=q.getProperty("/characteristics");var x=false;if(D){for(var J=0;J<D.length;J++){if(D[J].characteristic.axisdirty){x=true;break;}}}var u=x||(E&&(E.rows.dirty||E.columns.dirty));o=p.axis;if(o&&E&&(p.filtercanceled||!u)){if(p.filtercanceled){q.setProperty("/axis",o);}else{if(E.rows.dirty){q.setProperty("/axis/columns",o.columns);}else{if(E.columns.dirty){q.setProperty("/axis/rows",o.rows);}else{q.setProperty("/axis",o);}}}P.ZEN_initFunction();}q.setProperty("/view",G);if(G==="DEFAULT"){if(p.filtercanceled||!u){q.setProperty("/characteristics",p.characteristics);}if(window.zenReplayMode){if(q.getProperty("/property/showembedded")&&!w){P.setSelectedIndex(0,false,2);}else{if(!w){P.ZEN_popup.close();}}}}else{if(G==="DIALOG_SEARCH"){q.setProperty("/dialog/selection",I.selection);z=q.getProperty("/dialog/range/from");F=q.getProperty("/dialog/range/to");H=q.getProperty("/dialog/range/mode");q.setProperty("/dialog/range",I.range);q.setProperty("/dialog/range/from",z);q.setProperty("/dialog/range/to",F);q.setProperty("/dialog/range/mode",H);q.setProperty("/dialog/members",I.members);if(P.ZEN_table&&q.getProperty("/dialog/hierarchical")){P.ZEN_tableH.bindRows("/dialog/members");}else{P.ZEN_table.getBinding().refresh(true);}P.ZEN_dialog.ZEN_initFunction();}else{if(G==="DIALOG"){t="100%";y="100%";M=q.getProperty("/property/showembedded");if(!M){t=q.getProperty("/property/popupwidth")+"px";y=q.getProperty("/property/popupheight")+"px";}if(P.ZEN_dialog.getWidth()!==t){P.ZEN_dialog.setWidth(t);}if(P.ZEN_dialog.getHeight()!==y){P.ZEN_dialog.setHeight(y);}try{q.setProperty("/dialog",I);if(p.characteristics){q.setProperty("/characteristics",p.characteristics);}}catch(N){$.sap.log.warning(N);}q.setProperty("/dialog/filters",q.getProperty("/filters")[I.name]);if(P.ZEN_table&&!q.getProperty("/dialog/hierarchical")){P.ZEN_table.bindRows("/dialog/members");}if(P.ZEN_tableH&&q.getProperty("/dialog/hierarchical")){P.ZEN_tableH.bindRows("/dialog/members");}P.ZEN_dialog.ZEN_initFunction();if(M&&!w){P.setSelectedIndex(1,false,2);}else{if(P.ZEN_popup){B=this.getDockingHandler(q.getProperty("/property/popupposition")||"DEFAULT");L=q.getProperty("/property/popupreference")?$("#"+q.getProperty("/property/popupreference"))[0]:P.getDomRef();P.ZEN_popup.open(-1,B.my,B.at,L,B.offset,B.collision);}}if(w){P.ZEN_initFunction();}setTimeout(function(){if(P.ZEN_fitTable){for(var R=0,Q=P.ZEN_fitTable.length;R<Q;R++){P.ZEN_fitTable[R]();}}},1000);}else{if(G==="SUBMIT"){P.ZEN_submit();}else{if(G==="SUBMIT_WITH_APPLY"){P.ZEN_submit_with_apply();}else{if(G==="CANCEL"){P.ZEN_cancel();}else{if(G==="EXPAND_NODE"){p.member.selected=q.getProperty(p.path).selected;b.checkSelectedChildMembers(p.member,q.getProperty("/dialog/filters"));q.setProperty(p.path,p.member);}}}}}}}if(p.autoapply){if(!P.getModel().getProperty("/property/autoapply")){P.ZEN_submit_with_apply();}}P.getModel().setProperty("/property/autoapply",p.autoapply?true:false);if(!this.isDesignModeD4LIncluded(p.id)){P.ZEN_changeSubmitButton();}}return P;};this.getColumnPosition=function(q,p){var o;if(p){o=p.indexOf(q);if(o>0){return 1;}return o;}else{if(q==="KEY"){return 1;}}return 0;};this.getType=function(){return["filterpanel","filter"];};this.getDecorator=function(){return"DataSourceControlDecorator";};};var k=new g();return k;});define("zen.rt.components.filterpanel/resources/js/helperfunctions",[],function(){var a={};a.checkSelectedMembers=function(c,d){var b,k,f,g,l,h;if(c){b=c.length;for(k=0;k<b;k++){c[k].selected=false;}if(d&&d.members){for(f=0,g=d.members.length;f<g;f++){l=d.members[f];for(var e=0;e<b;e++){h=c[e];if(l.key===h.key){h.selected=true;break;}}}}}return c;};a.checkSelectedChildMembers=function(g,b){var e,h,k,d,f,l,c;if(g){e=-1;g.searchstring=g.text+" "+g.displaykey;for(h=0;h===e+1;h++){k=g[""+h];if(k){k.selected=false;k.searchstring=k.text+" "+k.displaykey;e=h;}}if(b&&b.members&&e>-1){for(d=0,f=b.members.length;d<f;d++){l=b.members[d];if(g.key===l.key){g.selected=true;}for(c=0;c<=e;c++){k=g[""+c];if(k&&(g.selected||l.key===k.key)){k.selected=true;}}}}}return g;};return a;});define("zen.rt.components.filterpanel/resources/js/selection",["./helperfunctions"],function(a){var b=function(i,L,C,Q,f,o,V,q){var j,E,A,U,I,y,l,t,d,z,M,F,B,e,m,H,g,G,n,W,p,T,O,w,N,P,S,x,s,h,r,J,c,v,R;j=i.getModel();J=j.getProperty("/property/desktopstyle");if(Q){h=new sap.ui.commons.Splitter({splitterPosition:"62%",splitterOrientation:sap.ui.commons.Orientation.horizontal});h.addStyleClass("sapzenfilterpanel-OnePageDialog");r=new sap.ui.commons.layout.BorderLayout();if(!f){r.addStyleClass("sapzenfilterpanel-SelectionContainer2");}}E=new sap.ui.commons.layout.BorderLayout();E.addStyleClass("sapzenfilterpanel-SelectionContainer");if(q){A=new sap.ui.table.TreeTable({selectionMode:sap.ui.table.SelectionMode.None,editable:true,visibleRowCount:100,visible:Q?true:false,enableColumnReordering:false,columnHeaderHeight:23,minAutoRowCount:2,columnResize:function(){if(s){setTimeout(s,200);}}});}else{A=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.None,editable:true,visibleRowCount:100,visible:Q?true:false,enableColumnReordering:false,columnHeaderHeight:23,minAutoRowCount:2,columnResize:function(){if(s){setTimeout(s,200);}}});}var D=A._onColumnSelect;A._onColumnSelect=function(Z,X,aa,Y){D.call(A,Z,X,false,Y);};U=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.None,visibleRowCount:100,visible:Q?true:false,enableColumnReordering:false,minAutoRowCount:2,columnResize:function(){if(s){setTimeout(s,200);}}});U.addEventDelegate({onAfterRendering:function(){if(s){s();}}});U._onColumnSelect=function(Z,X,aa,Y){D.call(U,Z,X,false,Y);};if(Q){A.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);U.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);}if(!J){I=new sap.ui.commons.TextView().addStyleClass("sapzenfilterpanel-SelectionTitle");if(Q){I.bindProperty("text",{path:"/dialog/filters/members/length",formatter:function(X){if(j.getProperty("/dialog/filters/exclude")){return X===1?j.getProperty("/text/excludedmember"):j.getProperty("/text/excludedmembers").replace("{0}",""+X);}return X===1?j.getProperty("/text/includedmember"):j.getProperty("/text/includedmembers").replace("{0}",""+X);},mode:sap.ui.model.BindingMode.OneWay});}else{I.bindProperty("text",j.getProperty("/dialog/singleonly")?{path:"/text/selectsinglemember"}:{path:"/text/selectmembers"});E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,I);}}y=j.getProperty("/text/search");l=new sap.ui.commons.TextField({width:"100%",value:y}).addStyleClass("sapzenfilterpanel-SearchField").addStyleClass("sapzenfilterpanel-SearchFieldInactive");l.attachBrowserEvent("focus",function(){if(this.hasStyleClass("sapzenfilterpanel-SearchFieldInactive")){this.removeStyleClass("sapzenfilterpanel-SearchFieldInactive");this.setValue("");}});l.attachBrowserEvent("blur",function(){if(this.getLiveValue()===""){this.addStyleClass("sapzenfilterpanel-SearchFieldInactive");this.setValue(y);}});t=new sap.ui.commons.layout.HorizontalLayout({content:[l]}).addStyleClass("sapzenfilterpanel-LiveSearchField");d=new sap.ui.commons.SearchField({width:"100%",visible:false,enableListSuggest:false,showListExpander:false,enableFilterMode:true,search:function(Y){var X=Y.getParameters().query;i.ZEN_BackendSearchField_range.setValue(X);new Function(L.prepareCommand(j.getProperty("/command/membersearch"),"__STRING__",X))();}}).addStyleClass("sapzenfilterpanel-SearchField");if(!i.ZEN_BackendSearchField_selection){i.ZEN_BackendSearchField_selection=[];}i.ZEN_BackendSearchField_selection.push(d);l.attachLiveChange(function(ac){var aa,Z,Y,X,ad,ab;aa=ac.getParameters().liveValue?ac.getParameters().liveValue.toUpperCase():"";Z=["\\\\","\\^","\\$","\\+","\\.","\\(","\\)","\\[","\\]","\\{","\\}"];for(Y=0,X=Z.length;Y<X;Y++){ad=Z[Y];aa=aa.replace(new RegExp(ad,"g"),ad);}aa=aa.replace(/\?/g,".").replace(/\*/g,".*?");ab=new sap.ui.model.Filter("searchstring","Wildcard",aa);ab.fnTest=function(ae){return ae.search(new RegExp(aa))!=-1;};if(!j.getProperty("/dialog/selection/maxelements")&&!j.getProperty("/dialog/hierarchical")){A.getBinding("rows").filter([ab]);}if(!Q){U.getBinding("rows").filter([ab]);}});if(Q){E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,d);E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,t);}else{E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,d);E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,t);}z=new sap.ui.commons.TextView({text:"{/dialog/selection/nomembers}"});z.addStyleClass("sapzenfilterpanel-NoNotifications");A.setNoData(z);M=new sap.ui.commons.TextView({text:"{/text/noincludedmembers}"});M.addStyleClass("sapzenfilterpanel-NoNotifications");U.setNoData(M);F=j.getProperty("/property/memberdisplay");B=L.getColumnPosition("TEXT",F);if(B>-1){A.insertColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/text}"}),template:new sap.ui.commons.TextView().bindProperty("text","text").addStyleClass("sapzenfilterpanel-SelectionTableText"),sortProperty:"text",resizable:true}),B);U.insertColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/text}"}),template:new sap.ui.commons.TextView().bindProperty("text","text").addStyleClass("sapzenfilterpanel-SelectionTableText"),sortProperty:"text",resizable:true}),B);}e=L.getColumnPosition("KEY",F);if(e>-1){A.insertColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/key}"}),template:new sap.ui.commons.TextView().bindProperty("text","displaykey").addStyleClass("sapzenfilterpanel-SelectionTableKey"),sortProperty:"displaykey",resizable:true}),e);U.insertColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/key}"}),template:new sap.ui.commons.TextView().bindProperty("text","displaykey").addStyleClass("sapzenfilterpanel-SelectionTableKey"),sortProperty:"displaykey",resizable:true}),e);}m=function(Y,ab){var aa,X,Z;if(Y){Y.selected=ab;aa=-1;for(X=0;X===aa+1;X++){Z=Y[""+X];if(Z){Z.selected=ab;if(!j.getProperty("/dialog/singleonly")){g(Z,false);}aa=X;m(Z,ab);}}}return Y;};H=function(aa,Y,ac){var ab,X,Z;if(aa){ab=-1;for(X=0;X===ab+1;X++){Z=Y[""+X];if(Z){if(Z.key===aa){ac.push(Z);}ab=X;H(aa,Z,ac);}}}return ac;};g=function(ad,ae,ao){var aa,ag,Y,X,af,ah,ai,am,an,aj,ak,Z,ac,al,ap;j.setProperty("/dialog/filters/input",undefined);aa=j.getProperty("/dialog/filters");ag=aa.members;Y=function(at){for(var ar=0,aq=ag.length;ar<aq;ar++){if(ag[ar].key===at){return true;}}};if(!aa.dirty){aa.dirty=true;C();}if(ae){X=!Y(ad.key);if(X){if(j.getProperty("/dialog/singleonly")){ag.pop();af=j.getProperty("/dialog/members");if(af){am=0;ah=af[am];while(ah!==undefined){if(ah.key!=ad.key){af[am].selected=undefined;if(j.getProperty("/dialog/hierarchical")){m(af[am],false);}}ah=af[++am];}}}ag.push(ad);}if(j.getProperty("/dialog/hierarchical")){m(ad,true);ai=H(ad.key,j.getProperty("/dialog/members"),[]);for(am=0,an=ai.length;am<an;am++){if(!ai[am].selected){ai[am].selected=true;m(ai[am],true);}}}}else{aj=false;for(var am=0,an=ag.length;am<an;am++){if(ag[am].key===ad.key){ag.splice(am,1);aj=true;if(j.getProperty("/dialog/hierarchical")){m(ad,false);ai=H(ad.key,j.getProperty("/dialog/members"),[]);for(var am=0,an=ai.length;am<an;am++){if(ai[am].selected){ai[am].selected=false;m(ai[am],false);}}}break;}}if(!aj&&ao){m(ad,false);ak=ao.split("/");Z=ao;while(ak.length>3&&!Y(j.getProperty(Z+"/key"))){ak.pop();Z=ak.join("/");j.setProperty(Z+"/selected",false);if(j.getProperty("/dialog/singleonly")){m(j.getProperty(Z),false);}}for(am=0,an=ag.length;am<an;am++){if(ag[am].key===j.getProperty(Z+"/key")){ag.splice(am,1);break;}}if(!j.getProperty("/dialog/singleonly")){ak=ao.split("/");ac=Z;Z=ao;while(ak.length>3&&ac!==Z){ak.pop();Z=ak.join("/");al=-1;for(ap=0;ap===al+1;ap++){var ab=j.getProperty(Z+"/"+ap);if(ab){if(!ab.node&&ab.selected){ag.push(ab);}al=ap;}}}}}}j.setProperty("/dialog/filters",aa);if(Q){if(j.getProperty("/dialog/hierarchical")){j.setProperty("/dialog/members",a.checkSelectedChildMembers(j.getProperty("/dialog/members"),aa));}else{j.setProperty("/dialog/members",a.checkSelectedMembers(j.getProperty("/dialog/members"),aa));}}};G=new sap.ui.commons.CheckBox({checked:"{selected}",visible:{path:"notselectable",formatter:function(X){return !X;},mode:sap.ui.model.BindingMode.OneWay},change:function(Z){var X,Y;X=Z.oSource.getBindingContext();Y=X.sPath;g(X.oModel.getProperty(Y),Z.getParameters().checked,Y);}});n=new sap.ui.commons.Image({src:sap.zen.createStaticMimeUrl("zen.rt.components/resources/img/transparent.png"),alt:"{/text/check_all}",visible:{path:"/dialog/singleonly",formatter:function(X){return !X;},mode:sap.ui.model.BindingMode.OneWay}}).addStyleClass("sapzenfilterpanel-CheckAll");A.addColumn(new sap.ui.table.Column(A.getId()+"_checkboxCol",{label:n,template:G,sortProperty:"selected",width:"40px",resizable:true}));W=new sap.ui.commons.Image({src:sap.zen.createStaticMimeUrl("zen.rt.components/resources/img/transparent.png"),alt:"{/text/remove}"});W.addStyleClass("sapzenfilterpanel-RemoveImage");W.attachPress(function(Z){var X=Z.oSource.getBindingContext();var Y=X.oModel.getProperty(X.sPath);g(Y,false);});U.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:""}),template:W,width:"40px",resizable:true}));A.addColumn(new sap.ui.table.Column({visible:false,filterProperty:"searchstring"}));U.addColumn(new sap.ui.table.Column({visible:false,filterProperty:"searchstring"}));A.attachColumnSelect(function(ac){var X,ae,Y,aa,ad,af,Z,ab;ac.preventDefault();X=ac.getParameters().column;if(X.getId()===A.getId()+"_checkboxCol"){if(!j.getProperty("/dialog/singleonly")){ae=j.getProperty("/dialog/members");Y=A.getBinding("rows").getContexts(0,ae.length);if(j.getProperty("/dialog/allchecked")){if(j.getProperty("/dialog/hierarchical")){aa=-1;for(ad=0;ad===aa+1;ad++){af=ae[""+ad];if(af){g(af,false);aa=ad;}}}else{for(Z=0,ab=Y.length;Z<ab;Z++){g(j.getProperty(Y[Z].sPath),false);}}j.setProperty("/dialog/allchecked",false);}else{if(j.getProperty("/dialog/hierarchical")){aa=-1;for(ad=0;ad===aa+1;ad++){af=ae[""+ad];if(af){g(af,true);aa=ad;}}}else{for(Z=0,ab=Y.length;Z<ab;Z++){g(j.getProperty(Y[Z].sPath),true);}}j.setProperty("/dialog/allchecked",true);}if(j.getProperty("/dialog/hierarchical")){a.checkSelectedChildMembers(ae,j.getProperty("/dialog/filters"));}else{a.checkSelectedMembers(ae,j.getProperty("/dialog/filters"));}j.setProperty("/dialog/members",ae);}}else{if(!j.getProperty("/dialog/hierarchical")){if(X.getSorted()&&X.getSortOrder()===sap.ui.table.SortOrder.Ascending){A.sort(X,sap.ui.table.SortOrder.Descending);}else{A.sort(X);}}}});U.attachColumnSelect(function(Y){var X=Y.getParameters().column;Y.preventDefault();if(X.getSorted()&&X.getSortOrder()===sap.ui.table.SortOrder.Ascending){U.sort(X,sap.ui.table.SortOrder.Descending);}else{U.sort(X);}});if(A.attachToggleOpenState){A.attachToggleOpenState(function(aa){var Y,X,ab,Z;Y=aa.getParameters();X=Y.rowContext;ab=X.oModel;if(Y.expanded&&ab.getProperty(X.sPath+"/0/node")){Z=L.prepareCommand(ab.getProperty("/command/expandnode"),"__STRING__",ab.getProperty(X.sPath+"/key"));Z=L.prepareCommand(Z,"__STRING2__",X.sPath);new Function(Z)();}});}A.bindRows("/dialog/members");U.bindRows("/dialog/filters/members");if(q){i.ZEN_tableH=A;}else{i.ZEN_table=A;}i.ZEN_selectionTable=U;E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,A);if(Q){r.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,U);h.addSecondPaneContent(r);}else{E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,U);}E.getCenter().setOverflowX("hidden").setOverflowY("hidden");w=new sap.ui.commons.TextView({text:{path:"/text/exclude",formatter:function(X){return"≠ "+X;}}}).addStyleClass("sapzenfilterpanel-ExclusionText");N=new sap.ui.commons.CheckBox({checked:"{/dialog/filters/exclude}",change:function(){j.setProperty("/dialog/filters/dirty",true);C();j.setProperty("/dialog/filters/input",undefined);if(I){I.getBinding("text")._fireChange();}}}).addStyleClass("sapzenfilterpanel-ExclusionCheckBox");P=new sap.ui.commons.layout.HorizontalLayout({visible:Q,content:[w,N]}).addStyleClass("sapzenfilterpanel-ExclusionContainer");if(J){c=new sap.ui.commons.layout.HorizontalLayout({content:[V.clone(),o.clone()]});}if(Q&&I){P.addContent(I);}if(Q){r.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,P);if(f){v=new sap.zen.commons.layout.MatrixLayout({layoutFixed:true,columns:2,width:"99%",widths:["","40px"]}).addStyleClass("sapzenfilterpanel-FromToLayout");var u=new sap.ui.commons.Label({text:"{/text/key}"}).addStyleClass("sapzenfilterpanel-FromToText");v.createRow({height:"32px"},u);R=new sap.ui.commons.TextField({width:"100%"});var K=function(){var Y=R.getValue();var X={key:Y,displaykey:Y};g(X,true,null);R.setValue("");};var k=new sap.ui.commons.Image({src:sap.zen.createStaticMimeUrl("zen.rt.components/resources/img/transparent.png"),alt:"{/text/add}",press:K}).addStyleClass("sapzenfilterpanel-AddImage");R.attachBrowserEvent("keyup",function(Y){var X=Y.which;if(X===10||X===13){K();}});v.createRow({height:"32px"},R,k);r.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,v);U.setColumnHeaderVisible(false);}}else{T=function(X){return function(){if(j.getProperty("/dialog/hierarchical")){a.checkSelectedChildMembers(j.getProperty("/dialog/members"),j.getProperty("/dialog/filters"));}else{a.checkSelectedMembers(j.getProperty("/dialog/members"),j.getProperty("/dialog/filters"));}A.setVisible(true);U.setVisible(false);x.setVisible(false);S.setVisible(true);O.setVisible(false);p.setVisible(true);E.removeStyleClass("sapzenfilterpanel-SelectionContainer2");E.addStyleClass("sapzenfilterpanel-SelectionContainer");if(I){I.bindProperty("text",j.getProperty("/dialog/singleonly")?{path:"/text/selectsinglemember"}:{path:"/text/selectmembers"});}if(!j.getProperty("/dialog/nosearch")){if(j.getProperty("/dialog/selection/maxelements")||j.getProperty("/dialog/hierarchical")){d.setVisible(true);t.setVisible(false);}else{d.setVisible(false);t.setVisible(true);}}if(X&&s){setTimeout(s,200);}j.refresh();};};O=new sap.ui.commons.Button({width:"100%",text:"{/text/selectnewmembers}",press:T(true)}).addStyleClass("sapzenfilterpanel-BtnClear");x=new sap.ui.commons.layout.VerticalLayout({width:"100%",visible:false,content:[P]});if(J){E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,O.addStyleClass("sapzenfilterpanel-DesktopSelectMember"));x.addContent(c.addStyleClass("sapzenfilterpanel-DesktopSubmit2"));O.setVisible(false);}else{x.addContent(O);}p=new sap.ui.commons.Button({width:"100%",text:{path:"/dialog/filters/members/length",formatter:function(X){return j.getProperty("/text/showselectedmembers")+" ("+X+")";},mode:sap.ui.model.BindingMode.OneWay},press:function(){U.setVisible(true);A.setVisible(false);if(!j.getProperty("/dialog/nosearch")){t.setVisible(true);d.setVisible(false);}if(!j.getProperty("/dialog/exclusionallowed")){P.setVisible(false);x.removeStyleClass("sapzenfilterpanel-PopupContainerFooter");x.addStyleClass("sapzenfilterpanel-PopupContainerFooter2");}else{E.removeStyleClass("sapzenfilterpanel-SelectionContainer");E.addStyleClass("sapzenfilterpanel-SelectionContainer2");P.setVisible(true);x.removeStyleClass("sapzenfilterpanel-PopupContainerFooter2");x.addStyleClass("sapzenfilterpanel-PopupContainerFooter");}x.setVisible(true);S.setVisible(false);p.setVisible(false);O.setVisible(true);if(I){I.bindProperty("text",{path:"/dialog/filters/members/length",formatter:function(X){if(j.getProperty("/dialog/filters/exclude")){return X===1?j.getProperty("/text/excludedmember"):j.getProperty("/text/excludedmembers").replace("{0}",""+X);}return X===1?j.getProperty("/text/includedmember"):j.getProperty("/text/includedmembers").replace("{0}",""+X);},mode:sap.ui.model.BindingMode.OneWay});}if(s){setTimeout(s,200);}}}).addStyleClass("sapzenfilterpanel-BtnClear");S=new sap.ui.commons.layout.VerticalLayout({width:"100%"}).addStyleClass("sapzenfilterpanel-PopupContainerFooter");if(J){E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,p.addStyleClass("sapzenfilterpanel-DesktopSelectMember"));S.addContent(c.clone().removeStyleClass("sapzenfilterpanel-DesktopSubmit2").addStyleClass("sapzenfilterpanel-DesktopSubmit"));}else{S.addContent(p);}E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,S);E.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,x);s=function(){var Y,ai,aa,ab,X,ad,Z,aj,ak,ac,ae,ah,ag;Y=E.getCenter();if(Y){ai=Y.$();aa=ai.innerHeight();if(A.getVisible()||U.getVisible()){ab=A.getVisible()?A.$():U.$();ak=ab.find(".sapUiTableTr");ad=$(ab.find(".sapUiTableColHdrTr")[0]).outerHeight();if(t){Z=t.getVisible()?ai.find(".sapzenfilterpanel-LiveSearchField").outerHeight():ai.find(".sapzenfilterpanel-SearchField").outerHeight();}else{Z=0;}if(ak&&ak.length&&ad){if(E.$().find(".sapzenfilterpanel-SelectionTitle").outerHeight()>40){A.setColumnHeaderHeight(35);U.setColumnHeaderHeight(35);ad=35;}ah=0;aj=0;ag=aa-(ad+Z);for(var ac=0,ae=ak.length;ac<ae;ac++){X=$(ak[ac]).outerHeight();ah+=$(ak[ac]).outerHeight();if(ah>ag){break;}++aj;}while(X>0&&(ah+X)<ag){ah+=X;++aj;}aj=Math.max(2,aj);var af=ab.find(".sapUiTableHSb");if(af&&af.width()>0&&af.height()>(ag-ah)){--aj;}if(A.getVisible()){A.setVisibleRowCount(aj);}if(U.getVisible()){U.setVisibleRowCount(aj);}}}}};if(i.ZEN_popup){i.ZEN_popup.attachOpened(s);}else{if(i.ZEN_fitTable){i.ZEN_fitTable.push(s);}else{i.ZEN_fitTable=[s];}}}E.ZEN_initFunction=function(){var Y,aa,ab,X,ac,ad,ae,Z,af;Y=A.getColumns();for(aa=0,ab=Y.length;aa<ab;aa++){Y[aa].setSorted(false);}Y=U.getColumns();for(aa=0,ab=Y.length;aa<ab;aa++){Y[aa].setSorted(false);}if(T){T(true)();}else{if(Q){af=j.getProperty("/dialog/exclusionallowed");N.setVisible(af);w.setVisible(af);if(!j.getProperty("/dialog/nosearch")){if(j.getProperty("/dialog/selection/maxelements")||j.getProperty("/dialog/hierarchical")){d.setVisible(true);t.setVisible(false);}else{d.setVisible(false);t.setVisible(true);}}if(j.getProperty("/dialog/hierarchical")){a.checkSelectedChildMembers(j.getProperty("/dialog/members"),j.getProperty("/dialog/filters"));}else{a.checkSelectedMembers(j.getProperty("/dialog/members"),j.getProperty("/dialog/filters"));}}}X=j.getProperty("/dialog/members");ac=j.getProperty("/dialog/filters/members");if(X){for(aa=0,ab=X.length;aa<ab;aa++){ad=X[aa];ae="";if(B>-1){ae+=ad.text;}if(e>-1){if(ae){ae+=" ";}ae+=ad.displaykey;}ad.searchstring=ae;}}if(ac){for(aa=0,ab=ac.length;aa<ab;aa++){Z=ac[aa];ae="";if(B>-1){ae+=Z.text;}if(e>-1){if(ae){ae+=" ";}ae+=Z.displaykey;}Z.searchstring=ae;}}if(j.getProperty("/view")==="DIALOG"&&!j.getProperty("/dialog/nosearch")){d.setValue("");l.setValue("");l.fireLiveChange();l.setValue(y);if(!l.hasStyleClass("sapzenfilterpanel-SearchFieldInactive")){l.addStyleClass("sapzenfilterpanel-SearchFieldInactive");}}if(j.getProperty("/dialog/nosearch")){t.setVisible(false);d.setVisible(false);E.addStyleClass("sapzenfilterpanel-NoSearch");}else{E.removeStyleClass("sapzenfilterpanel-NoSearch");}};if(Q){h.addFirstPaneContent(E);h.ZEN_initFunction=E.ZEN_initFunction;return h;}return E;};return b;});define("zen.rt.components.filterpanel/resources/js/range",["./helperfunctions"],function(b){var a=function(i,J,B,P,g,l,T){var j,o,x,S,R,H,w,e,z,C,M,q,u,k,p,d,v,K,E,A,f,h,G,U,m,O,r,L,N,Q,t,n,F,I,c;q=[];j=i.getModel();I=j.getProperty("/property/desktopstyle");if(P){oSplitter=new sap.ui.commons.Splitter({splitterPosition:"62%",splitterOrientation:sap.ui.commons.Orientation.horizontal});oSplitter.addStyleClass("sapzenfilterpanel-OnePageDialog");oSelectionBorderLayout2=new sap.ui.commons.layout.BorderLayout();oSelectionBorderLayout2.addStyleClass("sapzenfilterpanel-RangeSelectionContainer2");}o=new sap.ui.commons.layout.BorderLayout();o.addStyleClass("sapzenfilterpanel-SelectionContainer");if(P){o.addStyleClass("sapzenfilterpanel-RangeContainer");}x=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.None,editable:true,visibleRowCount:100,visible:P?true:false,enableColumnReordering:false,columnHeaderHeight:23,minAutoRowCount:2,columnResize:function(){if(n){setTimeout(n,200);}}});var D=x._onColumnSelect;x._onColumnSelect=function(X,V,Y,W){D.call(x,X,V,false,W);};S=new sap.ui.table.Table({selectionMode:sap.ui.table.SelectionMode.None,visibleRowCount:100,visible:P?true:false,enableColumnReordering:false,columnHeaderHeight:23,minAutoRowCount:2,columnHeaderVisible:!P?true:false,columnResize:function(){if(n){setTimeout(n,200);}}});if(P){x.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);S.setVisibleRowCountMode(sap.ui.table.VisibleRowCountMode.Auto);}S._onColumnSelect=function(X,V,Y,W){D.call(S,X,V,false,W);};i.ZEN_addRangeToList=function(){var Y,V,ab,ad,Z,W,ac,aa,X;Y=j.getProperty("/dialog/range/from");V=j.getProperty("/dialog/range/to");ab=j.getProperty("/dialog/singleonly");ad=j.getProperty("/dialog/filters");Z=ad.ranges;W=Z.length;ac=(Y?Y.key:"")+"-"+(V?V.key:"");aa=true;if((Y||V)&&(!ab||(ab&&W<1))){for(X=0;X<W;X++){if(Z[X].key===ac){aa=false;break;}}if(aa){j.setProperty("/dialog/filters/input",undefined);Z.push({key:ac,from:Y,to:V,searchstring:(Y?Y.displaykey:"")+(V?V.displaykey:"")});if(!ad.dirty){ad.dirty=true;B();}j.setProperty("/dialog/filters",ad);if(R&&ab&&Z.length>0){R.setEnabled(false);}}if(g){w.setValue("");C.setValue("");w.focus();}j.setProperty("/dialog/range/from",null);j.setProperty("/dialog/range/to",null);q.from();}};if(!P){R=new sap.ui.commons.Button({text:"{/text/addtolist}",width:"100%",press:i.ZEN_addRangeToList}).addStyleClass("sapzenfilterpanel-BtnClear");}if(!I){H=new sap.ui.commons.TextView().addStyleClass("sapzenfilterpanel-SelectionTitle");if(P){H.bindProperty("text",{path:"/dialog/filters/ranges/length",formatter:function(V){if(j.getProperty("/dialog/filters/exclude")){return V===1?j.getProperty("/text/excludedrange"):j.getProperty("/text/excludedranges").replace("{0}",""+V);}return V===1?j.getProperty("/text/includedrange"):j.getProperty("/text/includedranges").replace("{0}",""+V);},mode:sap.ui.model.BindingMode.OneWay});}else{H.bindProperty("text",j.getProperty("/dialog/singleonly")?{path:"/text/selectsinglerange"}:{path:"/text/selectranges"});o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,H);}}if(!P){w=new sap.ui.commons.layout.BorderLayout({height:""});w.addStyleClass("sapzenfilterpanel-RangeFrom");e=new sap.ui.commons.TextView();e.addStyleClass("sapzenfilterpanel-FromToText");e.bindProperty("text","/text/from");w.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,e);z=new sap.ui.commons.TextView();z.bindProperty("text",{path:"/dialog/range/from/displaykey"});z.addStyleClass("sapzenfilterpanel-SelectionMemberText");w.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,z);C=new sap.ui.commons.layout.BorderLayout({height:""});C.addStyleClass("sapzenfilterpanel-RangeTo");e=new sap.ui.commons.TextView();e.addStyleClass("sapzenfilterpanel-FromToText");e.bindProperty("text","/text/to");C.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,e);z=new sap.ui.commons.TextView();z.bindProperty("text",{path:"/dialog/range/to/displaykey"});z.addStyleClass("sapzenfilterpanel-SelectionMemberText");C.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,z);M=new sap.ui.commons.layout.VerticalLayout({width:"100%",content:[w,C]});o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,M);}else{M=new sap.zen.commons.layout.MatrixLayout({layoutFixed:true,columns:3,width:"99%",widths:["","","40px"]}).addStyleClass("sapzenfilterpanel-FromToLayout");var s=new sap.ui.commons.Label({text:"{/text/from}"}).addStyleClass("sapzenfilterpanel-FromToText");var y=new sap.ui.commons.Label({text:"{/text/to}"}).addStyleClass("sapzenfilterpanel-FromToText");M.createRow({height:"32px"},s,y);if(g){w=new sap.ui.commons.TextField({width:"100%",liveChange:function(W){var X=W.getParameters().liveValue;var V={key:X,displaykey:X};j.setProperty("/dialog/range/from",V);}}).bindProperty("value",{path:"/dialog/range/from/key",mode:sap.ui.model.BindingMode.OneWay});C=new sap.ui.commons.TextField({width:"100%",liveChange:function(W){var X=W.getParameters().liveValue;var V={key:X,displaykey:X};j.setProperty("/dialog/range/to",V);}}).bindProperty("value",{path:"/dialog/range/to/key",mode:sap.ui.model.BindingMode.OneWay});}else{w=new sap.ui.commons.TextView().bindProperty("text",{path:"/dialog/range/from/displaykey"}).addStyleClass("sapzenfilterpanel-SelectionMemberText");C=new sap.ui.commons.TextView().bindProperty("text",{path:"/dialog/range/to/displaykey"}).addStyleClass("sapzenfilterpanel-SelectionMemberText");}oAddImage=new sap.ui.commons.Image({src:sap.zen.createStaticMimeUrl("zen.rt.components/resources/img/transparent.png"),alt:"{/text/add}",press:i.ZEN_addRangeToList});oAddImage.addStyleClass("sapzenfilterpanel-AddImage");M.createRow({height:"32px"},w,C,oAddImage);}q.from=function(){var W,Z,Y,V,X;C.removeStyleClass("sapzenfilterpanel-RangeToActive");w.addStyleClass("sapzenfilterpanel-RangeFromActive");j.setProperty("/dialog/range/mode","from");W=j.getProperty("/dialog/members");if(W){Z=j.getProperty("/dialog/range/from/key");for(Y=0,V=W.length;Y<V;Y++){X=W[Y];X.rangeselected=(X.key===Z);}j.setProperty("/dialog/members",W);}};w.attachBrowserEvent("click",q.from);if(g){w.attachBrowserEvent("focus",q.from);}q.to=function(){var W,Z,Y,V,X;w.removeStyleClass("sapzenfilterpanel-RangeFromActive");C.addStyleClass("sapzenfilterpanel-RangeToActive");j.setProperty("/dialog/range/mode","to");W=j.getProperty("/dialog/members");if(W){Z=j.getProperty("/dialog/range/to/key");for(Y=0,V=W.length;Y<V;Y++){X=W[Y];X.rangeselected=(X.key===Z);}j.setProperty("/dialog/members",W);}};C.attachBrowserEvent("click",q.to);if(g){C.attachBrowserEvent("focus",q.to);}u=j.getProperty("/text/search");k=new sap.ui.commons.TextField({width:"100%",value:u}).addStyleClass("sapzenfilterpanel-SearchField").addStyleClass("sapzenfilterpanel-SearchFieldInactive");k.attachBrowserEvent("focus",function(){if(this.hasStyleClass("sapzenfilterpanel-SearchFieldInactive")){this.removeStyleClass("sapzenfilterpanel-SearchFieldInactive");this.setValue("");}});k.attachBrowserEvent("blur",function(){if(this.getValue()===""){this.addStyleClass("sapzenfilterpanel-SearchFieldInactive");this.setValue(u);}});p=new sap.ui.commons.layout.HorizontalLayout({content:[k]}).addStyleClass("sapzenfilterpanel-LiveSearchField");d=new sap.ui.commons.SearchField({width:"100%",visible:false,enableListSuggest:false,showListExpander:false,enableFilterMode:true,search:function(X){var W=X.getParameters().query;var Y=i.ZEN_BackendSearchField_selection;for(var V=0;V<Y.length;V++){Y[V].setValue(W);}new Function(J.prepareCommand(j.getProperty("/command/membersearch"),"__STRING__",W))();}}).addStyleClass("sapzenfilterpanel-SearchField");i.ZEN_BackendSearchField_range=d;k.attachLiveChange(function(aa){var Y,X,W,V,ab,Z;Y=aa.getParameters().liveValue?aa.getParameters().liveValue.toUpperCase():"";X=["\\\\","\\^","\\$","\\+","\\.","\\(","\\)","\\[","\\]","\\{","\\}"];for(W=0,V=X.length;W<V;W++){ab=X[W];Y=Y.replace(new RegExp(ab,"g"),ab);}Y=Y.replace(/\?/g,".").replace(/\*/g,".*?");Z=new sap.ui.model.Filter("searchstring","Wildcard",Y);Z.fnTest=function(ac){return ac.search(new RegExp(Y))!=-1;};if(!j.getProperty("/dialog/range/maxelements")){x.getBinding("rows").filter([Z]);}}).addStyleClass("sapzenfilterpanel-SearchField");if(P){o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,d);o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,p);}else{o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,d);o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,p);}v=new sap.ui.commons.TextView({text:"{/dialog/range/nomembers}"});v.addStyleClass("sapzenfilterpanel-NoNotifications");x.setNoData(v);K=new sap.ui.commons.TextView({text:"{/text/noincludedmembers}"});K.addStyleClass("sapzenfilterpanel-NoNotifications");S.setNoData(K);E=j.getProperty("/property/memberdisplay");A=J.getColumnPosition("TEXT",E);if(A>-1){x.insertColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/text}"}),template:new sap.ui.commons.TextView().bindProperty("text","text").addStyleClass("sapzenfilterpanel-SelectionTableText"),sortProperty:"text",resizable:true}),A);}S.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/from}"}),template:new sap.ui.commons.TextView().bindProperty("text",{path:"from/displaykey"}).addStyleClass("sapzenfilterpanel-SelectionTableText"),sortProperty:"from/displaykey",resizable:true}));f=J.getColumnPosition("KEY",E);x.insertColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/key}"}),template:new sap.ui.commons.TextView().bindProperty("text","displaykey").addStyleClass("sapzenfilterpanel-SelectionTableKey"),sortProperty:"displaykey",resizable:true}),Math.abs(f));S.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:"{/text/to}"}),template:new sap.ui.commons.TextView().bindProperty("text",{path:"to/displaykey"}).addStyleClass("sapzenfilterpanel-SelectionTableKey"),sortProperty:"to/displaykey",resizable:true}));h=function(ab,W){var ac,X,ad,V,Y,aa,ae,Z;ac=j.getProperty("/dialog/range/mode");if(W){j.setProperty("/dialog/filters/input",undefined);ad=(ac==="to"?"from":"to");X=function(ag,af){var ah=j.getProperty("/dialog/membertype");if(!ah&&String(ag.key)>String(af.key)||ah==="DOUBLE"&&parseFloat(ag.comparekey)>parseFloat(af.comparekey)||ah&&parseInt(ag.comparekey,10)>parseInt(af.comparekey,10)){j.setProperty("/dialog/range/from",af);j.setProperty("/dialog/range/to",ag);q[ad]();}else{j.setProperty("/dialog/range/"+ac,ab);}};V=j.getProperty("/dialog/members");for(Y=0,aa=V.length;Y<aa;Y++){ae=V[Y];if(ae.key!=ab.key){V[Y].rangeselected=undefined;}}Z=j.getProperty("/dialog/range/"+ad);if(Z){if(ac==="from"){X(ab,Z);}else{X(Z,ab);}}else{j.setProperty("/dialog/range/"+ac,ab);}}else{j.setProperty("/dialog/range/"+ac,undefined);}};G=new sap.ui.commons.CheckBox({checked:"{rangeselected}",change:function(Z){var V=Z.oSource.getBindingContext();var Y=V.sPath;var X=V.oModel.getProperty(Y);var W=Z.getParameters().checked;h(X,W,Y);}});x.addColumn(new sap.ui.table.Column(i.getId()+"_radiobuttonCol",{template:G,width:"40px",resizable:true}));U=new sap.ui.commons.Image({src:sap.zen.createStaticMimeUrl("zen.rt.components/resources/img/transparent.png"),alt:"{/text/remove}"});U.addStyleClass("sapzenfilterpanel-RemoveImage");U.attachPress(function(Z){var Y,aa,X,V,W;Y=j.getProperty("/dialog/filters/ranges");aa=Z.oSource.getBindingContext().oModel.getProperty(Z.oSource.getBindingContext().sPath);if(aa){for(X=0,V=Y.length;X<V;X++){W=Y[X];if(W&&aa.key===W.key){Y.splice(X,1);j.setProperty("/dialog/filters/dirty",true);B();j.setProperty("/dialog/filters/input",undefined);break;}}j.setProperty("/dialog/filters/ranges",Y);}});S.addColumn(new sap.ui.table.Column({label:new sap.ui.commons.Label({text:""}),template:U,width:"40px",resizable:true}));x.addColumn(new sap.ui.table.Column({visible:false,filterProperty:"searchstring"}));S.addColumn(new sap.ui.table.Column({visible:false,filterProperty:"searchstring"}));x.attachColumnSelect(function(W){var V=W.getParameters().column;W.preventDefault();if(V.getId()!==i.getId()+"_radiobuttonCol"){if(V.getSorted()&&V.getSortOrder()===sap.ui.table.SortOrder.Ascending){x.sort(V,sap.ui.table.SortOrder.Descending);}else{x.sort(V);}}});S.attachColumnSelect(function(W){var V=W.getParameters().column;W.preventDefault();if(V.getSorted()&&V.getSortOrder()===sap.ui.table.SortOrder.Ascending){S.sort(V,sap.ui.table.SortOrder.Descending);}else{S.sort(V);}});x.bindRows("/dialog/members");S.bindRows("/dialog/filters/ranges");i.ZEN_rangeTable=x;i.ZEN_rangeSelectionTable=S;o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,x);if(P){oSelectionBorderLayout2.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,S);oSplitter.addSecondPaneContent(oSelectionBorderLayout2);}else{o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.center,S);}o.getCenter().setOverflowX("hidden").setOverflowY("hidden");O=new sap.ui.commons.Button({width:"100%",text:"{/text/selectnewranges}",press:function(){F(true);b.checkSelectedMembers(j.getProperty("/dialog/members"),j.getProperty("/dialog/filters"));if(H){H.bindProperty("text",j.getProperty("/dialog/singleonly")?{path:"/text/selectsinglerange"}:{path:"/text/selectranges"});}O.setVisible(false);m.setVisible(true);if(j.getProperty("/dialog/selection/maxelements")){d.setVisible(true);p.setVisible(false);}else{d.setVisible(false);p.setVisible(true);}o.removeStyleClass("sapzenfilterpanel-SelectionContainer");o.addStyleClass("sapzenfilterpanel-SelectionContainer2");}}).addStyleClass("sapzenfilterpanel-BtnClear");r=new sap.ui.commons.TextView({text:{path:"/text/exclude",formatter:function(V){return"≠ "+V;}}}).addStyleClass("sapzenfilterpanel-ExclusionText");L=new sap.ui.commons.CheckBox({checked:"{/dialog/filters/exclude}",change:function(){j.setProperty("/dialog/filters/dirty",true);B();j.setProperty("/dialog/filters/input",undefined);H.getBinding("text")._fireChange();}}).addStyleClass("sapzenfilterpanel-ExclusionCheckBox");N=new sap.ui.commons.layout.HorizontalLayout({content:[r,L]}).addStyleClass("sapzenfilterpanel-ExclusionContainer");if(I){c=new sap.ui.commons.layout.HorizontalLayout({content:[T,l]}).addStyleClass("sapzenfilterpanel-DesktopSubmit2");}if(P){N.addContent(H);}if(P){oSelectionBorderLayout2.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,N);oSelectionBorderLayout2.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,M);}else{t=new sap.ui.commons.layout.VerticalLayout({width:"100%",visible:false,content:[N]}).addStyleClass("sapzenfilterpanel-PopupContainerFooter");if(I){o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,O.addStyleClass("sapzenfilterpanel-DesktopSelectMember"));t.addContent(c);O.setVisible(false);}else{t.addContent(O);}m=new sap.ui.commons.Button({width:"100%",text:{path:"/dialog/filters/ranges/length",formatter:function(V){return j.getProperty("/text/showselectedranges")+" ("+V+")";},mode:sap.ui.model.BindingMode.OneWay},press:function(){p.setVisible(false);d.setVisible(false);F(false);if(!j.getProperty("/dialog/exclusionallowed")){o.removeStyleClass("sapzenfilterpanel-SelectionContainer2");o.addStyleClass("sapzenfilterpanel-SelectionContainer");N.setVisible(false);t.removeStyleClass("sapzenfilterpanel-PopupContainerFooter");t.addStyleClass("sapzenfilterpanel-PopupContainerFooter2");}else{o.removeStyleClass("sapzenfilterpanel-SelectionContainer");o.addStyleClass("sapzenfilterpanel-SelectionContainer2");N.setVisible(true);t.removeStyleClass("sapzenfilterpanel-PopupContainerFooter2");t.addStyleClass("sapzenfilterpanel-PopupContainerFooter");}m.setVisible(false);O.setVisible(true);if(H){H.bindProperty("text",{path:"/dialog/filters/ranges/length",formatter:function(V){if(j.getProperty("/dialog/filters/exclude")){return V===1?j.getProperty("/text/excludedrange"):j.getProperty("/text/excludedranges").replace("{0}",""+V);}return V===1?j.getProperty("/text/includedrange"):j.getProperty("/text/includedranges").replace("{0}",""+V);},mode:sap.ui.model.BindingMode.OneWay});}if(n){setTimeout(n,200);}}}).addStyleClass("sapzenfilterpanel-BtnClear");Q=new sap.ui.commons.layout.VerticalLayout({width:"100%",content:[R]}).addStyleClass("sapzenfilterpanel-PopupContainerFooter");if(I){o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.top,m.addStyleClass("sapzenfilterpanel-DesktopSelectMember"));Q.addContent(c.clone());}else{Q.addContent(m);}o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,Q);o.addContent(sap.ui.commons.layout.BorderLayoutAreaTypes.bottom,t);F=function(V){x.setVisible(V);S.setVisible(!V);R.setVisible(V);if(j.getProperty("/dialog/singleonly")&&j.getProperty("/dialog/filters/ranges/length")>0){R.setEnabled(false);}else{R.setEnabled(true);}M.setVisible(V);t.setVisible(!V);Q.setVisible(V);if(n){n();}};n=function(){var W,af,Y,aa,V,ac,X,Z,ag;W=o.getCenter();if(W){af=W.$();Y=af.innerHeight();if(x.getVisible()||S.getVisible()){aa=x.getVisible()?x.$():S.$();aRows$=aa.find(".sapUiTableTr");ac=$(aa.find(".sapUiTableColHdrTr")[0]).outerHeight();X=p.getVisible()?af.find(".sapzenfilterpanel-LiveSearchField").outerHeight():af.find(".sapzenfilterpanel-SearchField").outerHeight();Z=M.getVisible()?af.find(".sapzenfilterpanel-RangeFrom").outerHeight():0;if(aRows$&&aRows$.length&&ac){if(o.$().find(".sapzenfilterpanel-SelectionTitle").outerHeight()>40){x.setColumnHeaderHeight(35);S.setColumnHeaderHeight(35);ac=35;}iRowHeightSum=0;ag=0;iDivHeightSum=Y-(ac+X+(Z*2));for(var ab=0,ad=aRows$.length;ab<ad;ab++){V=$(aRows$[ab]).outerHeight();iRowHeightSum+=$(aRows$[ab]).outerHeight();if(iRowHeightSum>iDivHeightSum){break;}++ag;}while(V>0&&(iRowHeightSum+V)<iDivHeightSum){iRowHeightSum+=V;++ag;}ag=Math.max(2,ag);var ae=aa.find(".sapUiTableHSb");if(ae&&ae.width()>0&&ae.height()>(iDivHeightSum-iRowHeightSum)){--ag;}if(x.getVisible()){x.setVisibleRowCount(ag);if(!P&&S.getVisibleRowCount()===100){S.setVisibleRowCount(ag);}}if(!P&&S.getVisible()){S.setVisibleRowCount(ag);}}}}};if(i.ZEN_popup){i.ZEN_popup.attachOpened(n);}i.ZEN_fitRangeTable=n;}o.ZEN_initFunction=function(){var ac,X,aa,Z,V,W,Y,ab;if(j.getProperty("/view")!=="DIALOG_SEARCH"){q.from();}ac=x.getColumns();for(Z=0,V=ac.length;Z<V;Z++){ac[Z].setSorted(false);}ac=S.getColumns();for(Z=0,V=ac.length;Z<V;Z++){ac[Z].setSorted(false);}if(O){O.firePress();}X=j.getProperty("/dialog/members");aa=j.getProperty("/dialog/filters/ranges");if(X){for(Z=0,V=X.length;Z<V;Z++){W=X[Z];Y="";if(A>-1){Y+=W.text;}if(f>-1){if(Y){Y+=" ";}Y+=W.displaykey;}W.searchstring=Y;}}if(aa){for(Z=0,V=aa.length;Z<V;Z++){ab=aa[Z];ab.searchstring=(ab.from?ab.from.displaykey:"")+(ab.to?ab.to.displaykey:"");}if(j.getProperty("/dialog/singleonly")&&aa.length>0){R.setEnabled(false);}else{R.setEnabled(true);}}if(j.getProperty("/view")==="DIALOG"){d.setValue("");k.setValue("");k.fireLiveChange();k.setValue(u);if(!k.hasStyleClass("sapzenfilterpanel-SearchFieldInactive")){k.addStyleClass("sapzenfilterpanel-SearchFieldInactive");}}if(P){bExclusionAllowed=j.getProperty("/dialog/exclusionallowed");if(bExclusionAllowed&&oSelectionBorderLayout2.hasStyleClass("sapzenfilterpanel-noExclusion")){oSelectionBorderLayout2.removeStyleClass("sapzenfilterpanel-noExclusion");}else{if(!bExclusionAllowed&&!oSelectionBorderLayout2.hasStyleClass("sapzenfilterpanel-noExclusion")){oSelectionBorderLayout2.addStyleClass("sapzenfilterpanel-noExclusion");}}}if(j.getProperty("/view")==="DIALOG_SEARCH"){x.getBinding().refresh(true);}};if(P){oSplitter.addFirstPaneContent(o);oSplitter.ZEN_initFunction=o.ZEN_initFunction;return oSplitter;}return o;};return a;});define("zen.rt.components.filterpanel/resources/js/input",[],function(){var a=function(c){var b,d;d=c.getModel();b=new sap.ui.commons.TextField({width:"100%",value:{path:"/dialog/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:function(e){return e?e.input:"";}},liveChange:function(e){var f;f=d.getProperty("/dialog/filters");f.dirty=true;f.exclude=false;f.input=e.getParameter("liveValue");f.members=[];f.ranges=[];}});b.onAfterRendering=function(){this.focus();};return b;};return a;});define("zen.rt.components.filterpanel/resources/js/docking",[],function(){jQuery.sap.require("sap.ui.core.Popup");var i={};var d=function(){this.my=sap.ui.core.Popup.Dock.LeftTop;this.at=sap.ui.core.Popup.Dock.RightTop;this.offset="13 -10";this.collision="flip";};i.DEFAULT=new d();var h=function(){this.my=sap.ui.core.Popup.Dock.LeftTop;this.at=sap.ui.core.Popup.Dock.RightTop;this.offset="13 -10";this.collision="none";};i.RIGHT_BOTTOM=new h();var f=function(){this.my=sap.ui.core.Popup.Dock.RightTop;this.at=sap.ui.core.Popup.Dock.LeftTop;this.offset="-13 -10";this.collision="none";};i.LEFT_BOTTOM=new f();var c=function(){this.my=sap.ui.core.Popup.Dock.LeftBottom;this.at=sap.ui.core.Popup.Dock.RightBottom;this.offset="13 10";this.collision="none";};i.RIGHT_TOP=new c();var j=function(){this.my=sap.ui.core.Popup.Dock.RightBottom;this.at=sap.ui.core.Popup.Dock.LeftBottom;this.offset="-13 10";this.collision="none";};i.LEFT_TOP=new j();var b=function(){this.my=sap.ui.core.Popup.Dock.CenterBottom;this.at=sap.ui.core.Popup.Dock.CenterTop;this.offset="0 -10";this.collision="none";};i.CENTER_TOP=new b();var a=function(){this.my=sap.ui.core.Popup.Dock.CenterTop;this.at=sap.ui.core.Popup.Dock.CenterBottom;this.offset="0 10";this.collision="none";};i.CENTER_BOTTOM=new a();var g=function(){this.my=sap.ui.core.Popup.Dock.LeftCenter;this.at=sap.ui.core.Popup.Dock.RightCenter;this.offset="13 0";this.collision="none";};i.RIGHT_CENTER=new g();var e=function(){this.my=sap.ui.core.Popup.Dock.RightCenter;this.at=sap.ui.core.Popup.Dock.LeftCenter;this.offset="-13 0";this.collision="none";};i.LEFT_CENTER=new e();return i;});define("zen.rt.components.filterpanel/resources/js/emptyComponent",[],function(){return sap.ui.core.Control.extend("sap.zen.components.Empty",{renderer:function(a,b){a.write("<div");a.writeControlData(b);a.write("></div>");},insertPage:function(b,a){},setSelectedIndex:function(b,c,a){}});});define("zen.rt.components.pagebook/resources/js/page",["zen.rt.components/resources/js/export/RenderManagedAbsoluteLayout"],function(a){return a.extend("sap.zen.components.Page",{metadata:{properties:{}},renderer:{},setPositionInPageBook:function(b){this.positionInPageBook=b;},getPositionInPageBook:function(){return this.positionInPageBook;}});});define("zen.rt.components.pagebook/resources/js/pagebook",[],function(){return sap.ui.core.Control.extend("sap.zen.components.Pagebook",{metadata:{properties:{width:{type:"sap.ui.core.CSSSize"},height:{type:"sap.ui.core.CSSSize"},transitionHandler:{type:"object"},transitionEffect:{type:"string"},transitionDirection:{type:"string"},enableGestures:{type:"boolean",defaultValue:true},showPageIndicator:{type:"boolean",defaultValue:false},pageIndicatorPosition:{type:"string",defaultValue:"default"}},aggregations:{pages:{type:"sap.zen.components.Page",multiple:true,singularName:"page"}}},mySetTimeout:function(a,b){if(sap.zen.designmode&&sap.zen.designmode.isDesignMode()){a();}else{setTimeout(a,b);}},init:function(){this.selectedPageIndex=-1;this.cachingMode="";this.indexWasSetByScript=false;this.scriptWillBeExecuted=true;this.oldSelectedPageIndex=-1;this.visiblePageIndex=-1;this.rendered=false;this.editModeSwitch=false;this.enableGestures=true;this.swipeContext={setDragMode:function(a){this.inDragMode=a;},getDragMode:function(){return this.inDragMode;}};this.swipeContext.setDragMode(false);this.minDrag=10;this.treshold=50;},setCachingMode:function(a){this.cachingMode=a;},getCachingMode:function(){return this.cachingMode;},setIndexWasSetByScript:function(a){this.indexWasSetByScript=a;},getIndexWasSetByScript:function(){return this.indexWasSetByScript;},setScriptWillBeExecuted:function(a){this.scriptWillBeExecuted=a;},getScriptWillBeExecuted:function(){return this.scriptWillBeExecuted;},setEnableGestures:function(a){this.enableGestures=a;},getEnableGestures:function(){return this.enableGestures;},setSelectedIndex:function(b,e,a){jQuery.sap.log.debug("setSelectedIndex",b,"pagebook");if(!this.changeIsApplicable(b,a)){return;}if((this.editModeSwitch==true)||(this.selectedPageIndex!=b)){this.adaptPageIndicator(b);if(e==true){this.editModeSwitch=true;this.selectedPageIndex=b;}var d=this;if(this.rendered==false){this.selectedPageIndex=b;}else{if(e==true){var c={index:b,oPagebook:d};this.mySetTimeout(function(){d.zenfs(c);},1);}else{this.mySetTimeout(function(){jQuery.sap.log.debug("setSelectedIndex in timeout",b,"pagebook");d.switchToPage(b,!d.editModeSwitch);d.editModeSwitch=false;},1);}}}},changeIsApplicable:function(c,a){var b=(sap.zen.designmode&&sap.zen.designmode.isDesignMode());if(this.selectedPageIndex!=-1&&this.getCachingMode()==="all"&&!this.getScriptWillBeExecuted()&&!this.getIndexWasSetByScript()&&!b&&typeof(zenReplayMode)==="undefined"){return false;}if(this.selectedIndexOutOfBounds(c,a)){return false;}if(this.samePageIsSelectedTwice(c)){return false;}return true;},adaptPageIndicator:function(c){if(this.getShowPageIndicator()==true){var b=true;var e=this.getTransitionDirection();if(e){if(e=="vertical"){b=false;}}var a=this.getPages().length;for(var d=0;d<a;d++){if(b==true){if(c==d){$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).addClass("zenpb-div-pag-li-active");$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).removeClass("zenpb-div-pag-li");}else{$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).addClass("zenpb-div-pag-li");$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).removeClass("zenpb-div-pag-li-active");}}else{if(c==d){$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).addClass("zenpb-div-pag-li-active-ver");$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).removeClass("zenpb-div-pag-li-ver");}else{$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).addClass("zenpb-div-pag-li-ver");$("#"+this.getIdForPageIndicatorBubble(this.getId(),d)).removeClass("zenpb-div-pag-li-active-ver");}}}}},selectedIndexOutOfBounds:function(b,a){if(b<0){return true;}if(a===undefined){a=this.getPages().length;}if(this.rendered==false&&b==0){}else{if(b>(a-1)){return true;}}return false;},samePageIsSelectedTwice:function(a){if(this.visiblePageIndex==a){this.selectedPageIndex=a;this.oldSelectedPageIndex=a;return true;}return false;},getSelectedIndex:function(){return this.selectedPageIndex;},writePagebookDIVToHtml:function(g,b){g.write("<div");g.write(' id="'+b.getIdForPagebookDiv(b.getId())+'"');g.write('style="');g.write("width:100%;");g.write("height:100%;");g.write("position:relative;");var c=b.getCorrectedTransitionEffect();var h={};h.oPagebook=b;var j=b.getTransitionHandler()[c].getPageBookContainerStyle(h);for(var d=0;d<j.length;d++){var a=j[d];for(var e in a){g.write(e+":"+a[e]+";");}}g.write('">');var f=b.writeInnerContainerDIVToHtml(g,b);b.writePagesDIVsToHtml(g,b,f);g.write("</div>");g.write("</div>");},writeInnerContainerDIVToHtml:function(h,b){var d="width: 100%; height: 100%; position: absolute;";d+=" -webkit-transform-style: preserve-3d;";d+=" -moz-transform-style: preserve-3d;";d+=" -ms-transform-style: preserve-3d;";d+=" transform-style: preserve-3d;";var g=b.getCorrectedTransitionEffect().toLowerCase();var i={};i.oPagebook=b;var f=b.getTransitionHandler()[g].getInnerContainerStyle(i);d+=f;var a=b.getId();var e=b.getIdForInnerContainerDiv(a);var c='<div id="'+e+'" style="'+d+'">';h.write(c);return a;},writePagesDIVsToHtml:function(d,e,a){var c=e.getPages();for(var b=0;b<c.length;b++){e.writeOnePageDIVToHtml(d,e,c[b],b,a);}},writeOnePageDIVToHtml:function(e,f,g,d,c){g.setPositionInPageBook(d);var a=f.getIdForPageDiv(c,d);var b='<div id="'+a+'" style="position: absolute; width: 100%; height: 100%;';if(d!=f.selectedPageIndex){b+="left:-100000px;";}e.write(b);e.write('">');e.renderControl(g);e.write("</div>");},writePageIndicatorToHtml:function(h,b,g,a,j,d,c){var f=b.getPages().length;h.write('<div id="'+b.getIdForPageIndicator(b.getId())+'" class="'+g+'">');h.write('<div class="'+a+'">');h.write('<div class="'+j+'">');for(var e=0;e<f;e++){if(b.getSelectedIndex()==e){h.write('<div id="'+b.getIdForPageIndicatorBubble(b.getId(),e)+'"class="'+c+'"></div>');}else{h.write('<div id="'+b.getIdForPageIndicatorBubble(b.getId(),e)+'"class="'+d+'"></div>');}}h.write("</div>");h.write("</div>");h.write("</div>");},renderer:function(i,b){jQuery.sap.log.debug("render","enter","pagebook");b.unregisterGestures();var g=true;var j=b.getTransitionDirection();if(j){if(j=="vertical"){g=false;}}b.zenPaginatorPos=-1;var f="";var d="";var a="";var k="";var e="";var c="";if(b.getShowPageIndicator()==true){var h=(b.getPageIndicatorPosition()=="default");if(g==true){if(h==true){b.zenPaginatorPos=2;f="zenpb-div-pag-paginator-bottom";d="zenpb-div-pag-pb-bottom";a="zenpb-div-pag-containerH";k="zenpb-div-pag-centerH";e="zenpb-div-pag-li";c="zenpb-div-pag-li-active";}else{b.zenPaginatorPos=0;f="zenpb-div-pag-paginator-top";d="zenpb-div-pag-pb-top";a="zenpb-div-pag-containerH";k="zenpb-div-pag-centerH";e="zenpb-div-pag-li";c="zenpb-div-pag-li-active";}}else{if(h==true){b.zenPaginatorPos=1;f="zenpb-div-pag-paginator-right";d="zenpb-div-pag-pb-right";a="zenpb-div-pag-containerV";k="zenpb-div-pag-centerV";e="zenpb-div-pag-li-ver";c="zenpb-div-pag-li-active-ver";}else{b.zenPaginatorPos=3;f="zenpb-div-pag-paginator-left";d="zenpb-div-pag-pb-left";a="zenpb-div-pag-containerH";k="zenpb-div-pag-centerV";e="zenpb-div-pag-li-ver";c="zenpb-div-pag-li-active-ver";}}}i.write("<div");i.addStyle("width",b.getWidth());i.addStyle("height",b.getHeight());i.writeControlData(b);i.writeStyles();i.writeClasses();i.write(">");if(b.zenPaginatorPos==-1){b.writePagebookDIVToHtml(i,b);}else{if(b.zenPaginatorPos==0){b.writePageIndicatorToHtml(i,b,f,a,a,e,c);i.write('<div class="'+d+'">');b.writePagebookDIVToHtml(i,b);i.write("</div>");}else{if(b.zenPaginatorPos==1){i.write('<div class="'+d+'">');b.writePagebookDIVToHtml(i,b);i.write("</div>");b.writePageIndicatorToHtml(i,b,f,a,k,e,c);}else{if(b.zenPaginatorPos==2){i.write('<div class="'+d+'">');b.writePagebookDIVToHtml(i,b);i.write("</div>");b.writePageIndicatorToHtml(i,b,f,a,k,e,c);}else{if(b.zenPaginatorPos==3){b.writePageIndicatorToHtml(i,b,f,a,k,e,c);i.write('<div class="'+d+'">');b.writePagebookDIVToHtml(i,b);i.write("</div>");}}}}}i.write("</div>");b.oldSelectedPageIndex=b.selectedPageIndex;b.visiblePageIndex=b.selectedPageIndex;jQuery.sap.log.debug("render","leave","pagebook");},getIdForInnerContainerDiv:function(a){return"zen_"+a+"_innerContainer";},getIdForPagebookDiv:function(a){return"zen_"+a+"_pb";},getIdForPageDiv:function(b,a){return"zen_"+b+"_page_"+a;},getIdForPageIndicatorBubble:function(b,a){return"zen_"+b+"-nav-dot"+a;},getIdForPageIndicator:function(a){return"zen_"+a+"-paginator";},supportsTransitions:function(){return jQuery.support.cssTransforms3d;},getCorrectedTransitionEffect:function(){var a=this.getTransitionEffect();if(this.supportsTransitions()==true){return a;}if(a=="none"){return a;}if(a=="slide_in"){return a;}if(a=="fade"){return a;}return"slide_in";},postProcess:function(){jQuery.sap.log.debug("postProcess","enter","pagebook");var d=this;var c=d.getId();var e=$("#"+c);e.css({position:"relative","-webkit-perspective":"800px","-moz-perspective":"800px","-ms-perspective":"800px"});var a=d.getPages();for(var h=0;h<a.length;h++){var b=false;if(h==d.selectedPageIndex){b=true;}var j={};j.isCurrentPage=b;var g=d.getTransitionHandler()[d.getCorrectedTransitionEffect().toLowerCase()].getPageContainerStyle(j);var f=d.getIdForPageDiv(c,h);$("#"+f).css(g);}d.rendered=true;this.registerGestures();jQuery.sap.log.debug("postProcess","leave","pagebook");},onAfterRendering:function(a){this.postProcess();},ignoreDragOnImages:function(a){a.preventDefault();},f1:function(v){var x=this;if(x.swipeContext.getDragMode()==true){return;}var m=x.getId();var r=true;var q=x.getCorrectedTransitionEffect();var b=x.getTransitionDirection();var k=sap.zen.PagebookHandler.instance;if(b){if(b=="vertical"){r=false;}}x.swipeContext.moved=false;var a=$("#"+m);var l=parseInt(a.innerWidth(),10);var u=parseInt(a.innerHeight(),10);if(v.originalEvent.touches&&v.originalEvent.touches.length){v=v.originalEvent.touches[0];}else{if(v.originalEvent.changedTouches&&v.originalEvent.changedTouches.length){v=v.originalEvent.changedTouches[0];}}$("img").bind("dragstart",this.ignoreDragOnImages);x.swipeContext.orgMouseX=v.pageX;x.swipeContext.orgMouseY=v.pageY;x.swipeContext.lastMouseX=v.pageX;x.swipeContext.lastMouseY=v.pageY;x.swipeContext.setDragMode(true);x.swipeContext.totalDx=0;x.swipeContext.totalDy=0;var p=x.getId();var y=x.getIdForInnerContainerDiv(p);var j=$("#"+y+" > div");var f=[];if(j){var g=j[x.getSelectedIndex()-1];var c=j[x.getSelectedIndex()];var s=j[x.getSelectedIndex()+1];for(var t=0;t<j.length;t++){if(t!=x.getSelectedIndex()-1&&t!=x.getSelectedIndex()&&t!=x.getSelectedIndex()+1){f.push(j[t]);}}}var o={};o.oPagebook=x;o.prevPage=g;o.nextPage=s;o.actualPage=c;o.invisiblePages=f;o.isHorizontalDirection=r;o.w=l;o.h=u;o.innerContainerId=y;k.getTransitionHandler(q).initSwipe(o);var n="";if(window.getSelection){n=window.getSelection();}else{if(document.getSelection){n=document.getSelection();}else{if(document.selection){var d=document.selection.type;if(d=="Text"){x.swipeContext.setDragMode(false);}}}}n=n+"";if(n!==""){x.swipeContext.setDragMode(false);}},f2:function(t){var x=sap.ui.getCore().byId(t.data.getId());var l=x.getId();var q=true;var p=x.getCorrectedTransitionEffect();var b=x.getTransitionDirection();var g=sap.zen.PagebookHandler.instance;if(b){if(b=="vertical"){q=false;}}if(x.swipeContext.getDragMode()==false){return true;}t.preventDefault();if(t.originalEvent.touches&&t.originalEvent.touches.length){t=t.originalEvent.touches[0];}else{if(t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length){t=t.originalEvent.changedTouches[0];}}var a=$("#"+l);var j=parseInt(a.innerWidth(),10);var s=parseInt(a.innerHeight(),10);var n=x.getPages().length;var v=t.pageX;var u=t.pageY;var k=v-x.swipeContext.lastMouseX;var i=u-x.swipeContext.lastMouseY;if(q==true){if(x.getSelectedIndex()==0){if((x.swipeContext.totalDx+k)>=x.treshold){k=(x.treshold-1)-x.swipeContext.totalDx;}}else{if(x.getSelectedIndex()==(n-1)){if((x.swipeContext.totalDx+k)<=-x.treshold){k=x.swipeContext.totalDx+(x.treshold-1);}}}}else{if(x.getSelectedIndex()==0){if((x.swipeContext.totalDy+i)>=x.treshold){i=(x.treshold-1)-x.swipeContext.totalDy;}}else{if(x.getSelectedIndex()==(n-1)){if(x.swipeContext.totalDy+i<=-x.treshold){i=(x.treshold-1)+x.swipeContext.totalDy;}}}}x.swipeContext.totalDx+=k;x.swipeContext.totalDy+=i;x.swipeContext.lastMouseX=t.pageX;x.swipeContext.lastMouseY=t.pageY;var o=x.getId();var y=x.getIdForInnerContainerDiv(o);var f=$("#"+y+" > div");if(f){var d=f[x.getSelectedIndex()-1];var c=f[x.getSelectedIndex()];var r=f[x.getSelectedIndex()+1];}var m={};m.oPagebook=x;m.isHorizontalDirection=q;m.prevPage=d;m.nextPage=r;m.actualPage=c;m.w=j;m.h=s;m.dx=k;m.dy=i;m.totalDx=x.swipeContext.totalDx;m.totalDy=x.swipeContext.totalDy;m.innerContainerId=y;x.swipeContext.moved=true;g.getTransitionHandler(p).moveSwipe(m);},f3:function(s){var u=sap.ui.getCore().byId(s.data.getId());var l=u.getId();var p=true;var o=u.getCorrectedTransitionEffect();var b=u.getTransitionDirection();var g=sap.zen.PagebookHandler.instance;if(b){if(b=="vertical"){p=false;}}if(u.swipeContext.getDragMode()==false){return true;}if(u.swipeContext.moved==false){u.swipeContext.setDragMode(false);return true;}u.swipeContext.moved=false;u.swipeContext.setDragMode(false);if(s.originalEvent.touches&&s.originalEvent.touches.length){s=s.originalEvent.touches[0];}else{if(s.originalEvent.changedTouches&&s.originalEvent.changedTouches.length){s=s.originalEvent.changedTouches[0];}}var a=$("#"+l);var j=parseInt(a.innerWidth(),10);var r=parseInt(a.innerHeight(),10);$("img").unbind("dragstart",u.ignoreDragOnImages);var k;var i;var t=u.getSelectedIndex();if(p==true){if(Math.abs(u.swipeContext.totalDx)<u.treshold){k=-u.swipeContext.totalDx;}else{if(u.swipeContext.totalDx>0){k=j-u.swipeContext.totalDx;if(t>0){t--;}}else{k=-j+u.swipeContext.totalDx;if(t<(u.getPages().length-1)){t++;}}}}else{if(Math.abs(u.swipeContext.totalDy)<u.treshold){i=-u.swipeContext.totalDy;}else{if(u.swipeContext.totalDy>0){i=r-u.swipeContext.totalDy;if(t>0){t--;}}else{i=-r+u.swipeContext.totalDy;if(t<(u.getPages().length-1)){t++;}}}}var n=u.getId();var v=u.getIdForInnerContainerDiv(n);var f=$("#"+v+" > div");if(f){var d=f[u.getSelectedIndex()-1];var c=f[u.getSelectedIndex()];var q=f[u.getSelectedIndex()+1];}var m={};m.oPagebook=u;m.isHorizontalDirection=p;m.newPageIndex=t;m.prevPage=d;m.nextPage=q;m.actualPage=c;m.newPage=f[t];m.oldPage=f[u.getSelectedIndex()];m.w=j;m.h=r;m.dx=k;m.dy=i;m.totalDx=u.swipeContext.totalDx;m.totalDy=u.swipeContext.totalDy;m.innerContainerId=v;g.getTransitionHandler(o).endSwipe(m);u.swipeContext.totalDx=0;u.swipeContext.totalDy=0;u.visiblePageIndex=t;if(u.getCachingMode()==="all"&&!u.getScriptWillBeExecuted()){u.selectedPageIndex=t;u.oldSelectedPageIndex=t;u.visiblePageIndex=t;}u.adaptPageIndicator(t);},makeMouseDownHandler:function(a){return function(f){var b=function(i){a.f3(i);d();};function d(){var e=$(document);c="mousemove touchmove";e.unbind(c,a.f2);c="mouseup touchend";e.unbind(c,b);sap.zen.PagebookHandler.instance.singletonAlreadyInSwipeMode=false;}function h(i){d();}if(f.originalEvent.bIsComponentDragDrop&&f.originalEvent.bIsComponentDragDrop===true){return;}if(sap.zen.PagebookHandler.instance.singletonAlreadyInSwipeMode==true){return true;}sap.zen.PagebookHandler.instance.singletonAlreadyInSwipeMode=true;a.f1(f);var g=$(document);var c="";if(sapbi_isMobile){c="touchend";}else{c="mouseup";}g.bind(c,a,b);if(sapbi_isMobile){c="touchmove";}else{c="mousemove";}g.bind(c,a,a.f2);};},usedMouseDownHandler:null,registerGestures:function(){var f=this;if(f.gesturesRegistered==true||!f.getEnableGestures()){return;}var e="";if(sapbi_isMobile){e="touchstart";}else{e="mousedown";}this.usedMouseDownhandler=this.makeMouseDownHandler(f);f.attachBrowserEvent(e,this.usedMouseDownhandler);var b=this.getPages().length;var d=function(g,h){$("#"+h.getIdForPageIndicatorBubble(h.getId(),g)).click(function(k){if(h.getCachingMode()==="all"&&!h.getScriptWillBeExecuted()){var i=h.getIndexWasSetByScript();h.setIndexWasSetByScript(true);h.setSelectedIndex(g,false,h.getPages().length);h.setIndexWasSetByScript(i);}var j={index:g,oPagebook:h};h.zenfs(j);k.stopPropagation();});};if(!sapbi_isMobile){for(var c=0;c<b;c++){d(c,f);}}if(f.zenPaginatorPos>=0){var a=this.getIdForPageIndicator(this.getId());$("#"+a).click(function(o){var j=$("#"+a);var l=-1;if((f.zenPaginatorPos==0)||(f.zenPaginatorPos==2)){var k=o.clientX-$("#"+a).offset().left;var i=$("#"+a).innerWidth();if(k<(i/2)){l=f.selectedPageIndex-1;}else{l=f.selectedPageIndex+1;}}else{var g=o.clientY-$("#"+a).offset().top;var n=$("#"+a).innerHeight();if(g<(n/2)){l=f.selectedPageIndex-1;}else{l=f.selectedPageIndex+1;}}if((l>=0)&&(l<f.getPages().length)){var m={index:l,oPagebook:f};f.zenfs(m);}});}f.gesturesRegistered=true;},unregisterGestures:function(){var b=this;if(!b.gesturesRegistered){return;}var a="mousedown touchstart";b.detachBrowserEvent(a,this.usedMouseDownhandler);b.gesturesRegistered=false;},exit:function(){var a=this;a.unregisterGestures();},switchToPage:function(b,u){jQuery.sap.log.debug("switchToPage","enter","pagebook");var v=this;var e=v.oldSelectedPageIndex;var n=this.getId();var x=v.getIdForInnerContainerDiv(n);var f=$("#"+x+" > div");var q=true;var a=v.getTransitionDirection();if(a){if(a=="vertical"){q=false;}}var o=v.getCorrectedTransitionEffect();if(f){var g=null;var p=null;if(e!=-1){g=f[e];}p=f[b];var k=$("#"+n);var j=k.innerWidth();var t=k.innerHeight();var l=1;if(b<e){l=-1;}var d=f[e-1];var r=f[e+1];var c=[];for(var s=0;s<f.length;s++){if(s!=e&&s!=b&&s!=e+1&&s!=e-1){c.push(f[s]);}}var m={};m.oPagebook=v;m.newPage=p;m.oldPage=g;m.factor=l;m.prevPageOther=d;m.nextPageOther=r;m.invisiblePages=c;m.oldIndex=e;m.newIndex=b;m.isHorizontalDirection=q;m.w=parseInt(j,10);m.h=parseInt(t,10);m.innerContainerId=x;m.animated=u;v.getTransitionHandler()[o].switchPage(m);v.selectedPageIndex=b;v.oldSelectedPageIndex=b;v.visiblePageIndex=b;}jQuery.sap.log.debug("switchToPage","leave","pagebook");}});});define("zen.rt.components.pagebook/resources/js/pagebook_handler",["sap/zen/basehandler","zen.rt.components.pagebook/resources/js/transitionhandler","zen.rt.components.pagebook/resources/js/pagebook","zen.rt.components.pagebook/resources/js/page_handler","zen.rt.components/resources/js/export/ExportToPdfHelper"],function(BaseHandler,transitions,Pagebook,PageHandler,PdfHelper){var dispatcher=BaseHandler.dispatcher;var PagebookHandler=function(){BaseHandler.apply(this,arguments);var that=this;var singletonAlreadyInSwipeMode=false;var transitionHandler={};this.registerTransitionHandler=function(transitionName,oTransitionHandler){transitionHandler[transitionName]=oTransitionHandler;};this.getTransitionHandler=function(transitionName){return transitionHandler[transitionName];};this.create=function(oChainedControl,oControlProperties,oComponentProperties){var id=oControlProperties.id;var oPagebook=new sap.zen.components.Pagebook(id);PdfHelper.attachPdfExportCommands.call(oPagebook,that,oControlProperties,renderExportToPdfContent);init(oPagebook,oControlProperties,oComponentProperties,true);return oPagebook;};this.createAndAdd=function(oChainedControl,oControlProperties,oComponentProperties,fAppendToParentFunclet,iIndex){var id=oControlProperties.id;var oPagebook=new sap.zen.components.Pagebook(id);init(oPagebook,oControlProperties,oComponentProperties,true,fAppendToParentFunclet,iIndex);dispatcher.updateComponentProperties(oPagebook,oComponentProperties,fAppendToParentFunclet);return oPagebook;};this.update=function(oControl,oControlProperties,oComponentProperties){init(oControl,oControlProperties,oComponentProperties,false);return oControl;};function init(oPagebook,oControlProperties,oComponentProperties,initial,fAppendToParentFunclet,iIndex){if(oControlProperties){var bPDFExport=oControlProperties.ExportToPdf;var bIsPDFExportInProgress=oPagebook.ExportToPdf;if(bIsPDFExportInProgress&&bPDFExport){oPagebook._isPDFExportInProgress=true;}else{oPagebook.ExportToPdf=bPDFExport;oPagebook.ExportToPdfCloningRequired=oControlProperties.ExportToPdfCloningRequired;oPagebook.ExportToPdfDelayedFinalizationRequired=oControlProperties.ExportToPdfDelayedFinalizationRequired;}oPagebook.setIndexWasSetByScript(oControlProperties.indexWasSetByScript);oPagebook.setScriptWillBeExecuted(oControlProperties.scriptWillBeExecuted);oPagebook.setCachingMode(oControlProperties.cachingmode);oPagebook.setSelectedIndex(oControlProperties.selectedpageindex,false,oControlProperties.content.length);if(typeof oPagebook.getTransitionHandler()=="undefined"){oPagebook.setTransitionHandler(transitionHandler);}if(oControlProperties.transitioneffect!=oPagebook.getTransitionEffect()){oPagebook.setTransitionEffect(oControlProperties.transitioneffect);}if(oControlProperties.transitiondirection!=oPagebook.getTransitionDirection()){oPagebook.setTransitionDirection(oControlProperties.transitiondirection);}if(oControlProperties.showpageindicator!=oPagebook.getShowPageIndicator()){oPagebook.setShowPageIndicator(oControlProperties.showpageindicator);}if(oControlProperties.enabled!=null){oPagebook.setEnableGestures(oControlProperties.enabled);}else{oPagebook.setEnableGestures(true);}if(oControlProperties.enableswiping!=oPagebook.getEnableGestures()){oPagebook.setEnableGestures(oControlProperties.enableswiping);}if(fAppendToParentFunclet){fAppendToParentFunclet(oPagebook,iIndex,oComponentProperties);}var aChildren=oControlProperties.content;if(aChildren){that.updateChildren(aChildren,oPagebook,function(oPage,i){oPagebook.insertPage(oPage,i);},function(oPageToDelete){oPagebook.removePage(oPageToDelete);},function(){PdfHelper.performExportToPDF(oPagebook,oControlProperties);});}if(oControlProperties.command){var f=function(oParams){var index=oParams.index;if(oParams.oPagebook.getCachingMode()==="all"&&!oParams.oPagebook.getScriptWillBeExecuted()&&!oParams.oPagebook.getIndexWasSetByScript()){var command=that.prepareCommand(oControlProperties.command,"__KEY__",index);eval(command);}else{if(index!=oControlProperties.selectedpageindex){var command=that.prepareCommand(oControlProperties.command,"__KEY__",index);eval(command);}}};oPagebook.zenfs=f;}}}function createAndAttach(oComponentProperties){var oNewControl=dispatcher.dispatchCreateControl(oComponentProperties);return oNewControl;}function renderExportToPdfContent(){var aPages=this.getPages();var aPageAndContent=_.map(aPages,function(page){page.getExportContent=function(){return page;};return page;});PdfHelper.renderExportToPdfContent.call(this,aPageAndContent,".sapMCrslInner");}this.applyForChildren=function(oPagebook,fFunclet){var children=oPagebook.getPages();for(var i=0;i<children.length;i++){var oControl=children[i];if(oControl){fFunclet(oControl);}}};this.getType=function(){return"pagebook";};this.getDecorator=function(){return"GroupDecorator";};};var result=new PagebookHandler();for(var i=0;i<transitions.length;i++){var transition=transitions[i];result.registerTransitionHandler(transition.getType(),transition);}sap.zen.PagebookHandler={};sap.zen.PagebookHandler.instance=result;return result;});define("zen.rt.components.pagebook/resources/js/page_handler",["sap/zen/basehandler","zen.rt.components.pagebook/resources/js/page"],function(BaseHandler,transitions){var dispatcher=BaseHandler.dispatcher;var PageHandler=function(){sap.zen.BaseHandler.apply(this,arguments);var dispatcher=BaseHandler.dispatcher;var that=this;this.createAndAdd=function(oChainedControl,oControlProperties,oComponentProperties,fAppendToParentFunclet,oArgForFunclet){var id=oControlProperties.id;jQuery.sap.log.debug("createAndAddPage",id,"pagebook");var oControl=new sap.zen.components.Page(id);fAppendToParentFunclet(oControl,oArgForFunclet);init(oControl,oControlProperties,oComponentProperties);return oControl;};this.updateComponent=function(oControl,oControlProperties,oComponentProperties,fAppendToParentFunclet){if(oControlProperties){var id=oControlProperties.id;jQuery.sap.log.debug("updateComponent",id,"pagebook");init(oControl,oControlProperties,oComponentProperties);}return oControl;};function init(oControl,oControlProperties,oComponentProperties){if(oControlProperties){oControl.ExportToPdf=oControlProperties.ExportToPdf;var oAbsLayout=oControl;var aChildren=oControlProperties.content;oAbsLayout.setPageRenderingStatusPromise($.Deferred());var iChildrenCount=oControlProperties.childrenCount;if(aChildren){var zenAfterUpdateChildren=function(){setTimeout(function(){if(iChildrenCount===oAbsLayout.getContent().length){oAbsLayout.setPageRenderingDone();}},0);};that.updateChildren(aChildren,oControl,function(oNewControl,iIndex,componentData){if(componentData){var args=dispatcher.createAbsoluteLayoutInfo(componentData);var width=dispatcher.calcWidthUseOrderOfPriority(args.left,args.right,componentData.width);var height=dispatcher.calcHeightUseOrderOfPriority(args.top,args.bottom,componentData.height);dispatcher.setWidthHeight(oNewControl,width,height);}dispatcher.insertIntoAbsoluteLayoutContainer(oAbsLayout,oNewControl,iIndex);},function(oControlToRemove){oAbsLayout.removeContent(oControlToRemove);},zenAfterUpdateChildren);oControl.zenPageUpdated=true;}if(oControlProperties.onloaded){setTimeout(function(){eval(oControlProperties.onloaded);},1);}}}this.applyForChildren=function(oPage,fFunclet){var children=oPage.getContent();for(var i=0;i<children.length;i++){var oControl=children[i];if(oControl){fFunclet(oControl);}}};var super_remove=this.remove;this.remove=function(oPage){var anchor=oPage.zenAnchor;super_remove.call(this,oPage);$("#"+anchor).remove();};this.getType=function(){return"page";};this.getDecorator=function(){return"PageDecorator";};};var result=new PageHandler();return result;});define("zen.rt.components.pagebook/resources/js/transitionhandler",[],function(){var c=function(){this.switchPage=function(g){};this.getInnerContainerStyle=function(g){return"";};this.getPageContainerStyle=function(g){return{};};this.getPageBookContainerStyle=function(g){return[];};this.initSwipe=function(g){};this.moveSwipe=function(g){};this.endSwipe=function(g){};this.getType=function(){return"base";};};var b=function(){c.apply(this,arguments);this.switchPage=function(g){if(g.newPage!==g.oldPage){$(g.newPage).css("left",0);$(g.oldPage).css("left","-10000px");}};this.getInnerContainerStyle=function(g){return"overflow:hidden;";};this.getPageContainerStyle=function(g){if(g.isCurrentPage==true){return{};}return{left:"-10000px"};};this.endSwipe=function(g){this.switchPage(g);var h={index:g.newPageIndex,oPagebook:g.oPagebook};g.oPagebook.zenfs(h);};this.getType=function(){return"none";};};var d=function(){c.apply(this,arguments);function j(l,m,k){var n=$(l);if(k){$(n).animate({left:m+"px",top:"0px"});}else{$(n).css({left:m+"px",top:"0px"});}}function g(l){var k=$(l);k.css({"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","transform-style":"preserve-3d"});}function h(l){var k=$(l);k.css({"-webkit-transform-style":"","-moz-transform-style":"","-ms-transform-style":"","transform-style":""});}this.resetTransform=function(n,k,m){var l=$(n);if(l.hasClass("zenTransitionFlip")){l.removeClass("zenTransitionFlip");}if(!l.hasClass("zenTransitionNo")){l.addClass("zenTransitionNo");}l.css({top:m+"px",left:k+"px","-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""});};this.getPageContainerStyle=function(l){var k;if(l.isCurrentPage){k={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)",transform:"rotateY(0deg)",left:"0px"};}else{k={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"rotateY(180deg)","-moz-transform":"rotateY(180deg)","-ms-transform":"rotateY(180deg)",transform:"rotateY(180deg)",left:"-10000px"};}return k;};this.switchPage=function(l){var p=0;var m=0;g("#"+l.innerContainerId);if(l.isHorizontalDirection===true){m=180;}else{p=180;}for(var k=0;k<l.invisiblePages.length;k++){j(l.invisiblePages[k],-10000,false);i(l.invisiblePages[k],p,m,false);}this.recursiveInit(l.oldPage);this.recursiveInit(l.newPage);j(l.newPage,0,false);i(l.newPage,(l.factor*p),(l.factor*m),false);var o=this;var n=function(){j(l.prevPageOther,-10000,false);i(l.prevPageOther,p,m,false);j(l.nextPageOther,-10000,false);i(l.nextPageOther,p,m,false);o.resetTransform(l.newPage,0,0);o.resetTransform("#"+l.innerContainerId,0,0);h("#"+l.innerContainerId);};i("#"+l.innerContainerId,-(l.factor*p),-(l.factor*m),l.animated);if(l.animated){setTimeout(function(){j(l.oldPage,-10000,false);i(l.oldPage,p,m,false);},250);var q=$("#"+l.innerContainerId);q.unbind("transitionend webkitTransitionEnd MSTransitionEnd");q.bind("transitionend webkitTransitionEnd MSTransitionEnd",function(){$(this).unbind("transitionend webkitTransitionEnd MSTransitionEnd");n();});}else{n();}};this.moveSwipe=function(k){var m=0;var l=0;if(k.isHorizontalDirection===true){l=180;}else{m=180;}j(k.prevPage,0,false);j(k.nextPage,0,false);i(k.prevPage,m,l,false);i(k.nextPage,-m,-l,false);this.recursiveInit(k.prevPage);this.recursiveInit(k.nextPage);g("#"+k.innerContainerId);if(k.isHorizontalDirection===true){l=(k.totalDx/k.w)*180;if(k.totalDx>0){j(k.prevPage,0,false);j(k.nextPage,-10000,false);}else{j(k.prevPage,-10000,false);j(k.nextPage,0,false);}}else{m=-(k.totalDy/k.h)*180;if(k.totalDy>0){j(k.prevPage,0,false);j(k.nextPage,-10000,false);}else{j(k.prevPage,-10000,false);j(k.nextPage,0,false);}}i("#"+k.innerContainerId,m,l,false);};this.initSwipe=function(l){var n=0;var m=0;if(l.isHorizontalDirection===true){m=180;}else{n=180;}for(var k=0;k<l.invisiblePages.length;k++){j(l.invisiblePages[k],-10000,false);i(l.invisiblePages[k],n,m,false);}};this.recursiveInit=function(l){var k=this;$(l).children().each(function(){$(this).css({"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden"});k.recursiveInit(this);});};this.endSwipe=function(l){var n=0;var q=0;var k=0;if(l.isHorizontalDirection==true){if(l.oPagebook.getSelectedIndex()!=l.newPageIndex){if(l.totalDx>0){n=180;k=-1;}else{n=-180;k=1;}}}else{if(l.oPagebook.getSelectedIndex()!=l.newPageIndex){if(l.totalDy>0){q=-180;k=-1;}else{q=180;k=1;}}}var p=this;var o=function(s){if(s===0){i(l.prevPage,q,n,false);i(l.nextPage,q,n,false);j(l.prevPage,-10000,false);j(l.nextPage,-10000,false);p.resetTransform(l.actualPage,0,0);}else{if(s<0){i(l.actualPage,q,n,false);i(l.nextPage,q,n,false);j(l.actualPage,-10000,false);j(l.nextPage,-10000,false);p.resetTransform(l.prevPage,0,0);}else{i(l.prevPage,q,n,false);i(l.actualPage,q,n,false);j(l.prevPage,-10000,false);j(l.actualPage,-10000,false);p.resetTransform(l.nextPage,0,0);}}p.resetTransform("#"+l.innerContainerId,0,0);h("#"+l.innerContainerId);};i("#"+l.innerContainerId,q,n,true);var r=$("#"+l.innerContainerId);if(l.oldPage!==l.newPage){setTimeout(function(){j(l.oldPage,-10000,false);i(l.oldPage,q,n,false);},250);}r.unbind("transitionend webkitTransitionEnd MSTransitionEnd");r.bind("transitionend webkitTransitionEnd MSTransitionEnd",function(){$(this).unbind("transitionend webkitTransitionEnd MSTransitionEnd");o(k);});var m={index:l.newPageIndex,oPagebook:l.oPagebook};l.oPagebook.zenfs(m);};function i(o,n,k,m){var l=$(o);if(m){if(l.hasClass("zenTransitionNo")){l.removeClass("zenTransitionNo");}if(!l.hasClass("zenTransitionFlip")){l.addClass("zenTransitionFlip");}l.css({"-webkit-transform":"rotateX("+n+"deg) rotateY("+k+"deg)","-moz-transform":"rotateX("+n+"deg) rotateY("+k+"deg)","-ms-transform":"rotateX("+n+"deg) rotateY("+k+"deg)",transform:"rotateX("+n+"deg) rotateY("+k+"deg)"});}else{if(l.hasClass("zenTransitionFlip")){l.removeClass("zenTransitionFlip");}if(!l.hasClass("zenTransitionNo")){l.addClass("zenTransitionNo");}l.css({"-webkit-transform":"rotateX("+n+"deg) rotateY("+k+"deg)","-moz-transform":"rotateX("+n+"deg) rotateY("+k+"deg)","-ms-transform":"rotateX("+n+"deg) rotateY("+k+"deg)",transform:"rotateX("+n+"deg) rotateY("+k+"deg)"});}}this.getType=function(){return"flip";};};var e=function(){c.apply(this,arguments);function g(i,j){if(i.oldPage!==i.newPage){var h=$(i.oldPage);h.animate({opacity:"0"},500,function(){if(j){j();}var k=$(i.newPage);k.css({opacity:"0"});k.css("left",0);k.animate({opacity:"1"},500);h.css("left",-10000);});}}this.switchPage=function(h){g(h);};this.endSwipe=function(h){g(h,function(){h.oPagebook.zenfs({index:h.newPageIndex,oPagebook:h.oPagebook});});};this.getInnerContainerStyle=function(h){return"overflow:hidden;";};this.getPageContainerStyle=function(h){if(h.isCurrentPage==true){return{};}return{left:"-10000px"};};this.getType=function(){return"fade";};};var a=function(){c.apply(this,arguments);var g=jQuery.support.cssTransforms3d;function l(n,o,m){var p=$(n);if(m==true){$(p).animate({left:o+"px",top:"0px"});}else{$(p).css({left:o+"px",top:"0px"});}}function i(n,o,m){var p=$(n);if(m==true){$(p).animate({top:o+"px",left:"0px"});}else{$(p).css({top:o+"px",left:"0px"});}}function k(n,m,q,p){if(n){var o=$(n);if(p){if(o.hasClass("zenTransitionNo")){o.removeClass("zenTransitionNo");}if(!o.hasClass("zenTransitionSlidein")){o.addClass("zenTransitionSlidein");}}else{if(o.hasClass("zenTransitionSlidein")){o.removeClass("zenTransitionSlidein");}if(!o.hasClass("zenTransitionNo")){o.addClass("zenTransitionNo");}}o.css({"-webkit-transform":"translate3d("+m+"px,  "+q+"px,  0px)","-moz-transform":"translate3d("+m+"px,  "+q+"px,  0px)","-ms-transform":"translate3d("+m+"px,  "+q+"px,  0px)",transform:"translate3d("+m+"px,  "+q+"px,  0px)"});}}function h(p){var q=p.oPagebook;var o=navigator.userAgent.toLowerCase();if(o.indexOf("safari/")!==-1&&o.indexOf("chrome/")===-1&&jQuery.device.is.desktop){var n=q.getPages()[q.getSelectedIndex()-1];var m=q.getPages()[q.getSelectedIndex()+1];if(n){n.invalidate();}if(m){m.invalidate();}}}this.resetTransform=function(p,m,o){if(g){k(p,m,o,false);}else{var n=$(p);if(n.hasClass("zenTransitionSlidein")){n.removeClass("zenTransitionSlidein");}if(!n.hasClass("zenTransitionNo")){n.addClass("zenTransitionNo");}n.css({top:o+"px",left:m+"px","-webkit-transform":"","-moz-transform":"","-ms-transform":"",transform:""});}};this.resetTransformAfterTransition=function(p,m,o){var n=this;$(p).bind("transitionend webkitTransitionEnd MSTransitionEnd",function(){$(this).unbind("transitionend webkitTransitionEnd MSTransitionEnd");n.resetTransform(p,m,o);});};function j(m){$("#"+m.innerContainerId).bind("transitionend webkitTransitionEnd MSTransitionEnd",function(){$(this).unbind("transitionend webkitTransitionEnd MSTransitionEnd");if(m.moved&&m.newIndex!==m.oldIndex){k(m.oldPage,-10000,0,false);}if(!m.moved){k(m.prevPage,-10000,0,false);k(m.nextPage,-10000,0,false);}else{if(m.isHorizontalDirection){if(m.totalDx>0){k(m.actualPage,-10000,0,false);k(m.nextPage,-10000,0,false);}else{k(m.prevPage,-10000,0,false);k(m.actualPage,-10000,0,false);}}else{if(m.totalDy>0){k(m.actualPage,-10000,0,false);k(m.nextPage,-10000,0,false);}else{k(m.prevPage,-10000,0,false);k(m.actualPage,-10000,0,false);}}}});}this.switchPage=function(o){h(o);for(var n=0;n<o.invisiblePages.length;n++){if(g){k(o.invisiblePages[n],-10000,0,false);}else{l(o.invisiblePages[n],-10000,0,false);}}if(o.isHorizontalDirection==true){if(g){var q=o.oPagebook.getPages()[o.oldIndex];k(o.prevPageOther,-10000,0,false);k(o.nextPageOther,-10000,0,false);k(o.newPage,(-o.oPagebook.x)+(o.factor*o.w),0,false);if(o.animated==true){$("#"+o.innerContainerId).unbind("transitionend webkitTransitionEnd MSTransitionEnd");o.moved=true;j(o);var m=o.oPagebook.x+(-o.factor*o.w);k("#"+o.innerContainerId,m,0,true);o.oPagebook.x=m;}else{if(q){k(o.oldPage,(-o.factor*o.w),0,false);}k(o.newPage,0,0,false);}}else{var p=o.oldPage;if(o.newIndex===o.oldIndex){if(o.factor>0){p=o.nextPageOther;}else{p=o.prevPageOther;}}l(o.newPage,o.factor*o.w,false);l(p,-o.factor*o.w,o.animated);l(o.newPage,0,o.animated);l(p,-10000,false);l(o.nextPageOther,-10000,false);l(o.prevPageOther,-10000,false);}}else{if(g){var q=o.oPagebook.getPages()[o.oldIndex];k(o.newPage,0,(-o.oPagebook.y)+(o.factor*o.h),false);if(o.animated==true){$("#"+o.innerContainerId).unbind("transitionend webkitTransitionEnd MSTransitionEnd");o.moved=true;j(o);var r=o.oPagebook.y+(-o.factor*o.h);k("#"+o.innerContainerId,0,r,true);o.oPagebook.y=r;}else{if(q){k(o.oldPage,0,(-o.factor*o.h),false);}k(o.newPage,0,(-o.factor*o.h),false);}}else{var p=o.oldPage;if(o.newIndex===o.oldIndex){if(o.factor>0){p=o.nextPageOther;}else{p=o.prevPageOther;}}i(o.newPage,o.factor*o.h,false);i(p,-o.factor*o.h,o.animated);i(o.newPage,0,o.animated);l(p,-10000,false);l(o.nextPageOther,-10000,false);l(o.prevPageOther,-10000,false);}}};this.getInnerContainerStyle=function(m){return"top:0px;left:0px;";};this.getPageContainerStyle=function(m){if(m.isCurrentPage==true){return{};}if(g){return{"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"translate3d(-10000px,  0px,  0px)","-moz-transform":"translate3d(-10000px,  0px,  0px)","-ms-transform":"translate3d(-10000px,  0px,  0px)",transform:"translate3d(-10000px,  0px,  0px)",left:"0px"};}else{return{left:"-10000px",top:"0px"};}};this.getPageBookContainerStyle=function(m){m.oPagebook.x=0;m.oPagebook.y=0;return[{overflow:"hidden"}];};this.initSwipe=function(o){h(o);for(var n=0;n<o.invisiblePages.length;n++){if(g){k(o.invisiblePages[n],-10000,0,false);}else{l(o.invisiblePages[n],-10000,0,false);}}var m=$("#"+o.innerContainerId);if(o.isHorizontalDirection){if(g){m.unbind("transitionend webkitTransitionEnd MSTransitionEnd");k(o.prevPage,(-o.oPagebook.x)-o.w,0,false);k(o.nextPage,(-o.oPagebook.x)+o.w,0,false);}else{if(o.oPagebook.swipeCleanup){clearTimeout(o.oPagebook.swipeCleanup);delete o.oPagebook.swipeCleanup;}this.resetTransform(o.actualPage,0,0);this.resetTransform(o.prevPage,-o.w,0);this.resetTransform(o.nextPage,o.w,0);}}else{if(g){m.unbind("transitionend webkitTransitionEnd MSTransitionEnd");k(o.prevPage,0,(-o.oPagebook.y)-o.h,false);k(o.nextPage,0,(-o.oPagebook.y)+o.h,false);}else{if(o.oPagebook.swipeCleanup){clearTimeout(o.oPagebook.swipeCleanup);delete o.oPagebook.swipeCleanup;}this.resetTransform(o.actualPage,0,0);this.resetTransform(o.prevPage,0,-o.h);this.resetTransform(o.nextPage,0,o.h);}}};this.moveSwipe=function(q){if(g){if(q.isHorizontalDirection){var n=q.oPagebook.x+q.totalDx;k("#"+q.innerContainerId,n,0,false);}else{var t=q.oPagebook.y+q.totalDy;k("#"+q.innerContainerId,0,t,false);}}else{var o=$(q.prevPage);var p=$(q.actualPage);var m=$(q.nextPage);if(q.isHorizontalDirection){var s=parseInt(o.css("left"),10);o.css("left",s+q.dx);s=parseInt(p.css("left"),10);p.css("left",s+q.dx);s=parseInt(m.css("left"),10);m.css("left",s+q.dx);}else{var r=parseInt(o.css("top"),10);o.css("top",r+q.dy);r=parseInt(p.css("top"),10);p.css("top",r+q.dy);r=parseInt(m.css("top"),10);m.css("top",r+q.dy);}}};this.endSwipe=function(o){if(o.isHorizontalDirection){if(g){var n=0;o.moved=false;if(o.oPagebook.getSelectedIndex()!=o.newPageIndex){if(o.totalDx>0){n=o.w;}else{n=-o.w;}o.moved=true;}j(o);var m=o.oPagebook.x+n;k("#"+o.innerContainerId,m,0,true);o.oPagebook.x=m;}else{if(o.oPagebook.getSelectedIndex()===o.newPageIndex){l(o.prevPage,-o.w,true);l(o.actualPage,0,true);l(o.nextPage,o.w,true);o.oPagebook.swipeCleanup=setTimeout(function(){delete o.oPagebook.swipeCleanup;l(o.prevPage,-10000,false);l(o.nextPage,-10000,false);},1000);}else{if(o.totalDx>0){l(o.prevPage,0,true);l(o.actualPage,o.w,true);l(o.nextPage,2*o.w,true);o.oPagebook.swipeCleanup=setTimeout(function(){delete o.oPagebook.swipeCleanup;l(o.actualPage,-10000,false);l(o.nextPage,-10000,false);},1000);}else{l(o.prevPage,-2*o.w,true);l(o.actualPage,-o.w,true);l(o.nextPage,0,true);o.oPagebook.swipeCleanup=setTimeout(function(){delete o.oPagebook.swipeCleanup;l(o.prevPage,-10000,false);l(o.actualPage,-10000,false);},1000);}}}}else{if(g){var n=0;o.moved=false;if(o.oPagebook.getSelectedIndex()!=o.newPageIndex){if(o.totalDy>0){n=o.h;}else{n=-o.h;}o.moved=true;}j(o);var q=o.oPagebook.y+n;k("#"+o.innerContainerId,0,q,true);o.oPagebook.y=q;}else{if(o.oPagebook.getSelectedIndex()===o.newPageIndex){i(o.prevPage,-o.h,true);i(o.actualPage,0,true);i(o.nextPage,o.h,true);o.oPagebook.swipeCleanup=setTimeout(function(){delete o.oPagebook.swipeCleanup;l(o.prevPage,-10000,false);l(o.nextPage,-10000,false);},1000);}else{if(o.totalDy>0){i(o.prevPage,0,true);i(o.actualPage,o.h,true);i(o.nextPage,2*o.h,true);o.oPagebook.swipeCleanup=setTimeout(function(){delete o.oPagebook.swipeCleanup;l(o.actualPage,-10000,false);l(o.nextPage,-10000,false);},1000);}else{i(o.prevPage,-2*o.h,true);i(o.actualPage,-o.h,true);i(o.nextPage,0,true);o.oPagebook.swipeCleanup=setTimeout(function(){delete o.oPagebook.swipeCleanup;l(o.prevPage,-10000,false);l(o.actualPage,-10000,false);},1000);}}}}var p={index:o.newPageIndex,oPagebook:o.oPagebook};o.oPagebook.zenfs(p);};this.getType=function(){return"slide_in";};};var f=function(){c.apply(this,arguments);function h(m){var l=$(m);l.css({"-webkit-transform-style":"preserve-3d","-moz-transform-style":"preserve-3d","-ms-transform-style":"preserve-3d","transform-style":"preserve-3d"});}function i(m){var l=$(m);l.css({"-webkit-transform-style":"","-moz-transform-style":"","-ms-transform-style":"","transform-style":""});}this.resetTransform=function(n,m,p,l,q){$(p).css({top:q+"px",left:l+"px","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-transform":"",});var o=$("#"+m);if(o.hasClass("zenTransitionCube")){o.removeClass("zenTransitionCube");}if(!o.hasClass("zenTransitionNo")){o.addClass("zenTransitionNo");}o.css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-transform":""});};this.getInnerContainerStyle=function(l){return"";};this.getPageContainerStyle=function(m){if(m.isCurrentPage==true){return{"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden","-webkit-transform":"rotateY(0deg)","-moz-transform":"rotateY(0deg)","-ms-transform":"rotateY(0deg)",transform:"rotateY(0deg)",left:"0px"};}var l={"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden",visibility:"hidden","-webkit-transform":"rotateY(180deg)","-moz-transform":"rotateY(180deg)","-ms-transform":"rotateY(180deg)",transform:"rotateY(180deg)",left:"0px"};return l;};function g(m,q,l,p,n){var o=$("#"+m);if(n==true){if(o.hasClass("zenTransitionNo")){o.removeClass("zenTransitionNo");}if(!o.hasClass("zenTransitionCube")){o.addClass("zenTransitionCube");}}else{if(o.hasClass("zenTransitionCube")){o.removeClass("zenTransitionCube");}if(!o.hasClass("zenTransitionNo")){o.addClass("zenTransitionNo");}}o.css({"-webkit-transform":"translateZ("+q+"px) rotateX("+l+"deg) rotateY("+p+"deg)","-moz-transform":"translateZ("+q+"px) rotateX("+l+"deg) rotateY("+p+"deg)","-ms-transform":"translateZ("+q+"px) rotateX("+l+"deg) rotateY("+p+"deg)","-transform":"translateZ("+q+"px) rotateX("+l+"deg) rotateY("+p+"deg)"});}function k(o,q,l,p,n){var m=$(o);if(n==true){if(m.hasClass("zenTransitionNo")){m.removeClass("zenTransitionNo");}if(!m.hasClass("zenTransitionCube")){m.addClass("zenTransitionCube");}}else{if(m.hasClass("zenTransitionCube")){m.removeClass("zenTransitionCube");}if(!m.hasClass("zenTransitionNo")){m.addClass("zenTransitionNo");}}m.css({"-webkit-transform":"rotateX("+l+"deg) rotateY("+p+"deg) translateZ("+q+"px)","-moz-transform":"rotateX("+l+"deg) rotateY("+p+"deg) translateZ("+q+"px)","-ms-transform":"rotateX("+l+"deg) rotateY("+p+"deg) translateZ("+q+"px)","-transform":"rotateX("+l+"deg) rotateY("+p+"deg) translateZ("+q+"px)"});}function j(o,l,p,n){var m=$(o);if(n==true){if(m.hasClass("zenTransitionNo")){m.removeClass("zenTransitionNo");}if(!m.hasClass("zenTransitionCube")){m.addClass("zenTransitionCube");}}else{if(m.hasClass("zenTransitionCube")){m.removeClass("zenTransitionCube");}if(!m.hasClass("zenTransitionNo")){m.addClass("zenTransitionNo");}}m.css({"-webkit-transform":"rotateX("+l+"deg) rotateY("+p+"deg)","-moz-transform":"rotateX("+l+"deg) rotateY("+p+"deg)","-ms-transform":"rotateX("+l+"deg) rotateY("+p+"deg)","-transform":"rotateX("+l+"deg) rotateY("+p+"deg)"});}this.switchPage=function(m){var q=this;h("#"+m.innerContainerId);for(var l=0;l<m.invisiblePages.length;l++){$(m.invisiblePages[l]).css({visibility:"hidden"});}var p=function(){if(m.newIndex!==m.oldIndex){$(m.oldPage).css({visibility:"hidden"});j(m.oldPage,0,180,false);}if(m.prevPageOther&&m.prevPageOther!==m.newPage){$(m.prevPageOther).css({visibility:"hidden"});j(m.prevPageOther,0,180,false);}if(m.nextPageOther&&m.nextPageOther!==m.newPage){$(m.nextPageOther).css({visibility:"hidden"});j(m.nextPageOther,0,180,false);}q.resetTransform(m.oPagebook,m.innerContainerId,m.newPage,0,0);i("#"+m.innerContainerId);};var o=0;var n=0;if(m.isHorizontalDirection){n=(-m.factor*90);}else{o=(-m.factor*90);}k(m.oldPage,(m.w/2),0,0,false);g(m.innerContainerId,(-m.w/2),0,0,false);k(m.newPage,(m.w/2),o,-n,false);$(m.newPage).css({visibility:"visible"});g(m.innerContainerId,(-m.w/2),-o,n,m.animated);if(m.animated===true){var r=$("#"+m.innerContainerId);r.unbind("transitionend webkitTransitionEnd MSTransitionEnd");r.bind("transitionend webkitTransitionEnd MSTransitionEnd",function(){$(this).unbind("transitionend webkitTransitionEnd MSTransitionEnd");p();});}else{p();}};this.initSwipe=function(m){var n=0;var o=0;h("#"+m.innerContainerId);for(var l=0;l<m.invisiblePages.length;l++){$(m.invisiblePages[l]).css({visibility:"hidden"});}if(m.isHorizontalDirection){n=90;}else{o=90;}k(m.prevPage,(m.w/2),o,-n,false);k(m.nextPage,(m.w/2),-o,n,false);$(m.prevPage).css({visibility:"visible"});$(m.nextPage).css({visibility:"visible"});k(m.actualPage,(m.w/2),0,0,false);g(m.innerContainerId,(-m.w/2),0,0,false);};this.moveSwipe=function(l){var n=0;var m=0;if(l.isHorizontalDirection==true){m=(l.totalDx/l.w)*90;}else{n=-(l.totalDy/l.h)*90;}g(l.innerContainerId,(-l.w/2),n,m,false);};this.endSwipe=function(m){var o=0;var r=0;var l=0;if(m.isHorizontalDirection==true){if(m.oPagebook.getSelectedIndex()!=m.newPageIndex){if(m.totalDx>0){o=90;l=-1;}else{o=-90;l=1;}}}else{if(m.oPagebook.getSelectedIndex()!=m.newPageIndex){if(m.totalDy>0){r=-90;l=-1;}else{r=90;l=1;}}}var q=this;var p=function(t){if(t==0){$(m.prevPage).css({visibility:"hidden"});$(m.nextPage).css({visibility:"hidden"});j(m.prevPage,0,180,false);j(m.nextPage,0,180,false);q.resetTransform(m.oPagebook,m.innerContainerId,m.actualPage,0,0);}else{if(t<0){$(m.actualPage).css({visibility:"hidden"});$(m.nextPage).css({visibility:"hidden"});j(m.actualPage,0,180,false);j(m.nextPage,0,180,false);q.resetTransform(m.oPagebook,m.innerContainerId,m.prevPage,0,0);}else{$(m.prevPage).css({visibility:"hidden"});$(m.actualPage).css({visibility:"hidden"});j(m.prevPage,0,180,false);j(m.actualPage,0,180,false);q.resetTransform(m.oPagebook,m.innerContainerId,m.nextPage,0,0);}}i("#"+m.innerContainerId);};g(m.innerContainerId,(-m.w/2),r,o,true);var s=$("#"+m.innerContainerId);s.unbind("transitionend webkitTransitionEnd MSTransitionEnd");s.bind("transitionend webkitTransitionEnd MSTransitionEnd",function(){$(this).unbind("transitionend webkitTransitionEnd MSTransitionEnd");p(l);});var n={index:m.newPageIndex,oPagebook:m.oPagebook};m.oPagebook.zenfs(n);};this.getType=function(){return"cube";};};return[new b(),new d(),new e(),new a(),new f()];});define("zen.rt.components.filterpanel/resources/js/navigationpanel_handler",["sap/zen/basehandler"],function(c){var b=function(){var h=this;var i;var d;var f;var g;var e;c.apply(this,arguments);this.createSplitter=function(j){var k;if(sap.zen.Dispatcher.instance.isMainMode()){k=new sap.ui.layout.Splitter();if(j.splitterOrientation==="Horizontal"){k.setOrientation(sap.ui.core.Orientation.Vertical);}k.addFirstPaneContent=function(l){k.addContentArea(l);};k.addSecondPaneContent=function(l){k.addContentArea(l);};}else{k=new sap.ui.commons.Splitter(j);}return k;};this.createMainPanel=function(j){var l,k;if(sap.zen.Dispatcher.instance.isMainMode()){l=new sap.m.NavContainer(j,{autoFocus:false}).addStyleClass("zenNavigationPanelM");k=this.createPanel({});l.addPage(k);l.setTop=function(m){k.setTop(m);};l.setCenter=function(m){k.setCenter(m);};l.destroyTop=function(){l.getPages()[0].destroySubHeader();};l.destroyCenter=function(){l.getPages()[0].destroyContent();};}else{l=new sap.ui.commons.layout.BorderLayout(j).addStyleClass("zenNavigationPanel");}return l;};this.createPanel=function(j){var k;if(sap.zen.Dispatcher.instance.isMainMode()){if(jQuery.type(j)==="string"){k=new sap.m.Page(j);}else{k=new sap.m.Page();}k.setShowHeader(false);k.setTop=function(l){k.setSubHeader(l);};k.setCenter=function(m){var n=m.content;if(n){for(var l=0;l<n.length;l++){k.addContent(n[l]);}}};if(j.top){k.setTop(j.top);}if(j.center){k.setCenter(j.center);}k.addEventDelegate({onAfterRendering:function(){var l=k.$();if(l.closest(".sapUiSizeCompact").length===0&&l.children("header").length>0){l.children("section").css("top","3rem");}}});}else{k=new sap.ui.commons.layout.BorderLayout(j);}return k;};this.createTopArea=function(l){var j;if(sap.zen.Dispatcher.instance.isMainMode()){j=new sap.m.Toolbar();var m=l.content;if(l.contentAlign==="right"){j.addContent(new sap.m.ToolbarSpacer());}if(m){for(var k=0;k<m.length;k++){j.addContent(m[k]);}}}else{j=new sap.ui.commons.layout.BorderLayoutArea(l);}return j;};this.createCenterArea=function(k){var j;if(sap.zen.Dispatcher.instance.isMainMode()){j={content:k.content?k.content:[],addContent:function(l){this.content.push(l);}};}else{j=new sap.ui.commons.layout.BorderLayoutArea(k);}return j;};this.createSearchField=function(j){var k;if(sap.zen.Dispatcher.instance.isMainMode()){k=new sap.m.SearchField();k.setWidth(j.width);k.attachLiveChange(j.suggest);}else{k=new sap.ui.commons.SearchField(j);}return k;};this.createText=function(k){var j;if(sap.zen.Dispatcher.instance.isMainMode()){if(k&&k.design){delete k.design;}j=new sap.m.Title(k);}else{j=new sap.ui.commons.TextView(k);}return j;};this.createLabel=function(j){var k;if(sap.zen.Dispatcher.instance.isMainMode()){if(j&&j.design==="Bold"){delete j.design;delete j.labelFor;k=new sap.m.Title(j);}else{k=new sap.m.Label(j);}}else{k=new sap.ui.commons.Label(j);}return k;};this.createToggleButton=function(j){var k;if(sap.zen.Dispatcher.instance.isMainMode()){k=new sap.m.ToggleButton(j);}else{k=new sap.ui.commons.ToggleButton(j);}return k;};this.createButton=function(j){var k;if(sap.zen.Dispatcher.instance.isMainMode()){k=new sap.m.Button(j);}else{k=new sap.ui.commons.Button(j);}return k;};this.createRowRepeater=function(){var j;if(sap.zen.Dispatcher.instance.isMainMode()){j=new sap.m.List({noDataText:" "});}else{j=new sap.ui.commons.RowRepeater({design:sap.ui.commons.RowRepeaterDesign.BareShell,showMoreSteps:1,noData:new sap.ui.commons.TextView({text:""})});}return j;};this.cloneRowRepeater=function(j){var k=j.clone();return k;};this.getRowRepeaterAggregation=function(){return sap.zen.Dispatcher.instance.isMainMode()?"items":"rows";};this.create=function(R,r,J){var n,m,o=r.property.navigationpanelmode;var B=sap.zen.Dispatcher.instance.isMainMode()?"M":"";$.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-core");$.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-widget");$.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-mouse");$.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-draggable");$.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-droppable");$.sap.require("sap.ui.thirdparty.jqueryui.jquery-ui-sortable");$.sap.require("sap.ui.model.json.JSONModel");sap.zen.Dispatcher.instance.registerUnhandledDropHandler(r.id,this.onUnhandledDrop);sap.zen.Dispatcher.instance.registerDragDropCancelHandler(r.id,this.onEscKeyPressed);var D=new sap.ui.model.json.JSONModel();D.setSizeLimit(Number.MAX_VALUE);if(!r.navigationpanel){r.navigationpanel={};}if(!r.navigationpanel.apply){r.navigationpanel.apply={};}if(!r.navigationpanel.measures){r.navigationpanel.measures={};}r.navigationpanel.apply.ready=false;r.navigationpanel.measures.expanded=false;this.rewriteMeasuresPosition(r);D.setData(r);if(!D.getProperty("/property/pauserefresh")){D.setProperty("/property/pauserefresh",false);}if(R){n=R;n.destroyTop();n.destroyCenter();}else{n=this.createMainPanel(r.id);var I=n.exit;n.exit=function(){if(I){I.apply(n,arguments);}new Function(D.getProperty("/command/destroyfiltercomponent"))();};if(!r.visible&&!this.isDesignModeD4LIncluded(r.id)){n.addStyleClass("zenHideFilterPanel");}}if(o!=="LIST_ONLY"){m=this.createSplitter({splitterOrientation:"Vertical",splitterPosition:"50%",minSizeFirstPane:"30%",minSizeSecondPane:"30%",showScrollBars:false,width:"100%",height:"100%"});}n.setModel(D);var A=this.createRowRepeater();if(!sap.zen.Dispatcher.instance.isMainMode()){A.bindProperty("numberOfRows",{path:"/characteristics/length",mode:sap.ui.model.BindingMode.OneWay,formatter:function(X){var Z=n.getModel();var Y=Z.getProperty("/axis");if(Z.getProperty("/measures")){++X;}if(Y){return Math.max(X,Y.rows.length+Y.columns.length);}return X;}});}A.bindAggregation(this.getRowRepeaterAggregation(),{path:"/characteristics",factory:h.getRowFactory("/characteristic/name","/characteristic/text",function(X){return X;},true)});var H=this.getRowFactory("/entry/name","/entry/name",function(aa){var ac=D.getProperty("/characteristics"),ab;for(var X=0;X<ac.length;X++){ab=ac[X].characteristic;if(ab.name===aa){return ab.text;}}var Y=D.getProperty("/charnames");if(Y){for(var X=0;X<Y.length;X++){ab=Y[X];if(ab.name===aa){return ab.text;}}}var Z=D.getProperty("/measures");if(Z){for(var X=0;X<Z.length;X++){ab=Z[X].characteristic;if(ab.name===aa){return ab.text;}}}return aa;});var K=this.createSearchField({enableListSuggest:false,width:"100%",enableClear:true,startSuggestion:0,suggest:function(X){var Z=sap.zen.Dispatcher.instance.isMainMode()?X.getParameter("newValue"):X.getParameter("value");var Y=new sap.ui.model.Filter("characteristic/text",sap.ui.model.FilterOperator.Contains,Z);A.getBinding(h.getRowRepeaterAggregation()).filter([Y]);}});var N=this.createText({width:"100%",design:"Bold"}).bindProperty("text",{path:"/text/dimensions",mode:sap.ui.model.BindingMode.OneWay,formatter:function(X){if(X){return X.toUpperCase();}return"";}});var j=this.createTopArea({size:"30px",overflowX:"hidden",overflowY:"hidden",content:[K]});var L=this.createCenterArea({overflowX:"hidden",overflowY:"hidden"});var l=this.createPanel({top:this.createTopArea({size:"30px",overflowX:"hidden",overflowY:"hidden",content:[N]}).addStyleClass("zenNavigationPanel-SubHeader").addStyleClass("zenNavigationPanelDimensionHeaderText"),center:this.createCenterArea({content:[A]})}).addStyleClass("zenNavigationPanelDimensionContentArea");if(r.property&&r.property.showmeasuresseparately){var t=this.createSplitter({splitterOrientation:"Horizontal",splitterPosition:"40%",minSizeFirstPane:"20%",minSizeSecondPane:"30%",showScrollBars:false,width:"100%",height:"100%"});var T=new sap.zen.commons.layout.MatrixLayout({widths:["20px","auto"]});var C=this.createRowRepeater();C.bindAggregation(this.getRowRepeaterAggregation(),{path:"/measures",factory:h.getRowFactory("/characteristic/name","/characteristic/text",function(X){if(X){return X.toUpperCase();}return"";},false,function(){T.destroyRows();h.changeTemplate(T,{sPath:"/measures/0",oModel:D},true,true);})});var F=this.createPanel({top:this.createTopArea({size:"30px",overflowX:"hidden",overflowY:"hidden",content:[C]}).addStyleClass("zenNavigationPanel-SubHeader"),center:this.createCenterArea({overflowX:"hidden",content:[T]})}).addStyleClass("zenNavigationPanel-MeasuresPanel");t.addFirstPaneContent(F);t.addSecondPaneContent(l);L.addContent(t);}else{L.addContent(l);}var U=function(){if(!sap.zen.Dispatcher.instance.isMainMode()){var X=this.getTop();if(X){var Y=X.$();Y.css("padding-top","6px").css("padding-left","4px");if(o==="LIST_ONLY"){Y.css("padding-right","4px");}}}};if(o==="LIST_ONLY"){A.onAfterRendering=this.getDimensionsOnAfterRendering(n,A.getId());if(C){C.onAfterRendering=this.getDimensionsOnAfterRendering(n,C.getId());}n.setTop(j);n.setCenter(L);}else{n.setCenter(this.createCenterArea({overflowX:"hidden",overflowY:"hidden",content:[m]}));var x=this.cloneRowRepeater(A);var p=this.cloneRowRepeater(A);A.onAfterRendering=this.getDimensionsOnAfterRendering(n,A.getId(),x.getId(),p.getId());if(C){C.onAfterRendering=this.getDimensionsOnAfterRendering(n,C.getId(),x.getId(),p.getId());}var v=function(){var Y=n.getModel();var X=h.prepareCommand(Y.getProperty("/command/submitonlyfilter"),"__STRING__",JSON.stringify({filters:[],axis:Y.getProperty("/axis")}));X=h.prepareCommand(X,"__BOOLEAN__","X");X=h.prepareCommand(X,"__BOOLEAN2__","");new Function(X)();Y.setProperty("/navigationpanel/apply/ready",false);};n.ZEN_submit=v;x.onAfterRendering=this.getAxisOnAfterRendering("rows",p.getId(),n,v);p.onAfterRendering=this.getAxisOnAfterRendering("columns",x.getId(),n,v);x.bindAggregation(this.getRowRepeaterAggregation(),{path:"/axis/rows",factory:H});p.bindAggregation(this.getRowRepeaterAggregation(),{path:"/axis/columns",factory:H});var M=this.createPanel({top:j,center:L}).addStyleClass("zenNavigationPanel"+B+"-BorderLayoutLeft");M.onAfterRendering=U;m.addFirstPaneContent(M);var S=this.createLabel({text:"{/text/ROWS}",design:"Bold"});var P=this.createTopArea({size:"30px",overflowX:"hidden",overflowY:"hidden"}).addStyleClass("zenNavigationPanel-SubHeader");var G=this.createPanel({width:"100%",height:"100%",top:P,center:this.createCenterArea({content:[x]})});if(!sap.zen.Dispatcher.instance.isMainMode()){var k=new sap.ui.core.Icon({size:"15px",src:"sap-icon://menu2"});S.setLabelFor(k);P.addContent(k);}P.addContent(S);var z=this.createLabel({text:"{/text/COLUMNS}",labelFor:W,design:"Bold"});var y=this.createTopArea({size:"32px",overflowX:"hidden",overflowY:"hidden",}).addStyleClass("zenNavigationPanel-SubHeader");var O=this.createPanel({width:"100%",height:"100%",top:y,center:this.createCenterArea({content:[p]})});if(!sap.zen.Dispatcher.instance.isMainMode()){var W=new sap.ui.core.Icon({size:"15px",src:"sap-icon://menu2"});z.setLabelFor(W);y.addContent(W);}y.addContent(z);var Q=this.createSplitter({splitterOrientation:"Horizontal",splitterPosition:"50%",minSizeFirstPane:"30%",minSizeSecondPane:"30%",showScrollBars:false,width:"100%",height:"100%"}).addStyleClass("zenNavigationPanel"+B+"-SplitterH");Q.addFirstPaneContent(O);Q.addSecondPaneContent(G);var s=Q.resizeSplitterElements;Q.resizeSplitterElements=function(){s.apply(this);G.invalidate();O.invalidate();};var V=undefined;if(sap.zen.Dispatcher.instance.isMainMode()){var w=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var q=w.getText("FILTER_BAR_GO");V=this.createButton({text:q,visible:"{/property/pauserefresh}",enabled:"{/navigationpanel/apply/ready}",type:sap.m.ButtonType.Emphasized,press:function(){var X=n.getModel();if(X.getProperty("/navigationpanel/apply/ready")){v();}}});}else{V=this.createToggleButton({icon:"sap-icon://media-pause",tooltip:"{/text/pauserefresh}",pressed:"{/property/pauserefresh}",press:function(){var Z=n.getModel();var Y=Z.getProperty("/property/pauserefresh");var X=Z.getProperty("/command/changepauserefresh");if(Z.getProperty("/navigationpanel/apply/ready")&&!Y){v();}if(X){new Function(h.prepareCommand(X,"__BOOLEAN__",Y?"X":""))();}}});V.onAfterRendering=function(){this.$().css("margin-right","5px").parent().css("white-space","nowrap").css("overflow-y","hidden").css("padding-top","6px");};}var u=this.createCenterArea({overflowX:"hidden",overflowY:"hidden",content:[Q]});var E=this.createPanel({width:"100%",height:"100%",top:this.createTopArea({contentAlign:"right",size:"30px",content:[V]}),center:u}).addStyleClass("zenNavigationPanel"+B+"-BorderLayoutRight");m.addSecondPaneContent(E);if(!sap.zen.Dispatcher.instance.isMainMode()){k.onAfterRendering=function(){this.$().css("padding-left","6px").css("padding-right","9px").css("line-height","28px");};W.onAfterRendering=function(){this.$().css("padding-left","9px").css("padding-right","3px").css("line-height","23px").css("transform","rotate(90deg)").css("-ms-transform","rotate(90deg)").css("-webkit-transform","rotate(90deg)");};S.onAfterRendering=function(){this.$().css("line-height","30px");};z.onAfterRendering=function(){this.$().css("line-height","30px");};}}if(!sap.zen.Dispatcher.instance.isMainMode()){N.onAfterRendering=function(){this.$().css("line-height","30px").css("padding-left","5px");};}n.onAfterRendering=function(){e=$("#"+this.sId).offset().left;U.apply(this);var Y=this.$();var Z=$(Y.children("tbody")).children("tr");var X=Z.length-1;for(var aa=0;aa<X;aa++){var ab=Z[aa];$(ab).css("height","0px");}if(!r.visible){$("#"+n.getId()).parent(".sapUiLayoutAbsPos").css("display","none");}};return n;};this.rewriteMeasuresPosition=function(n,m){if(n&&n.characteristics&&(m||(n.property&&n.property.showmeasuresseparately))){for(var k=0,j=n.characteristics.length;k<j;k++){var o=n.characteristics[k];if(o.characteristic.measureStructure){n.measures=[o];n.characteristics.splice(k,1);break;}}}};this.getRowFactory=function(l,n,k,j,m){return function(r,v){var u=new sap.zen.commons.layout.MatrixLayout({widths:["20px","auto"]});var q=v.oModel;var o=q.getProperty(v.sPath+"/characteristic/measureStructure");var p,w,x,t;u.setWidth("100%");p=new sap.zen.commons.layout.MatrixLayoutRow();if(j){var s=new sap.ui.core.Icon();if(o){s.bindProperty("src",{path:"/navigationpanel/measures/expanded",mode:sap.ui.model.BindingMode.OneWay,formatter:function(y){if(y){if(sap.zen.Dispatcher.instance.isMainMode()){return"sap-icon://slim-arrow-down";}else{return"sap-icon://down";}}if(sap.zen.Dispatcher.instance.isMainMode()){return"sap-icon://slim-arrow-right";}else{return"sap-icon://media-play";}}});s.addStyleClass("sapzenExpandMeasuresIcon");if(sap.ui.Device.support.touch){s.onmouseup=function(y){if(sap.ui.core.Icon.prototype.onmouseup){sap.ui.core.Icon.prototype.onmouseup.apply(s,arguments);}q.setProperty("/navigationpanel/measures/expanded",!q.getProperty("/navigationpanel/measures/expanded"));h.changeTemplate(u,v);};}else{s.attachPress(function(y){q.setProperty("/navigationpanel/measures/expanded",!q.getProperty("/navigationpanel/measures/expanded"));h.changeTemplate(u,v);});}}else{s.setSrc("sap-icon://accept");s.bindProperty("useIconTooltip",{path:v.sPath+"/characteristic/axis",mode:sap.ui.model.BindingMode.OneWay,formatter:function(y){if(y==="FREE"){this.removeStyleClass("zenNavigationPanel-visibleIconActive");}else{this.addStyleClass("zenNavigationPanel-visibleIconActive");}return false;}});s.addStyleClass("zenNavigationPanel-visibleIcon");}w=new sap.zen.commons.layout.MatrixLayoutCell({hAlign:sap.zen.commons.layout.HAlign.Center});w.addContent(s);p.addCell(w);}t=h.createText();t.bindProperty("text",{path:v.sPath+n,mode:sap.ui.model.BindingMode.OneWay,formatter:k});if(o&&q.getProperty("/property/showmeasuresseparately")){if(!sap.zen.Dispatcher.instance.isMainMode()){t.setDesign(sap.ui.commons.TextViewDesign.Bold);t.onAfterRendering=function(){this.$().css("line-height","30px").css("padding-left","5px");};}}if(sap.zen.Dispatcher.instance.isMainMode()){t.onAfterRendering=function(){this.$().css("cursor","move");};}x=new sap.zen.commons.layout.MatrixLayoutCell({colSpan:2});x.addContent(t);x.addContent(h.createLabel({width:"0px"}).bindProperty("text",{path:v.sPath+l,mode:sap.ui.model.BindingMode.OneWay}).addStyleClass("zenDimensionId").addStyleClass("zenHideFilterPanel"));p.addCell(x);u.addRow(p);if(o){h.changeTemplate(u,v);}if(!sap.zen.Dispatcher.instance.isMainMode()){u.onAfterRendering=function(){this.$().css("margin-left","5px");};}if(o){u.addEventDelegate({onAfterRendering:function(){var y=u.$().find("tr");y.not(".zenMeasure").css("cursor","move");y.css("white-space","nowrap");}});}if(m){m();}if(sap.zen.Dispatcher.instance.isMainMode()){return new sap.m.CustomListItem({content:[u]});}return u;};};this.changeTemplate=function(o,t,j){var k=t.oModel;if(j||k.getProperty("/navigationpanel/measures/expanded")){var q=k.getProperty(t.sPath+"/characteristic/members");var l=k.getProperty(t.sPath+"/characteristic/name");var n=k.getProperty(t.sPath+"/characteristic/axis");for(var m=0;m<q.length;m++){var s=q[m];var p=new sap.ui.core.Icon({src:"sap-icon://accept"}).addStyleClass("zenNavigationPanel-visibleIcon");p.bindProperty("useIconTooltip",{path:"/filters/"+l,mode:sap.ui.model.BindingMode.OneWay,formatter:h.getFilterFormatter(s.key,n,s.parents)});var r=new sap.zen.commons.layout.MatrixLayoutCell({content:[this.createText({text:s.text}),this.createLabel({width:"0px",text:l}).addStyleClass("zenDimensionId").addStyleClass("zenHideFilterPanel")]});o.createRow(this.createText(),p,r);}var u=o.getRows();for(var m=1;m<u.length;m++){u[m].addStyleClass("zenMeasure");}o.setWidths(["20px","20px","auto"]);}else{while(o.getRows().length>1){o.removeRow(1).destroy();}o.setWidths(["20px","auto"]);}if(!sap.zen.Dispatcher.instance.isMainMode()){o.addEventDelegate({onAfterRendering:function(){o.$().find("tr").css("white-space","nowrap");}});}};this.getFilterFormatter=function(j,l,k){return function(p){if(l==="FREE"){this.removeStyleClass("zenNavigationPanel-visibleIconActive");return false;}if(p){if(p.members&&p.members.length>0){for(var n=0,m=p.members.length;n<m;n++){var r=p.members[n].key;if(r===j){if(p.exclude){this.removeStyleClass("zenNavigationPanel-visibleIconActive");}else{this.addStyleClass("zenNavigationPanel-visibleIconActive");}return false;}if(k){for(var o=0;o<k.length;o++){if(k[o].key===r){if(p.exclude){this.removeStyleClass("zenNavigationPanel-visibleIconActive");}else{this.addStyleClass("zenNavigationPanel-visibleIconActive");}return false;}}}}if(p.exclude){this.addStyleClass("zenNavigationPanel-visibleIconActive");}else{this.removeStyleClass("zenNavigationPanel-visibleIconActive");}return false;}else{if(sap.zen.Dispatcher.instance.isMainMode()&&p.ranges&&p.ranges.length>0){var q=true;for(var n=0,m=p.ranges.length;n<m;n++){var s=p.ranges[n];if(s.operation==="EQ"||!s.operation){r=s.from.key;if(r===j){if(s.exclude){this.removeStyleClass("zenNavigationPanel-visibleIconActive");}else{this.addStyleClass("zenNavigationPanel-visibleIconActive");}return false;}if(k){for(var o=0;o<k.length;o++){if(k[o].key===r){if(s.exclude){this.removeStyleClass("zenNavigationPanel-visibleIconActive");}else{this.addStyleClass("zenNavigationPanel-visibleIconActive");}return false;}}}}if(q&&!s.exclude){q=false;}}if(q){this.addStyleClass("zenNavigationPanel-visibleIconActive");}else{this.removeStyleClass("zenNavigationPanel-visibleIconActive");}return false;}}}this.addStyleClass("zenNavigationPanel-visibleIconActive");return false;};};this.isDropInPanel=function(k,j){var l=$("#"+j)[0].getBoundingClientRect();return(k.clientX>=l.left&&k.clientX<=l.right&&k.clientY>=l.top&&k.clientY<=l.bottom);};this.onUnhandledDrop=function(k,j){if(!h.isDropInPanel(k,this.getId())){sap.zen.Dispatcher.instance.setDragDropCanceled(true);}};this.onEscKeyPressed=function(){sap.zen.Dispatcher.instance.setDragDropCanceled(true);if(i){i.draggable().trigger("mouseup");}if(d){d.sortable().trigger("mouseup");}};this.getDimensionsOnAfterRendering=function(l,k,j,m){return function(){var t=sap.zen.Dispatcher.instance.isMainMode();var o=$("#"+k+(t?" > ul > li":"-page_1 > li"));var s=$("#"+k);var n=l.getModel().getProperty("/property/rootcomponentid");if(!n){n="ROOT";}var q=c.dispatcher.getRootControlForComponentId(n);if(!q){q=l;}s.find(".sapUiRrNoData").remove();s.find(".sapMListNoData").remove();var r={helper:function(){var w=h.getPayload(this,l);var v=$($(this).find("span").not(".sapUiIcon")[0]);var u=$("<div></div>").append(v.clone());u.addClass("zenDragGhost").width(this.offsetWidth>v.width()?v.width():this.offsetWidth);sap.zen.Dispatcher.instance.setDragDropPayload(w,this);sap.zen.Dispatcher.instance.setDragDropPayload(w,u[0]);return u;},appendTo:"#"+q.getId(),revert:function(x){if(!x){return true;}if(sap.zen.Dispatcher.instance.isDragDropCanceled()){this.context.ZENcancel=function(){var A;if($("#"+j).find(x).length>0||$("#"+m).find(x).length>0){A=x.sortable("cancel").find("li");$(A[A.length-1]).remove();}};return true;}var z=sap.zen.Dispatcher.instance.getDragDropPayload(x);if(z&&x){if(z.oInterComponentAcceptStatus[$(x).attr("id")]===true){return false;}}var u=$($(this).find(".zenDimensionId")[0]);if(x){var w=x.children().not(".ui-draggable").find(".zenDimensionId");for(var v=0;v<w.length;v++){var y=$(w[v]);if(j&&m&&(x.attr("id")===j+(t?"-listUl":"-page_1")||x.attr("id")===m+(t?"-listUl":"-page_1"))&&y.text()===u.text()&&y.attr("id")!==u.attr("id")){this.context.ZENcancel=function(){var A=x.sortable("cancel").find("li");$(A[A.length-1]).remove();};return true;}}}return false;},start:function(w,v){var u=$(w.toElement);if(u.length>0&&(u.hasClass("zenMeasure")||u.parents(".zenMeasure").length>0)){return false;}},stop:function(){if(this.ZENcancel){this.ZENcancel();this.ZENcancel=undefined;}},};if(j&&m){r.connectToSortable="#"+j+(t?" > ul":"-page_1")+", #"+m+(t?" > ul":"-page_1");if(sap.zen.Dispatcher.instance.isInterComponentDragDropEnabled()){r.connectToSortable+=", .feeding-sortable-list";}}o.addClass("navPanelDragElement");o.css("-ms-touch-action","none");o.draggable(r).disableSelection();var p=o.find("tr");p.not(".zenMeasure").css("cursor","move");p.css("white-space","nowrap");o.mousedown(function(u){sap.zen.Dispatcher.instance.closeContextMenu();if(u){if(!u.target||!$(u.target).hasClass("sapzenExpandMeasuresIcon")){if(u.cancelBubble){u.cancelBubble=true;}}}});if(sap.ui.Device.support.touch){o.bind(h.touchBindObject);}};};this.isOverParent=function(o){var t=o.offset.left;var n=o.offset.top;var l=o.item.outerHeight();var p=n+l;var z=o.helper?o.helper.outerWidth():o.item.outerWidth();var j=t+z/2;var v=o.item.parent();if(v.length===0){v=o.item;}var u=v.offset().left;var s=v.offset().top;var m=v.outerHeight();var A=v.outerWidth();var q=s+m;var k=u+A;if(q<n||s>p||k<t||u>j){return false;}return true;};this.rowColUpdate=function(s,p,B,u,q,x){h.clearDragGhosts();if(sap.zen.Dispatcher.instance.isDragDropCanceled()){return;}var r={rows:"columns",columns:"rows"};var n=$(q).find("li");var w=[],v=[];var m=r[s];var l=B.getModel();var o=l.getProperty("/axis/"+m);for(var z=0;z<n.length;z++){var t=$($(n[z]).find(".zenDimensionId")[0]).text();if(t){var k=true;for(var y=0;y<w.length;y++){if(t===w[y].entry.name){k=false;break;}}if(k){for(var y=0;y<o.length;y++){if(o[y].entry.name===t){o.splice(y,1);break;}}if(x.item[0]!==n[z]||h.isOverParent(x)){w.push({entry:{name:t}});}else{v.push(z);}}}}for(var z=0;z<v.length;z++){$(n[v[z]]).remove();}var A=l.getProperty("/navigationpanel/timeout");if(A){clearTimeout(A);}l.setProperty("/navigationpanel/timeout",setTimeout(function(){var j=B.getModel();j.setProperty("/axis/"+s,w);j.setProperty("/axis/"+m,o);j.setProperty("/navigationpanel/apply/ready",true);if(!j.getProperty("/property/pauserefresh")){u();}j.setProperty("/navigationpanel/timeout",undefined);},0));};this.getAxisOnAfterRendering=function(n,j,m,l){var k=sap.zen.Dispatcher.instance.isMainMode();return function(){var s=this.getId();var t=$("#"+s+(k?" > ul":"-page_1"));$("#"+s+"-body").height("100%");t.height("100%");t.find(".sapUiRrNoData").remove();t.find(".sapMListNoData").remove();var r=$("#"+s+(k?" li":"-page_1 > li"));r.css("cursor","move");r.css("-ms-touch-action","none");r.find("tr").css("white-space","nowrap");var p=r.outerHeight()*(r.length+1);var o=this.$();if(p===0){o.height("100%");}else{o.height(p+"px");}var q=r.outerHeight()+"px";t.sortable({containment:$("#"+m.getId()+">*"),connectWith:"#"+j+(k?" > ul":"-page_1"),tolerance:"pointer",helper:function(w,v){d=$(this);sap.zen.Dispatcher.instance.setDragDropCanceled(false);var u=$(v).find("span");var x=$("<div></div>").append($(v).find("span").clone());x.addClass("zenDragGhost").width(this.offsetWidth>u.width()?u.width():this.offsetWidth);return x;},placeholder:"ui-state-highlight",forcePlaceholderSize:true,change:function(v,u){u.placeholder.css("height",q);},stop:function(x,v){if(!h.isDrillDownRemovable(v,m)||sap.zen.Dispatcher.instance.isDragDropCanceled()){$(this).sortable("cancel");if(v&&v.item){v.item.remove();}return;}if(m.isOverParent===false){var w=v.item.find(".zenDimensionId").text();if(w){var A=m.getModel();var z=A.getProperty("/axis/"+n);for(var u=0;u<z.length;u++){var y=z[u].entry.name;if(y===w){z.splice(u,1);A.setProperty("/axis/"+n,z);A.setProperty("/navigationpanel/apply/ready",true);if(!A.getProperty("/property/pauserefresh")){l();}break;}}}}},beforeStop:function(w,u){var v=h.isOverParent(u);if(!v&&!h.isDrillDownRemovable(u,m)){sap.zen.Dispatcher.instance.setDragDropCanceled(true);}else{if(v){sap.zen.Dispatcher.instance.setDragDropCanceled(false);}}m.isOverParent=v;},appendTo:"#"+m.getId()+">*",update:function(v,u){h.rowColUpdate(n,j,m,l,this,u);},cursor:"move"}).disableSelection();t.mousedown(function(u){sap.zen.Dispatcher.instance.closeContextMenu();if(u){if(u.stopPropagation){u.stopPropagation();}if(u.cancelBubble){u.cancelBubble=true;}}});if(sap.ui.Device.support.touch){t.bind(h.touchBindObject);}};};if(sap.ui.Device.support.touch){this.getTouchToMouse=function(j){return function(l){var n=l.originalEvent.changedTouches[0];var k=0;if(j==="mousedown"){f=(l.currentTarget.offsetWidth/2)+e;k=$("#"+l.currentTarget.id).offset().left-(window.scrollX||window.pageXOffset||document.body.scrollLeft)-e;if(f>n.pageX-k){g=true;}else{g=false;}}if(g){var m=document.createEvent("MouseEvents");if(l.preventDefault){l.preventDefault();}if(l.stopPropagation){l.stopPropagation();}if(l.cancelBubble){l.cancelBubble=true;}m.initMouseEvent(j,true,true,window,1,n.screenX,n.screenY,n.clientX,n.clientY);l.target.dispatchEvent(m);}};};this.touchBindObject={touchstart:h.getTouchToMouse("mousedown"),touchmove:h.getTouchToMouse("mousemove"),touchend:h.getTouchToMouse("mouseup")};}this.update=function(l,j,k){if(l&&j){var m=l.getModel();if(this.isDesignModeD4LIncluded(j.id)||(j.newds&&j.property&&m.getProperty("/property/navigationpanelmode")!==j.property.navigationpanelmode)){return this.create(l,j,k);}if(j.newds||sap.zen.Dispatcher.instance.isMainMode()||!m.getProperty("/navigationpanel/apply/ready")){if(j.charnames){m.setProperty("/charnames",j.charnames);}if(j.characteristics){this.rewriteMeasuresPosition(j,m.getProperty("/property/showmeasuresseparately"));m.setProperty("/characteristics",j.characteristics);m.setProperty("/measures",j.measures);}if(j.axis&&this.axisArraysNotSame(j.axis,m.getProperty("/axis"))){m.setProperty("/axis",j.axis);m.setProperty("/navigationpanel/apply/ready",false);}}if(j.filters){m.setProperty("/filters",j.filters);}if(j.changeVisibility){if(j.visible){l.removeStyleClass("zenHideFilterPanel");}else{l.addStyleClass("zenHideFilterPanel");}}if(!j.visible){setTimeout(function(){$("#"+l.getId()).parent(".sapUiLayoutAbsPos").css("display","none");},0);}if(!j.pauserefresh){if(l.getModel().getProperty("/property/pauserefresh")){l.ZEN_submit();}}l.getModel().setProperty("/property/pauserefresh",j.pauserefresh?true:false);l.getModel().setProperty("/dsName",j.dsName);}$(".sapMList").css("min-height","40px");h.clearDragGhosts();return l;};this.axisArraysNotSame=function(l,k){var j=["rows","columns"];if(l&&k){for(var p=0;p<2;p++){var o=j[p];if(l[o].length===k[o].length){for(var m=0;m<l[o].length;m++){if(l[o][m].entry.name!==k[o][m].entry.name){return true;}}}else{return true;}}return false;}return true;};this.getContextMenuAction=function(p,m,k){var l=m.getModel().getProperty("/command/createcontextmenu");if(l){var o=k.prop("tagName").toLowerCase();var n;if(o==="label"||o==="span"){if(sap.zen.Dispatcher.instance.isMainMode()){n=k.parent().siblings(".zenDimensionId").text();}else{n=k.siblings(".zenDimensionId").text();}}else{if(o==="td"){n=k.children(".zenDimensionId").text();}}if(n){var j=h.prepareCommand(l,"__STRING__",p);j=h.prepareCommand(j,"__STRING2__",n);j=h.prepareCommand(j,"__STRING3__",k[0].id);return new Function(j);}}return null;};this.isDesignModeD4LIncluded=function(j){return sap.zen.designmode&&sap.zen.designmode.isDesignMode(j)&&!sap.zen.designmode.isRuntimeAuthoringMode(j);};this.getType=function(){return"navigationpanel";};this.getDecorator=function(){return"DataSourceControlDecorator";};this.getPayload=function(k,o){var n=sap.zen.Dispatcher.instance.createDragDropPayload(o.getId());var j=$($(k).find(".zenDimensionId")[0]).text();var m=$($(k).find(".zenDimensionId")[0]).parent().find("span").text();var l=$(k).hasClass("zenMeasure")||$(k).find(".sapzenExpandMeasuresIcon").length>0;var p=o.getModel();n.dimension.id=j;n.dimension.name=m;n.dimension.isMeasureStructure=l;if(n.hasOwnProperty("member")){delete n.member;n.type="dimension";}if(!n.datasource){n.datasource={};}n.datasource.id=p.getProperty("/dsName");n.datasource.alias=p.getProperty("/dsAlias");n.datasource.query=p.getProperty("/dsQuery");n.datasource.type=p.getProperty("/dsType");return n;};this.isDrillDownRemovable=function(l,n){var j=true;var q=n.getModel();var o;var p=q.getProperty("/characteristics").concat(q.getProperty("/measures"));var m=l.item.find(".zenDimensionId").text();if(!m){return;}for(var k=0;k<p.length;k++){o=p[k].characteristic;if(o.name===m){if(n.getModel().getProperty("/pauserefresh")&&o.axis==="FREE"){o.temporaryRemove=true;}j=o.drillDownRemovable||false;if(!j&&o.temporaryRemove){j=true;}break;}}return j;};this.clearDragGhosts=function(){$("div.zenDragGhost").remove();};};var a=new b();return a;});sap.ui.define("zen.rt.components.filterpanel/resources/js/ValueHelpDialog",["sap/base/Log","sap/ui/comp/library","sap/m/Dialog","sap/m/MessageBox","sap/m/Token","sap/ui/comp/valuehelpdialog/ItemsCollection","sap/ui/core/library","sap/ui/core/Control","sap/ui/core/format/DateFormat","sap/ui/core/format/NumberFormat","sap/m/VBox","sap/m/HBox","sap/ui/comp/util/FormatUtil","sap/m/DialogRenderer","sap/m/FlexItemData","sap/m/Title","sap/m/Text","sap/m/Label","sap/m/Button","sap/m/Bar","sap/m/OverflowToolbarLayoutData","sap/m/Tokenizer","sap/m/Panel","sap/m/StandardListItem","sap/m/IconTabBar","sap/m/IconTabFilter","sap/m/library","sap/ui/core/InvisibleText","sap/ui/core/IconPool","sap/ui/layout/HorizontalLayout","sap/ui/layout/Grid","sap/ui/Device","sap/m/List","sap/m/Link","sap/m/P13nFilterPanel","sap/m/P13nConditionPanel","sap/m/P13nItem","sap/m/P13nAnyFilterItem","sap/m/CheckBox","sap/ui/model/odata/type/String","sap/ui/base/BindingParser"],function(ag,W,x,K,g,d,B,E,ae,X,l,G,D,Y,i,A,C,N,ac,J,c,M,h,u,ad,O,m,V,ab,n,Q,y,s,b,w,k,a,P,v,Z,r){var f=null;var aa;var R;var U;var j;var F;var q;var ai=m.ButtonType;var ah=m.OverflowToolbarPriority;var af=m.ListMode;var T=m.ListType;var I;var o;var S;var z=B.HorizontalAlign;var L=W.smartfilterbar.DisplayBehaviour;var H={DESKTOP_LIST_VIEW:"DESKTOP_LIST_VIEW",DESKTOP_CONDITIONS_VIEW:"DESKTOP_CONDITIONS_VIEW",PHONE_MAIN_VIEW:"PHONE_MAIN_VIEW",PHONE_SEARCH_VIEW:"PHONE_SEARCH_VIEW",PHONE_LIST_VIEW:"PHONE_LIST_VIEW",PHONE_CONDITIONS_VIEW:"PHONE_CONDITIONS_VIEW"};var p=x.extend("sap.zen.ValueHelpDialog",{metadata:{library:"sap.ui.comp",properties:{basicSearchText:{type:"string",group:"Misc",defaultValue:""},supportMultiselect:{type:"boolean",group:"Misc",defaultValue:true},supportRanges:{type:"boolean",group:"Misc",defaultValue:false},supportRangesOnly:{type:"boolean",group:"Misc",defaultValue:false},key:{type:"string",group:"Misc",defaultValue:""},keys:{type:"string[]",group:"Misc",defaultValue:null},descriptionKey:{type:"string",group:"Misc",defaultValue:""},maxIncludeRanges:{type:"string",group:"Misc",defaultValue:"-1"},maxExcludeRanges:{type:"string",group:"Misc",defaultValue:"-1"},displayFormat:{type:"string",group:"Misc",defaultValue:""},tokenDisplayBehaviour:{type:"string",group:"Misc",defaultValue:""},filterMode:{type:"boolean",group:"Misc",defaultValue:false},moreMembersExist:{type:"boolean",group:"ZEN",defaultValue:false},filterSelection:{type:"string",group:"ZEN",defaultValue:"KEY"},dialogInDialog:{type:"boolean",group:"ZEN",defaultValue:false}},aggregations:{filterBar:{type:"sap.ui.core.Control",multiple:false}},events:{ok:{parameters:{tokens:{type:"sap.m.Token[]"}}},cancel:{},selectionChange:{parameters:{tableSelectionParams:{type:"object"},updateTokens:{type:"object[]"},useDefault:{type:"boolean",defaultValue:false},table:{type:"object"}}},tokenRemove:{parameters:{tokenKeys:{type:"string[]"},useDefault:{type:"boolean",defaultValue:false}}},updateSelection:{parameters:{tokenKeys:{type:"string[]"},useDefault:{type:"boolean",defaultValue:false}}}}},renderer:Y.render});p.prototype.setSupportMultiselect=function(ak){this.setProperty("supportMultiselect",ak);this._updatePropertySupportMultiselect(ak);this._oTokenizerGrid.setVisible(ak);return this;};p.prototype._updatePropertySupportMultiselect=function(ak){if(!this._oTable){return undefined;}if(!this._isPhone()){if(this._oTable.setSelectionMode){this._oTable.setSelectionMode(ak?I.MultiToggle:I.Single);}}else{if(this._oTable.setMode){this._oTable.setMode(ak?af.MultiSelect:af.SingleSelectLeft);}}return this;};p.prototype.setSupportRanges=function(ak){this.setProperty("supportRanges",ak);this._updateNavigationControl();return this;};p.prototype.setSupportRangesOnly=function(ak){this.setProperty("supportRangesOnly",ak);this._updateNavigationControl();return this;};p.prototype.setTitle=function(ak){this.setProperty("title",ak);this._updateDlgTitle();return this;};p.prototype.setOControl=function(ak){this._oControl=ak;};p.prototype.getOControl=function(ak){return this._oControl;};p.prototype.setFilterBar=function(ao,am){this.setAggregation("filterBar",ao);if(this._oMainLayout&&ao){if(this._isPhone()){if(this._oFilterBar){this._oVBox.removeItem(this._oFilterBar);}}else{if(this._oFilterBar){this._oMainLayout.removeItem(this._oFilterBar);}}this._oFilterBar=ao;this._oSelect=am;if(this._oFilterBar){this._oFilterBar.addStyleClass("compVHSearch");if(this._isPhone()){if(this._oFilterBar.getBasicSearch){var an=sap.ui.getCore().byId(this._oFilterBar.getBasicSearch());if(an&&an.isA("sap.m.SearchField")){an.setShowSearchButton(true);an.attachSearch(function(ap){if(ap.mParameters.refreshButtonPressed!==undefined){this.getFilterBar().search();}}.bind(this));}this._oFilterBar.setShowGoOnFB(false);}this._oColSearchBox.setLayoutData(new i({shrinkFactor:0}));this._oVBox.insertItem(this._oColSearchBox,0);if(this._oFilterBar.setLayoutData){this._oFilterBar.setLayoutData(new i({shrinkFactor:0}));}this._oVBox.insertItem(this._oFilterBar,1);this._oFilterBar.attachSearch(function(ap){this._updateView(H.PHONE_LIST_VIEW);}.bind(this));if(this._currentViewMode===H.PHONE_LIST_VIEW){if(this._oFilterBar.setFilterBarExpanded){this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(false);this._handleFilterBarInitialize();}}}else{if(this._oFilterBar._setCollectiveSearch){this._oFilterBar._setCollectiveSearch(this._oColSearchBox);}var al=this.buildSearchBox();this._oMainLayout.insertItem(al,0);}}if(this._oFilterBar._oSearchButton){this.setInitialFocus(this._oFilterBar._oSearchButton);}if(this._oFilterBar._oBasicSearchField){var ak=this._oFilterBar._oBasicSearchField;ak.setValue(this.getBasicSearchText());this.setInitialFocus(ak);}}return this;};p.prototype.buildSearchBox=function(){if(!this._oFilterBar||!this._oSelect){return null;}this._oFilterBar.setLayoutData(new sap.m.FlexItemData({growFactor:1}));this._oSelect.setLayoutData(new sap.m.FlexItemData({growFactor:0,styleClass:"zenValueHelpAttributeSelection"}));var ak=new sap.m.HBox({fitContainer:true,visible:true,displayInline:true,items:[this._oFilterBar,this._oSelect]});ak.addStyleClass("valueHelpFilterBox");return ak;};p.prototype._handleFilterBarInitialize=function(){if(this._currentViewMode===H.PHONE_LIST_VIEW){this._oFilterBar._handleVisibilityOfToolbar();var ak=this._oFilterBar&&this._oFilterBar.getFilterGroupItems()&&this._oFilterBar.getFilterGroupItems().length>0;this._oAdvancedSearchLink.setVisible(ak);this._oFilterBar.setShowGoButton(!(this._oFilterBar&&this._oFilterBar.getBasicSearch()));}};p.prototype.getFilterBar=function(){return this._oFilterBar;};p.prototype.setBasicSearchText=function(ak){this.setProperty("basicSearchText",ak);if(this._oFilterBar&&this._oFilterBar._oBasicSearchField){this._oFilterBar._oBasicSearchField.setValue(ak);}return this;};p.prototype.setTokens=function(av){var aq=true;if(av.length){var ao=0,aw;for(var at=0;at<av.length;at++){var ar=av[at];if(ar.data("range")){var au=ar.data("range");aw=ar.getKey();if(!aw){do{aw="range_"+ao;ao++;}while(this._oSelectedRanges[aw]);}var al=this._getFormatedRangeTokenText(au.operation,au.value1,au.value2,au.exclude,au.keyField);this._addToken2Tokenizer(aw,al,au.exclude?this._oExcludedTokens:this._oSelectedTokens,au.keyField);this._oSelectedRanges[aw]=au;aq=false;}else{aw=ar.getKey();var ap=ar.getText();var an=ar.data("longKey");var ak=ar.data("row");if(!an){an=aw;}this._oSelectedItems.add(an,ak?ak:ar.getText());var am=new g(e.call(this,an),{key:an});am.setText(ap);am.setTooltip(ap);this._oSelectedTokens.addToken(am);}}}else{this._oSelectedItems.removeAll();this._oSelectedRanges={};this._oSelectedTokens.destroyTokens();this._oExcludedTokens.destroyTokens();}if(aq){this._updateTokenizer();}};p.prototype.open=function(){if(!this._oTable&&!(this._isPhone()&&(this.getSupportRangesOnly()||this.getFilterMode()))){aj.call(this).then(function(){this.open();return this;}.bind(this));return this;}this._bIgnoreSelectionChange=false;this.bCollectiveSearchActive=this.oSelectionTitle.getVisible()&&this.oSelectionButton.getVisible();if(this._oColSearchBox){this._oColSearchBox.setVisible(this.bCollectiveSearchActive);}if(!this._isPhone()){if(this.getSupportRangesOnly()||this.getFilterMode()){this._updateView(H.DESKTOP_CONDITIONS_VIEW);}this.setContentWidth(this._getDefaultContentWidth());}else{this._updateView(H.PHONE_MAIN_VIEW);}x.prototype.open.apply(this);return this;};p.prototype.getTable=function(){ag.warning("Please use getTableAsync to prevent synchronous calls.",this);if(!this._oTable){this._createDefaultTable();}return this._oTable;};p.prototype.getTableAsync=function(){if(this._oTablePromise){return this._oTablePromise;}else{if(!this._oTable){return aj.call(this);}else{return new Promise(function(ak){ak(this._oTable);}.bind(this));}}};p.prototype.setTable=function(ak){if(this._oTable){this._oMainLayout.removeItem(this._oTable);if(this._bTableCreatedInternal){this._oTable.destroy();this._oTable=null;}}this._bTableCreatedInternal=(arguments.length>1)&&(arguments[1]==true);if(ak&&ak.isA("sap.ui.comp.smarttable.SmartTable")){this._oTable=ak.getTable();}else{this._oTable=ak;}if(this._oTable&&this._oTable.isA("sap.ui.table.Table")&&!R){aa=sap.ui.require("sap/ui/table/library");R=sap.ui.require("sap/ui/table/Table");U=sap.ui.require("sap/ui/table/Column");I=aa.SelectionMode;o=aa.SelectionBehavior;S=aa.VisibleRowCountMode;if(this._oTable.isA("sap.ui.table.AnalyticalTable")){j=sap.ui.require("sap/ui/table/AnalyticalColumn");}}else{if(this._oTable&&this._oTable.isA("sap.m.Table")&&!F){F=sap.ui.require("sap/m/Table");q=sap.ui.require("sap/m/Column");}}this._oTable.setLayoutData(new i({shrinkFactor:0,growFactor:1}));this.theTable=this._oTable;this._initializeTable();this._oMainLayout.addItem(ak);};p.prototype._getDefaultContentWidth=function(){var al=0;if(this._oTable){al=this._oTable.getColumns().length;}var ak=Math.max(1080,al*130);return ak+"px";};p.prototype.resetTableState=function(){if(this._oTable){if(this._oTable.unbindRows){this._oTable.unbindRows();}this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_NODATA"));}};p.prototype.TableStateSearchData=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_NODATA"));};p.prototype._updateNoDataText=function(ak){if(this._oTable){if(this._oTable.setNoData){this._oTable.setNoData(ak);}else{if(this._oTable.setNoDataText){this._oTable.setNoDataText(ak);}}}};p.prototype.TableStateDataFilled=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_NODATA"));};p.prototype.TableStateDataSearching=function(){this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_SEARCHING"));};p.prototype.init=function(){x.prototype.init.apply(this);this._oTokenIdCount={};this._bTableCreatedInternal=false;this._aIncludeRangeOperations={};this._aExcludeRangeOperations={};this._oManuallySetPosition={};this._oManuallySetPosition.y="calc(50% + 0px)";this._oManuallySetPosition.x="calc(50% + 0px)";this.setStretch(this._isPhone());this.setResizable(!this._isPhone());this.setDraggable(!this._isPhone());this.bCollectiveSearchActive=false;this.addStyleClass("sapLudsiDialog");this.addStyleClass("compValueHelpDialog");this._oRb=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");this._sTableTitle1=this._oRb.getText("VALUEHELPDLG_TABLETITLE1");this._sTableTitle2=this._oRb.getText("VALUEHELPDLG_TABLETITLE2");this._sTableTitleNoCount=this._oRb.getText("VALUEHELPDLG_TABLETITLENOCOUNT");this._currentViewMode=null;this._oSelectedItems=new d();this._oSelectedRanges={};this._createHeaderBar();this._createCollectiveSearch();this._createTokenizer();this._updateTokenizer();this._oVBox=new l(this.getId()+"-vbox",{fitContainer:true});this.addContent(this._oVBox);this._oMainLayout=new l(this.getId()+"-mainLayout",{fitContainer:true,items:[this._oFilterBar],layoutData:new i({growFactor:1,shrinkFactor:0})});this._createNavigationControl();this._updateNavigationControl();this._oVBox.addItem(this._oMainLayout);if(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode()){this._oVBox.addItem(this._oTokenizerGrid);}this._createFooterControls();this.setVerticalScrolling(false);this.setHorizontalScrolling(false);if(!y.system.desktop){this._oVBox.attachBrowserEvent("touchmove",function(ak){ak.setMarked();});}if(!this._isPhone()){this._updateView(H.DESKTOP_LIST_VIEW);}};p.prototype._updateView=function(al){if(this._currentViewMode===al){return;}switch(al){case H.DESKTOP_LIST_VIEW:this._validateRanges(function(){this._oTokenizerGrid.setVisible(this.getSupportMultiselect());this._oMainLayout.removeAllItems();if(this._oTabBar&&this._oTabBar.getSelectedKey()!==H.DESKTOP_LIST_VIEW){this._oTabBar.setSelectedKey(H.DESKTOP_LIST_VIEW);}if(this._currentViewMode===H.DESKTOP_CONDITIONS_VIEW){this._oFilterBar.setValue("force clear");setTimeout(function(){this._oFilterBar.clear();}.bind(this),100);}this._oMainLayout.addItem(this.buildSearchBox());this._oMainLayout.addItem(this._oTable);this._updateDlgTitle();this.update();}.bind(this),function(){this._oTabBar.setSelectedKey(H.DESKTOP_CONDITIONS_VIEW);this._updateView(H.DESKTOP_CONDITIONS_VIEW);}.bind(this));break;case H.DESKTOP_CONDITIONS_VIEW:if(this.getSupportRanges()){this.bCollectiveSearchActive=this.oSelectionTitle.getVisible()&&this.oSelectionButton.getVisible();this._oMainLayout.removeAllItems();if(this._oTabBar&&this._oTabBar.getSelectedKey()!==H.DESKTOP_CONDITIONS_VIEW){this._oTabBar.setSelectedKey(H.DESKTOP_CONDITIONS_VIEW);}this._createAddRanges();this._oTokenizerGrid.setVisible(this.getSupportMultiselect());if(!(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode())){this._oTokenizerGrid.setVisible(false);}}break;case H.PHONE_MAIN_VIEW:this.setVerticalScrolling(false);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(true);this._updateNavigationControl();this._oAdvancedSearchLink.setVisible(false);if(this._oFilterBar){if(this._oFilterBar.setFilterBarExpanded){this._oFilterBar.setVisible(false);this._oFilterBar.setFilterBarExpanded(false);}}if(this._oTable){this._oTable.setVisible(false);}this._oTokenizerGrid.setVisible(this.getSupportMultiselect());if(!(this.getMaxIncludeRanges()==="-1"&&this.getMaxExcludeRanges()!=="0"&&!this.getFilterMode())){this._oTokenizerGrid.setVisible(false);}if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(true);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(false);this._bNoneMainView=false;if(!this._oTokenizerGrid.getVisible()&&!(this._oSelectItemLI.getVisible()&&this._oDefineConditionsLI.getVisible())){this._bNoneMainView=true;if(this._oSelectItemLI.getVisible()){this._updateView(H.PHONE_LIST_VIEW);}if(this._oDefineConditionsLI.getVisible()){this._updateView(H.PHONE_CONDITIONS_VIEW);}return;}break;case H.PHONE_LIST_VIEW:this.setVerticalScrolling(true);if(this._currentViewMode===H.PHONE_CONDITIONS_VIEW){this._oFilterBar.clear();}this._oColSearchBox.setVisible(this.bCollectiveSearchActive);this._oMainListMenu.setVisible(false);if(this._oFilterBar&&this._oFilterBar.getFilterGroupItems){var ak=this._oFilterBar&&this._oFilterBar.getFilterGroupItems()&&this._oFilterBar.getFilterGroupItems().length>0;this._oAdvancedSearchLink.setVisible(ak);this._oFilterBar.setShowGoButton(!(this._oFilterBar&&this._oFilterBar.getBasicSearch()));this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(false);}if(this._oTable){this._oTable.setVisible(true);}this._oTokenizerGrid.setVisible(false);if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(!this._bNoneMainView);break;case H.PHONE_SEARCH_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(true);this._oFilterBar.setFilterBarExpanded(true);}this._oAdvancedSearchLink.setVisible(false);if(this._oTable){this._oTable.setVisible(false);}this._oTokenizerGrid.setVisible(false);if(this._oRanges){this._oRanges.setVisible(false);}this._oButtonGo.setVisible(true);this._oButtonClear.setVisible(true);this._oButtonOk.setVisible(false);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(true);break;case H.PHONE_CONDITIONS_VIEW:this.setVerticalScrolling(true);this._oColSearchBox.setVisible(false);this._oMainListMenu.setVisible(false);if(this._oFilterBar){this._oFilterBar.setVisible(false);}this._oAdvancedSearchLink.setVisible(false);if(this._oTable){this._oTable.setVisible(false);}this._oTokenizerGrid.setVisible(false);if(!this._oRanges){this._createAddRanges();}if(this._oRanges){this._oRanges.setVisible(true);}this._oButtonGo.setVisible(false);this._oButtonClear.setVisible(false);this._oButtonOk.setVisible(true);this._oButtonCancel.setVisible(true);this._oBackButton.setVisible(!this._bNoneMainView);break;default:break;}if(this._oMainListMenu&&this._oVBox){if(this._oFilterBar){if(this._oFilterBar._handleVisibilityOfToolbar){this._oFilterBar._handleVisibilityOfToolbar();}}this._oVBox.rerender();}this._currentViewMode=al;this._updateDlgTitle();};p.prototype._keyDecodeUri=function(ak){try{return decodeURIComponent(ak);}catch(al){return ak;}};p.prototype._changeTableRowSelectionForKey=function(aq,am){var an;var ao=this._oTable;this._bIgnoreSelectionChange=true;if(ao&&ao.isA("sap.ui.table.Table")){var at=ao.getBinding("rows");if(at){if(at.aKeys){for(an=0;an<at.aKeys.length;an++){if(this._keyDecodeUri(at.aKeys[an])===aq){if(am){ao.addSelectionInterval(an,an);}else{ao.removeSelectionInterval(an,an);}break;}}}else{this.oRows=ao.getBinding("rows");if(this.oRows.aIndices){for(an=0;an<this.oRows.aIndices.length;an++){var ap=ao.getContextByIndex(this.oRows.aIndices[an]);if(ap){var al=ap.getObject();if(al[this.getKey()]===aq){if(am){ao.addSelectionInterval(an,an);}else{ao.removeSelectionInterval(an,an);}break;}}}}}}}else{for(an=0;an<ao.getItems().length;an++){var ar=ao.getItems()[an];var ak=ar.getBindingContext().getObject();if(ak[this.getKey()]===aq){ao.setSelectedItem(ar,am);break;}}}this._bIgnoreSelectionChange=false;};p.prototype.update=function(){var aq,ap,al,ax;var az;var an=this._oSelectedItems.getItems();var am={tokenKeys:an,useDefault:false};this._bIgnoreSelectionChange=true;if(this._hasListeners("updateSelection")){this.fireUpdateSelection(am);}else{am.useDefault=true;}if(am.useDefault){if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this.oRows=this._oTable.getBinding("rows");this._oTable.clearSelection();if(this.oRows&&this.oRows.aKeys){var ay=this.getKeys();var aB=ay&&ay.length>1?this.getKey()+"=":"";for(ap=0;ap<an.length;ap++){az=an[ap];var av=aB+"'"+az+"'";for(aq=0;aq<this.oRows.aKeys.length;aq++){var ar=this.oRows.aKeys[aq];if(ar===undefined){continue;}ar=this._keyDecodeUri(ar);var au=ar===az;if(au||ar.indexOf(av)>=0){if(!au){this._oSelectedItems.remove(az);var ao=this._getTokenByKey(az,this._oSelectedTokens);if(ao){ao.setKey(ar);}}ax=this._oTable.getContextByIndex(aq);if(ax){al=ax.getObject();this._oSelectedItems.add(ar,al);}this._oTable.addSelectionInterval(aq,aq);break;}}}}else{if(this.oRows&&this.oRows.aIndices){this._oTable.clearSelection();for(ap=0;ap<an.length;ap++){var aw=an[ap];for(aq=0;aq<this.oRows.aIndices.length;aq++){ax=this._oTable.getModel().getContext(this.oRows.sPath+"/"+this.oRows.aIndices[aq]);if(ax){al=ax.getObject();if(al[this.getKey()]===aw){this._oSelectedItems.add(al[this.getKey()],al);this._oTable.addSelectionInterval(aq,aq);break;}}}}}}}else{var at=this._oTable;for(ap=0;ap<an.length;ap++){az=an[ap];for(aq=0;aq<at.getItems().length;aq++){var aA=at.getItems()[aq];var ak=aA.getBindingContext().getObject();if(ak[this.getKey()]===az){at.setSelectedItem(aA,true);break;}}}}}this._bIgnoreSelectionChange=false;this._updateTitles();};p.prototype._createHeaderBar=function(){this._oTitle=new A(this.getId()+"-title");var ak=null;if(this._isPhone()){ak=new ac(this.getId()+"-back",{visible:false,type:ai.Back,press:function(al){if(this._currentViewMode===H.PHONE_SEARCH_VIEW){this._updateView(H.PHONE_LIST_VIEW);}else{this._updateView(H.PHONE_MAIN_VIEW);}}.bind(this)});this._oBackButton=ak;}this.setCustomHeader(new J(this.getId()+"-header",{contentLeft:ak,contentMiddle:this._oTitle}));this.getCustomHeader().addStyleClass("sapContrastPlus");};p.prototype._createCollectiveSearch=function(){this.oSelectionTitle=new C(this.getId()+"-selTitle",{visible:false,wrapping:false}).addStyleClass("compVHColSearchText");if(y.system.tablet&&!y.system.desktop){this.oSelectionTitle.addStyleClass("compVHColSearchTextTabletMaxWidth");}else{this.oSelectionTitle.addStyleClass("compVHColSearchTextMaxWidth");}this.oSelectionButton=new ac(this.getId()+"-selButton",{icon:"sap-icon://arrow-down",tooltip:this._oRb.getText("VALUEHELPVALDLG_SEARCHTEMPLATES_TOOLTIP"),type:ai.Transparent,visible:false,ariaLabelledBy:this.oSelectionTitle}).addStyleClass("compVHColSearchBtn");this._oColSearchBox=new G(this.getId()+"-selBox",{fitContainer:true,visible:this.oSelectionButton.getVisible(),items:[this.oSelectionTitle,this.oSelectionButton]}).addStyleClass("compVHColSearchVBox");};p.prototype._createFooterControls=function(){this._oButtonOk=new ac(this.getId()+"-ok",{text:this._oRb.getText("VALUEHELPDLG_OK"),press:this._onCloseAndTakeOverValues.bind(this),type:ai.Emphasized,layoutData:new c({priority:ah.NeverOverflow})});this._oButtonCancel=new ac(this.getId()+"-cancel",{text:this._oRb.getText("VALUEHELPDLG_CANCEL"),press:this._onCancel.bind(this),layoutData:new c({priority:ah.NeverOverflow})});if(this._isPhone()){this._oButtonGo=new ac(this.getId()+"-go",{text:this._oRb.getText("VALUEHELPDLG_GO"),type:ai.Emphasized,press:this._onGo.bind(this),visible:false,layoutData:new c({priority:ah.NeverOverflow})});this._oButtonClear=new ac(this.getId()+"-clear",{text:this._oRb.getText("VALUEHELPDLG_CLEAR"),press:this._onClear.bind(this),visible:false,layoutData:new c({priority:ah.NeverOverflow})});this.addButton(this._oButtonGo);this.addButton(this._oButtonClear);}this.addButton(this._oButtonOk);this.addButton(this._oButtonCancel);};p.prototype._createTokenizer=function(){if(this._oTokenizerGrid){return this._oTokenizerGrid;}this._oSelectedTokenTitle=new V(this.getId()+"-selectedTokenTitle");this._oSelectedTokens=new M(this.getId()+"-selectedTokens",{tokenUpdate:function(au){if(this._ignoreRemoveToken){return;}if(au.getParameter("type")===M.TokenChangeType.Removed){var aq=au.getParameter("removedTokens");var an=[];var at=[];for(var ap=0;ap<aq.length;ap++){var am=aq[ap];var ar=am.getKey();if(this._oSelectedRanges&&this._oSelectedRanges[ar]){at.push(ar);this._removeToken(ar);}else{an.push(ar);this._oSelectedItems.remove(ar);this._removeTokenFromTokenizer(ar,this._oSelectedTokens);}}this._removeRangeByKey(at,false);var ao={tokenKeys:an,useDefault:false};if(this._hasListeners("tokenRemove")){this._bIgnoreSelectionChange=true;this.fireTokenRemove(ao);this._bIgnoreSelectionChange=false;}else{ao.useDefault=true;}if(ao.useDefault){an.forEach(function(av){this._changeTableRowSelectionForKey(av,false);}.bind(this));}if(aq.length===1){setTimeout(function(){if(this._oSelectedTokens.getTokens()){var av=this._oSelectedTokens.getTokens().length-1;if(av>=0){this._oSelectedTokens.getTokens()[av].focus();}}}.bind(this));}this._updateTitles();}}.bind(this),ariaLabelledBy:this._oSelectedTokenTitle}).addStyleClass("compVHTokensDiv");this._oRemoveAllSelectedItemsBtn=new ac(this.getId()+"-removeSelItems",{type:ai.Transparent,icon:ab.getIconURI("sys-cancel"),tooltip:this._oRb.getText("VALUEHELPVALDLG_REMOVETOKENS_TOOLTIP"),press:function(){this._oSelectedTokens.destroyTokens();this._removeRangeByKey(Object.keys(this._oSelectedRanges),false);this._oSelectedItems.removeAll();this._bIgnoreSelectionChange=true;if(this._oTable&&this._oTable.clearSelection){this._oTable.clearSelection();}if(this._oTable&&this._oTable.removeSelections){this._oTable.removeSelections();}this._bIgnoreSelectionChange=false;this._updateTitles();}.bind(this),ariaLabelledBy:this._oSelectedTokenTitle}).addStyleClass("compVHRemoveAllBtn");var al=new n(this.getId()+"-selItemsBox",{content:[this._oSelectedTokens,this._oRemoveAllSelectedItemsBtn]}).addStyleClass("compVHTokenizerHLayout");this._oIncludeTokenGrid=new Q(this.getId()+"-selItemsGrid",{width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:[this._oSelectedTokenTitle,al]}).addStyleClass("sapUiRespGridOverflowHidden");this._oExcludedTokenTitle=new C(this.getId()+"-excludedTokenTitle").addStyleClass("compVHSelectedItemsText");this._oExcludedTokens=new M(this.getId()+"-excludedTokens",{tokenChange:function(ar){if(this._ignoreRemoveToken){return;}if(ar.getParameter("type")===M.TokenChangeType.Removed||ar.getParameter("type")===M.TokenChangeType.RemovedAll){var ap=ar.getParameter("removedTokens");var an=[];if(!ap||ap.length==0){if(ar.getParameter("token")){ap=[ar.getParameter("token")];}}if(!ap||ap.length==0){ap=ar.getParameter("tokens");}for(var ao=0;ao<ap.length;ao++){var am=ap[ao];var aq=am.getKey();if(this._oSelectedRanges&&this._oSelectedRanges[aq]){an.push(aq);}}this._removeRangeByKey(an,true);this._updateTitles();}}.bind(this),ariaLabelledBy:this._oExcludedTokenTitle}).addStyleClass("compVHTokensDiv");this._oRemoveAllExcludeItemsBtn=new ac(this.getId()+"-removeExclItems",{type:ai.Transparent,icon:ab.getIconURI("sys-cancel"),tooltip:this._oRb.getText("VALUEHELPVALDLG_REMOVETOKENS_TOOLTIP"),press:function(){this._oExcludedTokens.destroyTokens();this._removeRangeByKey(Object.keys(this._oSelectedRanges),true);this._updateTitles();}.bind(this),ariaLabelledBy:this._oExcludedTokenTitle}).addStyleClass("compVHRemoveAllBtn");var ak=new n(this.getId()+"-exclItemsBox",{content:[this._oExcludedTokens,this._oRemoveAllExcludeItemsBtn]}).addStyleClass("compVHTokenizerHLayout");this._oExcludeTokenGrid=new Q(this.getId()+"-exclItemsGrid",{width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:[this._oExcludedTokenTitle,ak]}).addStyleClass("sapUiRespGridOverflowHidden");this._oTokenizerPanel=new h(this.getId()+"-tokenPanel",{expanded:y.system.desktop,expandable:true,expandAnimation:true,headerText:"",width:"auto",content:[this._oIncludeTokenGrid,this._oExcludeTokenGrid],expand:function(an){this._updateTokenizer();if(an.mParameters.expand&&this._oTable&&!(this._oTable.isA("sap.m.Table"))){var am=window.document.getElementById(this.getId()+"-scrollCont");if(am&&am.scrollTop){am.stop().animate({scrollTop:"1000"},1000);}}}.bind(this)}).addStyleClass("compVHBackgroundTransparent").addStyleClass("compVHTokensPanel").addStyleClass("compValueHelpDialogTokens");if(this._isPhone()){this._oSelectedTokens.addStyleClass("sapMTokenizerMultiLine");this._oExcludedTokens.addStyleClass("sapMTokenizerMultiLine");}this._oTokenizerGrid=new Q(this.getId()+"-tokenizerGrid",{width:"100%",defaultSpan:"L12 M12 S12",hSpacing:0,vSpacing:0,content:this._oTokenizerPanel}).addStyleClass("compVHDarkBackground").addStyleClass("sapUiRespGridOverflowHidden");return this._oTokenizerGrid;};p.prototype._addToken2Tokenizer=function(ao,al,an,ap){var am=(typeof al==="string")?al:"";var ak=this._getTokenByKey(ao,an);if(!ak){ak=new g(e.call(this,ao,ap),{key:ao});an.addToken(ak);this._updateTokenizer();}if(ak){ak.setText(al);ak.setTooltip(am);}};p.prototype._getTokenByKey=function(ao,an){var am=an.getTokens();for(var al=0;al<am.length;al++){var ak=am[al];if(ak.getKey()===ao){return ak;}}return null;};p.prototype._removeToken=function(ak){if(!this._removeTokenFromTokenizer(ak,this._oSelectedTokens)){this._removeTokenFromTokenizer(ak,this._oExcludedTokens);}};p.prototype._removeTokenFromTokenizer=function(am,al){var ak=this._getTokenByKey(am,al);if(ak){this._ignoreRemoveToken=true;al.removeToken(ak);ak.destroy();this._ignoreRemoveToken=false;this._updateTokenizer();return true;}return false;};p.prototype._updateTokenizer=function(){var al=false;if(this._oTokenizerPanel){al=this._oTokenizerPanel.getExpanded();}var aq=this._oSelectedTokens.getTokens().length;var ao=this._oExcludedTokens.getTokens().length;var ap=this._oRb.getText("VALUEHELPDLG_SELECTEDITEMS");var an=this._oRb.getText("VALUEHELPDLG_NONESELECTEDITEMS");var ar=ap.replace("{0}",aq.toString());var ak=this._oRb.getText("VALUEHELPDLG_EXCLUDEDITEMS",ao.toString());var am=aq===0?an:ar;if(this._oTokenizerPanel){if(!al){if(this._isPhone()){ar=this._oRb.getText("VALUEHELPDLG_SELECTEDITEMS_SHORT",aq.toString());ak=this._oRb.getText("VALUEHELPDLG_EXCLUDEDITEMS_SHORT",ao.toString());}am="";if(aq!==0){am=ar;}if(ao!==0){am+=(aq!==0?" / ":"")+ak;}if(am===""){am=an;}}else{if(aq===0&&ao!==0){am=ak;ak="";}}this._oTokenizerPanel.setHeaderText(am);this._oSelectedTokenTitle.setText(am);}else{this._oSelectedTokenTitle.setText(am);}this._oRemoveAllSelectedItemsBtn.setEnabled(aq!==0);this._oRemoveAllExcludeItemsBtn.setEnabled(ao!==0);this._oExcludedTokenTitle.setText(ak);if(aq===0&&ao!==0){this._oIncludeTokenGrid.addStyleClass("displayNone");if(!this._isPhone()){this._oExcludedTokenTitle.addStyleClass("displayNone");}}else{this._oIncludeTokenGrid.removeStyleClass("displayNone");this._oExcludedTokenTitle.removeStyleClass("displayNone");}if(ao===0){this._oExcludeTokenGrid.addStyleClass("displayNone");}else{this._oExcludeTokenGrid.removeStyleClass("displayNone");}};p.prototype._createNavigationControl=function(){if(!this._isPhone()){this._oTabBar=new ad(this.getId()+"-navigation",{upperCase:true,expandable:false,items:[new O(this.getId()+"-itemstable",{visible:true,text:this._oRb.getText("VALUEHELPDLG_ITEMSTABLE"),key:H.DESKTOP_LIST_VIEW}),new O(this.getId()+"-ranges",{visible:true,text:this._oRb.getText("VALUEHELPDLG_RANGES"),key:H.DESKTOP_CONDITIONS_VIEW})],select:function(ak){this._updateView(ak.getParameters().key);}.bind(this)});this._oTabBar.setLayoutData(new i({shrinkFactor:0}));this._oVBox.addItem(this._oTabBar);}else{this._oSelectItemLI=new u(this.getId()+"-itemstable",{type:T.Navigation,title:this._oRb.getText("VALUEHELPDLG_ITEMSTABLE")}).data("key",H.PHONE_LIST_VIEW);this._oDefineConditionsLI=new u(this.getId()+"-ranges",{type:T.Navigation,title:this._oRb.getText("VALUEHELPDLG_RANGES")}).data("key",H.PHONE_CONDITIONS_VIEW);this._oMainListMenu=new s(this.getId()+"-navigation",{mode:af.None,items:[this._oSelectItemLI,this._oDefineConditionsLI],itemPress:function(ak){if(ak){this._updateView(ak.mParameters.listItem.data("key"));}}.bind(this)});this._oMainListMenu.setLayoutData(new i({shrinkFactor:0}));this._oVBox.addItem(this._oMainListMenu);this._oAdvancedSearchLink=new b(this.getId()+"-advancedSearchLink",{text:this._oRb.getText("VALUEHELPDLG_ADVANCEDSEARCH"),press:function(){this._updateView(H.PHONE_SEARCH_VIEW);}.bind(this)}).addStyleClass("compVHAdvancedSearchLink");this._oAdvancedSearchLink.setLayoutData(new i({shrinkFactor:0}));this._oVBox.addItem(this._oAdvancedSearchLink);}};p.prototype._updateNavigationControl=function(){var al=!this.getSupportRangesOnly();var ak=this.getSupportRangesOnly()||this.getSupportRanges();if(this._oTabBar){var am=this._oTabBar.getItems();am[0].setVisible(al);am[1].setVisible(ak);this._oTabBar.setVisible(al&&ak);this._updateDlgTitle();}if(this._oMainListMenu){this._oSelectItemLI.setVisible(al);this._oDefineConditionsLI.setVisible(ak);}};p.prototype._removeRangeByKey=function(an,am){var ak=an;if(typeof ak==="string"){ak=[ak];}ak.forEach(function(at,aq,ap){var ao=this._oSelectedRanges[at];if(ao.exclude===am){if(!ao._oGrid){delete this._oSelectedRanges[at];if(this._oFilterPanel){var ar=ao.exclude?this._oFilterPanel._oExcludeFilterPanel:this._oFilterPanel._oIncludeFilterPanel;if(ap.length==1){ar.removeCondition(at);}else{ar._removeConditionFromMap(at);}}}}},this);if(ak.length>1&&this._oFilterPanel){var al=am?this._oFilterPanel._oExcludeFilterPanel:this._oFilterPanel._oIncludeFilterPanel;al._clearConditions();al._fillConditions();}};p.prototype._createAddRanges=function(){if(!this._oRanges){if(!sap.ui.require("sap/m/P13nFilterPanel")){sap.ui.require(["sap/m/P13nFilterPanel"],function(){this._oRanges=this._createRanges();this._oMainLayout.addItem(this._oRanges);}.bind(this));}else{this._oRanges=this._createRanges();this._oMainLayout.addItem(this._oRanges);}}else{this._oMainLayout.addItem(this._oRanges);}};p.prototype._createRanges=function(){sap.m.P13nConditionPanel.prototype._updateMinMaxDate=function(aB,az,ar){var aE=null;var av=this._oControl&&this._oControl.getModel();if(av){var au=av.getProperty("/characteristics");var aw=av.getProperty("/dialog/name");var at=null;for(var ax=0,aA=au.length;ax<aA;ax++){var aD=au[ax].characteristic;if(aD.name===aw){at="/characteristics/"+ax+"/characteristic";}}if(at){var aq=av.getProperty(at+"/boundaryLow");var aC=av.getProperty(at+"/boundaryHigh");if(aq){var ay=aq.split(",");if(ay.length===3){aE=new Date(ay[0],ay[1],ay[2]);}}if(aC){var ay=aC.split(",");if(ay.length===3){ar=new Date(ay[0],ay[1],ay[2]);}}}}if(aB.value1.setMinDate&&aB.value2.setMaxDate){if(aB.value1&&aB.value1.setMaxDate){aB.value1.setMaxDate(ar instanceof Date?ar:null);}if(aB.value1&&aB.value1.setMinDate){aB.value1.setMinDate(aE instanceof Date?aE:null);}if(aB.value2&&aB.value2.setMinDate){aB.value2.setMinDate(az instanceof Date?az:null);}}};var al=sap.m.P13nConditionPanel.prototype._createValueField;sap.m.P13nConditionPanel.prototype._createValueField=function(aq,aw,ar){var ax=al.call(this,aq,aw,ar);if(ax.setShowValueHelp){var ay=this._oControl;var au=ax.getId();var av=new f();var at=function(){if(ay.zenValueHelpDialog&&!ay.zenValueHelpDialogParent){ay.zenValueHelpDialogParent=ay.zenValueHelpDialog;}ay.zenValueHelpDialog=null;var az=av.prepareCommand(ay.getModel().getProperty("/command/showfilterdialog"),"__BOOLEAN__","X");var aA=ay.getModel().getProperty("/dialog/name");az=av.prepareCommand(az,"__STRING__",aA);az=av.prepareCommand(az,"__STRING2__",au);new Function(az)();};ax.setShowValueHelp(true);ax.attachValueHelpRequest(at);ax.attachLiveChange(function(){this.valueHelp2_selectedKey="";this.valueHelp2_selectedItem=null;});}return ax;};this._oFilterPanel=new w(this.getId()+"-filterPanel",{maxIncludes:this.getMaxIncludeRanges(),maxExcludes:this.getMaxExcludeRanges(),containerQuery:true,filterItemChanged:function(ar){var aq=ar.getParameter("reason");var au=ar.getParameter("key");var ax=ar.getParameter("itemData");if(ax&&aq==="added"){var aw={exclude:ax.exclude,keyField:ax.columnKey,operation:ax.operation,value1:ax.value1,value2:ax.value2};this._oSelectedRanges[au]=aw;if(this._oControl.isManuelInput===false){aw.isManuelInput=false;}var av=new P({key:au,exclude:ax.exclude,columnKey:ax.columnKey,operation:ax.operation});av.setValue1(ax.value1);av.setValue2(ax.value2);this._oFilterPanel.addFilterItem(av);var at=this._getFormatedRangeTokenText(aw.operation,aw.value1,aw.value2,aw.exclude,aw.keyField);this._addToken2Tokenizer(au,at,aw.exclude?this._oExcludedTokens:this._oSelectedTokens,aw.keyField);this._updateTokenizer();}if(ax&&aq==="updated"){var aw=this._oSelectedRanges[au];aw.exclude=ax.exclude;aw.keyField=ax.columnKey;aw.operation=ax.operation;aw.value1=ax.value1;aw.value2=ax.value2;var at=this._getFormatedRangeTokenText(aw.operation,aw.value1,aw.value2,aw.exclude,aw.keyField);this._addToken2Tokenizer(au,at,aw.exclude?this._oExcludedTokens:this._oSelectedTokens,aw.keyField);this._updateTokenizer();}if(aq==="removed"){delete this._oSelectedRanges[au];this._removeToken(au);this._updateTokenizer();}}.bind(this)});this._oFilterPanel._oIncludeFilterPanel.setDisplayFormat(this.getDisplayFormat());this._oFilterPanel._oExcludeFilterPanel.setDisplayFormat(this.getDisplayFormat());this._oFilterPanel._oIncludeFilterPanel._fSuggestCallback=this._fSuggestCallback;this._oFilterPanel._oExcludeFilterPanel._fSuggestCallback=this._fSuggestCallback;this._oFilterPanel._oIncludeFilterPanel._sAddRemoveIconTooltipKey="CONDITION";this._oFilterPanel._oExcludeFilterPanel._sAddRemoveIconTooltipKey="CONDITION";this._oFilterPanel._oIncludeFilterPanel._oControl=this.getOControl();this._oFilterPanel._oExcludeFilterPanel._oControl=this.getOControl();var ap;if(this._aIncludeRangeOperations){for(ap in this._aIncludeRangeOperations){this._oFilterPanel.setIncludeOperations(this._aIncludeRangeOperations[ap],ap);}}if(!this._aIncludeRangeOperations.string){this._oFilterPanel.getIncludeOperations("string").push(sap.m.P13nConditionOperation.Empty);}if(this._aExcludeRangeOperations){for(ap in this._aExcludeRangeOperations){this._oFilterPanel.setExcludeOperations(this._aExcludeRangeOperations[ap],ap);}}if(!this._aExcludeRangeOperations.string){if(this._oFilterPanel.getExcludeOperations("string")){this._oFilterPanel.getExcludeOperations("string").push(sap.m.P13nConditionOperation.Empty);}else{this._oFilterPanel.setExcludeOperations([sap.m.P13nConditionOperation.EQ,sap.m.P13nConditionOperation.Empty],"string");}}if(this._aRangeKeyFields){this._aRangeKeyFields.forEach(function(aq){this._oFilterPanel.addItem(new a({columnKey:aq.key,text:aq.label,typeInstance:aq.typeInstance,type:aq.type,maxLength:aq.maxLength,formatSettings:aq.formatSettings,scale:aq.scale,precision:aq.precision,isDefault:aq.isDefault,values:null}));},this);}if(this._oSelectedRanges){for(var ao in this._oSelectedRanges){var ak=this._oSelectedRanges[ao];var an=new P({key:ao,exclude:ak.exclude,columnKey:ak.keyField,operation:ak.operation});an.setValue1(ak.value1);an.setValue2(ak.value2);this._oFilterPanel.addFilterItem(an);}}var am=new Q(this.getId()+"-rangeFieldsGrid",{width:"100%",defaultSpan:"L12 M12 S12",vSpacing:0,hSpacing:0,content:[this._oFilterPanel]}).addStyleClass("sapUiRespGridOverflowHidden");this._sValidationDialogTitle=this._oRb.getText("VALUEHELPVALDLG_TITLE");this._sValidationDialogMessage=this._oRb.getText("VALUEHELPVALDLG_MESSAGE");this._sValidationDialogFieldMessage=this._oRb.getText("VALUEHELPVALDLG_FIELDMESSAGE");return am;};p.prototype.suggest=function(ak){this._fSuggestCallback=ak;if(this._oFilterPanel){if(this._oFilterPanel._oIncludeFilterPanel){this._oFilterPanel._oIncludeFilterPanel._fSuggestCallback=this._fSuggestCallback;}if(this._oFilterPanel._oExcludeFilterPanel){this._oFilterPanel._oExcludeFilterPanel._fSuggestCallback=this._fSuggestCallback;}}};p.prototype._getKeyFieldByKey=function(al){var ak;if(this._aRangeKeyFields){this._aRangeKeyFields.some(function(am){if(typeof am!=="string"){if(am.key===al){ak=am;return true;}}return false;});}return ak;};p.prototype._validateRanges=function(am,al){if(this._oRanges){if(!this._oRanges.getParent()){am();return;}var ak=this._oFilterPanel.validateConditions();if(!ak){K.show(this._sValidationDialogMessage,{icon:K.Icon.WARNING,title:this._sValidationDialogTitle,actions:[K.Action.OK,K.Action.CANCEL],styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":"",onClose:function(an){if(an===K.Action.OK&&am){am();}if(an===K.Action.CANCEL&&al){al();}}});return;}}am();};p.prototype.setUpdateSingleRowCallback=function(ak){this.fSingleRowCallback=ak;this._updateNavigationControl();};p.prototype._createDefaultTable=function(){if(true){if(!aa||!R||!U){sap.ui.getCore().loadLibrary("sap.ui.table");aa=sap.ui.requireSync("sap/ui/table/library");R=sap.ui.requireSync("sap/ui/table/Table");U=sap.ui.requireSync("sap/ui/table/Column");I=aa.SelectionMode;o=aa.SelectionBehavior;S=aa.VisibleRowCountMode;}this.setTable(new R(this.getId()+"-table"),true);}else{if(!F){F=sap.ui.requireSync("sap/m/Table");q=sap.ui.requireSync("sap/m/Column");}this.setTable(new F(this.getId()+"-table"),true);this.TableStateSearchData();}};function aj(){if(!this._oTablePromise){if(!this._isPhone()){if(!aa||!R||!U){this._oTablePromise=sap.ui.getCore().loadLibrary("sap.ui.table",{async:true}).then(function(){return new Promise(function(ak){sap.ui.require(["sap/ui/table/library","sap/ui/table/Table","sap/ui/table/Column"],function(ao,an,al){if(!this._oTable){aa=ao;R=an;U=al;I=aa.SelectionMode;o=aa.SelectionBehavior;S=aa.VisibleRowCountMode;var am=new R(this.getId()+"-table");this.setTable(am,true);}ak(this._oTable);}.bind(this));}.bind(this));}.bind(this));return this._oTablePromise;}else{this._oTablePromise=new Promise(function(ak){var al=new R(this.getId()+"-table");this.setTable(al,true);ak(al);}.bind(this));}}else{if(!F){this._oTablePromise=new Promise(function(ak){sap.ui.require(["sap/m/Table","sap/m/Column"],function(an,al){if(!this._oTable){F=an;q=al;var am=new F(this.getId()+"-table");this.setTable(am,true);this.TableStateSearchData();}ak(this._oTable);}.bind(this));}.bind(this));return this._oTablePromise;}else{this._oTablePromise=new Promise(function(ak){var al=new F(this.getId()+"-table");this.setTable(al,true);this.TableStateSearchData();ak(al);}.bind(this));}}}return this._oTablePromise;}p.prototype._initializeTable=function(){if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this._oTable.setTitle(y.system.desktop?this._sTableTitleNoCount:null);if(this._bTableCreatedInternal){this._oTable.setSelectionBehavior(o.Row);}this._oTable.setSelectionMode(this.getSupportMultiselect()?I.MultiToggle:I.Single);this._updateNoDataText(this._oRb.getText("VALUEHELPDLG_TABLE_NODATA"));this._oTable.setVisibleRowCountMode(S.Fixed);this._oTable.setMinAutoRowCount(y.system.desktop?5:4);this._oTable.attachRowSelectionChange(function(au){if(this._bIgnoreSelectionChange||!au.getParameter("userInteraction")){return;}var am={tableSelectionParams:au.mParameters,updateTokens:[],useDefault:false,table:this._oTable};if(this._hasListeners("selectionChange")){this._bIgnoreSelectionChange=true;this.fireSelectionChange(am);this._bIgnoreSelectionChange=false;am.updateTokens.forEach(function(ay){this._addRemoveTokenByKey(ay.sKey,ay.oRow,ay.bSelected);}.bind(this));}else{am.useDefault=true;}if(am.useDefault){var av=au.getSource();var ao=au.getParameter("rowIndices");var ar,an=ao.length;var at;var aw;var al;for(ar=0;ar<an;ar++){at=ao[ar];aw=av.getContextByIndex(at);al=aw?aw.getObject():null;if(!al){K.show(this._oRb.getText("VALUEHELPDLG_SELECTIONFAILED"),{icon:K.Icon.ERROR,title:this._oRb.getText("VALUEHELPDLG_SELECTIONFAILEDTITLE"),actions:[K.Action.OK],styleClass:this.$().closest(".sapUiSizeCompact").length?"sapUiSizeCompact":""});return;}}var aq=false;if(av.getBinding("rows").aKeys){aq=true;}if(!this.getSupportMultiselect()){for(var ap=0;ap<Object.keys(this._oSelectedItems.items).length;ap++){this._addRemoveTokenByKey(Object.keys(this._oSelectedItems.items)[ap],null,false);}}for(ar=0;ar<an;ar++){at=ao[ar];aw=av.getContextByIndex(at);al=aw?aw.getObject():null;if(al){var ax;if(aq){ax=aw.sPath.substring(1);}else{ax=al[this.getKey()];}this._addRemoveTokenByKey(ax,al,av.isIndexSelected(at));}}}this._updateTitles();}.bind(this));this._oTable.addStyleClass("compVHMainTable");if(!this._oTable.getParent()||!this._oTable.getParent().isA("sap.ui.comp.smarttable.SmartTable")){this._oTable.bindAggregation("columns","columns>/cols",function(al,am){var ao,an;if(am.getProperty("type")==="string"){an={path:am.getProperty("template")};}if(am.getProperty("type")==="boolean"){ao=new v(al+"-control",{enabled:false,selected:{path:am.getProperty("template")}});}else{ao=new C(al+"-control",{wrapping:false,text:{path:am.getProperty("template"),type:am.getProperty("oType")},tooltip:an});}if(this._oTable.isA("sap.ui.table.AnalyticalTable")){return new j(al,{label:"{columns>label}",tooltip:"{columns>tooltip}",template:ao,width:"{columns>width}",hAlign:ao instanceof v?z.Center:z.Begin,filterProperty:am.getProperty("filter")});}else{return new U(al,{label:"{columns>label}",tooltip:"{columns>tooltip}",template:ao,width:"{columns>width}",hAlign:ao instanceof v?z.Center:z.Begin,sortProperty:am.getProperty("sort"),sorted:am.getProperty("sorted"),sortOrder:am.getProperty("sortOrder"),filterProperty:am.getProperty("filter")});}}.bind(this));}}else{this._oTable.setMode(this.getSupportMultiselect()?af.MultiSelect:af.SingleSelectLeft);this._oTable.setGrowing(true);this._oTable.attachSelectionChange(function(aq){if(this._bIgnoreSelectionChange||!aq.getParameter("userInteraction")){return;}var ap=aq.mParameters;var am={tableSelectionParams:aq.mParameters,updateTokens:[],useDefault:false,table:this._oTable};if(this._hasListeners("selectionChange")){this._bIgnoreSelectionChange=true;this.fireSelectionChange(am);this._bIgnoreSelectionChange=false;am.updateTokens.forEach(function(aw){this._addRemoveTokenByKey(aw.sKey,aw.oRow,aw.bSelected);}.bind(this));}else{am.useDefault=true;}if(am.useDefault){var ar=ap.selected;var ao,an=ap.listItems.length;for(ao=0;ao<an;ao++){var av=ap.listItems[ao];var at=av.getBindingContext();var al=at?at.getObject():null;if(al){var au=al[this.getKey()];if(!this.getSupportMultiselect()){this._oSelectedItems.removeAll();}this._addRemoveTokenByKey(au,al,ar);}}}}.bind(this));if(!this._oTable.getParent()||!this._oTable.getParent().isA("sap.ui.comp.smarttable.SmartTable")){var ak=0;this._oTable.bindAggregation("columns","columns>/cols",function(am,an){var al=an.getProperty("label");var ao=this._oTable.getColumns().length>=2;ak++;return new q(this._oTable.getId()+"-column"+ak,{header:new N(this._oTable.getId()+"-column"+ak+"-label",{text:al}),demandPopin:ao,minScreenWidth:ao?(this._oTable.getColumns().length+1)*10+"rem":"1px"});}.bind(this));}}};p.prototype._addRemoveTokenByKey=function(am,ak,al){am=this._keyDecodeUri(am);if(al){if(this.getDialogInDialog()){ak.isManuelInput=false;}this._oSelectedItems.add(am,ak);this._addToken2Tokenizer(am,this._getFormatedTokenText(am),this._oSelectedTokens);}else{this._oSelectedItems.remove(am);this._removeTokenFromTokenizer(am,this._oSelectedTokens);}};p.prototype._onCloseAndTakeOverValues=function(){var ak=this;var al=function(){var ao;t(ak._oSelectedItems.items);var aq=ak._oSelectedItems.getSelectedItemsTokenArray(ak.getKey(),ak.getDescriptionKey(),ak.getTokenDisplayBehaviour());if(ak._oSelectedRanges){var ap=0;for(var at in ak._oSelectedRanges){ao=ak._oSelectedRanges[at];var ar=ao.tokenValue;var an=ak._oSelectedRanges;if(!ar){ar=ak._getFormatedRangeTokenText(ao.operation,ao.value1,ao.value2,ao.exclude,ao.keyField);}if(!ao._oGrid||ao._oGrid.select.getSelected()){var am=new g({key:"range_"+ap}).data("range",{exclude:ao.exclude,operation:ao.operation,keyField:ao.keyField,value1:ao.value1,value2:ao.value2});am.setText(ar);am.setTooltip(typeof ar==="string"?ar:null);if(ak._oControl){am.isManuelInput=an[at].isManuelInput;}aq.push(am);ap++;}}}ak.fireOk({tokens:aq});};this._validateRanges(al);};function t(al){var am=[];for(var an in al){var ao=al[an];if(ao==null||typeof ao!="object"){continue;}if(!ao.escaped){if(ao.key){ao.key=r.complexParser.escape(ao.key);}if(ao.xkey){ao.xkey=r.complexParser.escape(ao.xkey);}if(ao.displaykey){ao.displaykey=r.complexParser.escape(ao.displaykey);}if(ao.text){ao.text=r.complexParser.escape(ao.text);}ao.escaped=true;if(/([\\\{\}])/g.test(an)){am[an]=ao;}}}for(var ak in am){al[r.complexParser.escape(ak)]=am[ak];delete al[ak];}}p.prototype._onCancel=function(){this.fireCancel();};p.prototype._onGo=function(){this._oFilterBar.search();};p.prototype._onClear=function(){this._oFilterBar.clear();};p.prototype._updateTitles=function(){this._updateTableTitle();this._updateTokenizer();};p.prototype._updateDlgTitle=function(){var al="";var ak;if(this._oTitle){if(this._oTabBar&&!this._oTabBar.getVisible()&&!this.getFilterMode()){if(this._oTabBar.getSelectedKey()===H.DESKTOP_LIST_VIEW){al="VALUEHELPDLG_TITLE";}else{if(this._oTabBar.getSelectedKey()===H.DESKTOP_CONDITIONS_VIEW){if(this.getMaxIncludeRanges()==="1"&&this.getMaxExcludeRanges()==="0"){al="VALUEHELPDLG_SINGLECONDITION_TITLE";}else{al="VALUEHELPDLG_RANGESTITLE";}}}}else{if(this._isPhone()&&!this.getFilterMode()){switch(this._currentViewMode){case H.PHONE_MAIN_VIEW:al="";break;case H.PHONE_LIST_VIEW:al="VALUEHELPDLG_ITEMSTABLE";break;case H.PHONE_SEARCH_VIEW:al="VALUEHELPDLG_ADVANCEDSEARCH";break;case H.PHONE_CONDITIONS_VIEW:if(this.getMaxIncludeRanges()==="1"&&this.getMaxExcludeRanges()==="0"){al="VALUEHELPDLG_SINGLECONDITION_TITLE";}else{al="VALUEHELPDLG_RANGES";}break;default:break;}}}if(!ak){ak=this.getTitle();}if(al){ak=this._oRb.getText(al,ak);}if(ak){this._oTitle.setText(ak);}}};p.prototype._updateTableTitle=function(){if(!this._oTable){return;}var ak=0;this.oRows=this._oTable.getBinding("rows");var al=true;if(this.getModel()&&this.getModel().isCountSupported===false){al=this.getModel().isCountSupported();}if(al){if(this.oRows){ak=this.oRows.getLength();}this._setTableTitle(this._sTableTitle1.replace("{0}",ak));}else{this._setTableTitle(this._sTableTitleNoCount);}};p.prototype._setTableTitle=function(ak){if(y.system.desktop&&this._oTable&&!(this._oTable.isA("sap.m.Table"))){if(this._oTable.getTitle()){this._oTable.getTitle().setText(ak);}else{this._oTable.setTitle(ak);}}};p.prototype.onAfterRendering=function(){x.prototype.onAfterRendering.apply(this);if(this._oTable){this._updateTitles();}if(!this._isPhone()&&this.getContentHeight()===""){if(this.getSupportRangesOnly()&&(this.getMaxExcludeRanges()==="-1"||this.getMaxIncludeRanges()==="-1")){this.setContentHeight("70%");}else{var al=this.getDomRef("scroll");var ak=al.clientHeight;this.setContentHeight(ak+"px");}if(this._oTable&&this._oTable.isA("sap.ui.table.Table")){this._oTable.setVisibleRowCountMode(S.Auto);}}};p.prototype._getDialogOffset=function(am){var ak=am||this._$Window.width();var an={small:600,large:1024};var al=function(aq){var ap=parseInt(window.getComputedStyle(document.body).fontSize,10);return(aq*ap)*2;};var ao=1;if(ak>an.small&&ak<an.large){ao=2;}else{if(ak>=an.large){ao=2;}}return{top:al(ao),left:al(ao)};};p.prototype.exit=function(){x.prototype.exit.apply(this);var ak=function(al){if(al&&al.destroy){al.destroy();}return null;};this._oTokenizerGrid=ak(this._oTokenizerGrid);this._oRanges=ak(this._oRanges);this._oFilterPanel=ak(this._oFilterPanel);if(this._bTableCreatedInternal){this._oTable=ak(this._oTable);}this._oTable=null;this.theTable=null;this._oTabBar=ak(this._oTabBar);this._oMainListMenu=ak(this._oMainListMenu);this._oVBox=ak(this._oVBox);this._oVarManagment=ak(this._oVarManagment);this._aRangeKeyFields=ak(this._aRangeKeyFields);this._aIncludeRangeOperations=ak(this._aIncludeRangeOperations);this._aExcludeRangeOperations=ak(this._aExcludeRangeOperations);if(this._oFilterBar){this._oFilterBar=ak(this._oFilterBar);}this._oRb=ak(this._oRb);this._sTableTitle1=ak(this._sTableTitle1);this._sTableTitle2=ak(this._sTableTitle2);this._sTableTitleNoCount=ak(this._sTableTitleNoCount);this._sValidationDialogTitle=ak(this._sValidationDialogTitle);this._sValidationDialogMessage=ak(this._sValidationDialogMessage);this._sValidationDialogFieldMessage=ak(this._sValidationDialogFieldMessage);this._oSelectedItems=ak(this._oSelectedItems);this._oSelectedRanges=ak(this._oSelectedRanges);this._oButtonOk=ak(this._oButtonOk);this._oButtonCancel=ak(this._oButtonCancel);if(this._oButtonGo){this._oButtonGo=ak(this._oButtonGo);}if(this._oButtonClear){this._oButtonClear=ak(this._oButtonClear);}if(this._oColSearchBox){this._oColSearchBox=ak(this._oColSearchBox);}};p.prototype.setRangeKeyFields=function(ak){this._aRangeKeyFields=ak;};p.prototype.getRangeKeyFields=function(){return this._aRangeKeyFields;};p.prototype.setIncludeRangeOperations=function(ak,al){al=al||"default";this._aIncludeRangeOperations[al]=ak;if(this._oFilterPanel){this._oFilterPanel.setIncludeOperations(this._aIncludeRangeOperations[al],al);}};p.prototype.setExcludeRangeOperations=function(ak,al){al=al||"default";this._aExcludeRangeOperations[al]=ak;if(this._oFilterPanel){this._oFilterPanel.setExcludeOperations(this._aExcludeRangeOperations[al],al);}};p.prototype._getFormatedTokenText=function(an){var ao=this._oSelectedItems.getItem(an);var am=ao[this.getDescriptionKey()];var al=ao.displaykey;if(!al){al=ao[this.getKey()];}if(am===undefined){if(typeof ao==="string"){am=ao;}else{am=al;}}else{var ak=this.getTokenDisplayBehaviour()?this.getTokenDisplayBehaviour():L.descriptionAndId;if(al===am&&ak!==L.descriptionOnly){am="";}am=D.getFormattedExpressionFromDisplayBehaviour(this.getTokenDisplayBehaviour()?this.getTokenDisplayBehaviour():L.descriptionAndId,al,am);}return am;};p.prototype._getFormatedRangeTokenText=function(at,an,al,ak,ar){var ap=this._getKeyFieldByKey(ar);var ao=an;var am=al;if(ap){if(!ap.typeInstance&&k._createKeyFieldTypeInstance){k._createKeyFieldTypeInstance(ap);}if(ap.typeInstance){ao=ap.typeInstance.formatValue(an,"string");am=ap.typeInstance.formatValue(al,"string");}}var aq=D.getFormattedRangeText(at,ao,am,ak);if(this._aRangeKeyFields&&this._aRangeKeyFields.length>1&&ap&&ap.label&&aq!==""){aq=ap.label+": "+aq;}return aq;};p.prototype._isPhone=function(){var al=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1;var ak=!y.system.desktop&&(y.system.phone||y.system.tablet);return al||ak;};p.prototype._hasListeners=function(ak){if(this._bTableCreatedInternal){return false;}return this.hasListeners(ak);};p.prototype._rotateSelectionButtonIcon=function(ak){if(!y.system.phone){var al=sap.ui.getCore().byId(this.oSelectionButton.$("img")[0].id);if(ak){al.addStyleClass("sapUiVHImageExpand");}else{al.removeStyleClass("sapUiVHImageExpand");}}};function e(al,am){if(!am){am=this.getKey();}al=al.replace(/[^a-zA-Z0-9]/g,"");am=am.replace(/[^a-zA-Z0-9]/g,"");var ak=am?am+"-"+al:al;if(!this._oTokenIdCount[ak]){this._oTokenIdCount[ak]=0;}this._oTokenIdCount[ak]++;return this.getId()+"-token-"+ak+"_"+this._oTokenIdCount[ak];}define("zen.rt.components.filterpanel/resources/js/ValueHelpDialog",["./abstract_filter_m_handler"],function(ak){f=ak;return p;});return p;},true);define("zen.rt.components.filterpanel/resources/js/filterpanel_m_handler",["./abstract_filter_m_handler","./ValueHelpDialog","zen.rt.components.filterpanel/resources/js/MessageBundle","css!../css/dimensionFilter.css"],function(b,d,c){$.sap.require("sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation");$.sap.require("sap.ui.table.TreeTable");var e=function(){var s=this;var g=false;b.apply(this,arguments);this.getListItemElement=function(K){if(K.hasClass("sapzenfilterpanelM-ListItem")){return K;}else{return K.parents(".sapzenfilterpanelM-ListItem");}};this.getContextMenuAction=function(Q,N,L){var M=N.getModel().getProperty("/command/createcontextmenu");if(M&&N.ZEN_IdToDimensionMap){var P=this.getListItemElement(L);if(P&&P[0]){var O=N.ZEN_IdToDimensionMap[P[0].id];if(O){var K=s.prepareCommand(M,"__STRING__",Q);K=s.prepareCommand(K,"__STRING2__",O);K=s.prepareCommand(K,"__STRING3__",L[0].id);return new Function(K);}}}return null;};function B(R,L,K){var Q;var O=R.getProperty(L);var N=null;if(R.getProperty("/property/pauserefresh")){N=x(R,L);}else{N=R.getProperty(L+"/axis");if(N===K){return;}}R.setProperty(L+"/axisdirty",true);R.setProperty(L+"/axis",K);if(N!=="FREE"){Q=R.getProperty("/axis/"+N.toLowerCase());for(var M=0;M<Q.length;M++){var P=Q[M].entry.name;if(P===O.name){Q.splice(M,1);break;}}R.setProperty("/axis/"+N.toLowerCase(),Q);}if(K!=="FREE"){Q=R.getProperty("/axis/"+K.toLowerCase());Q.push({entry:{name:O.name,text:O.text}});R.setProperty("/axis/"+K.toLowerCase(),Q);}if(N==="FREE"||K==="FREE"){j(R);}if(!R.getProperty("/property/pauserefresh")){s.submitAll(R,true,true);}s.forceModelUpdate(R,"/axis");}function x(Q,L){var N=Q.getProperty("/axis");var O=Q.getProperty(L);if(!N){return Q.getProperty(L+"/axis");}for(var P in N){var K=N[P];if(K&&K.length>0){for(var M=0;M<K.length;M++){if(O.name&&K[M]&&K[M].entry&&O.name===K[M].entry.name){return P.toUpperCase();}}}}return Q.getProperty(L+"/axis");}this.getMainContent=function(L){var M=L.getModel(),K;M.setSizeLimit(1000);if(M.getProperty("/property/navigationpanel")){K=w(L);}else{K=t(L);}return K;};function t(L,K,N){var M=new sap.m.List({items:{path:"/characteristics",factory:p(L,N,K),filters:K},noDataText:"{/text/nodata}"});L.ZENCharLists=[M];return M;}function w(K){K.ZENCharLists=[];var L=new sap.ui.layout.VerticalLayout({width:"100%"}).addStyleClass("sapzenfilterpanelM-NavigationLayout");L.addContent(l(K,"columns"));L.addContent(l(K,"rows"));L.addContent(l(K,"free"));return L;}function l(M,P){var O=new sap.m.Label({text:"{/text/"+P.toUpperCase()+"}",design:sap.m.LabelDesign.Bold}).addStyleClass("sapUiSmallMarginBegin");var K=new sap.m.Toolbar({content:[O],design:sap.m.ToolbarDesign.Solid});var L=new sap.m.Panel().addStyleClass("sapUiNoContentPadding");L.setHeaderToolbar(K);if(P==="free"){j(M.getModel());}var N=new sap.m.List({items:{path:"/axis/"+P,factory:p(M,P)},noDataText:"{/text/nodata}"});N.addEventDelegate({onAfterRendering:function(){var X=N.getModel();var U=X.getProperty("/axischanged");var S=X.getProperty("/axisfilterscrollpos");if(!U&&(S===0||S)){var T=$("#"+M.getId()+" .sapzenfilterpanelM-MarkedRow");var W=N.$().parents(".sapzenfilterpanelM-mainpage").children("section");if(T&&T.position()){var R=T.position().top+T.parent().parent().position().top;var V=T.position().top+T.height()+T.parent().parent().position().top;var Q=S+W.height();if(V>Q){S=S+(V-Q);}else{if(S>R){S=R;}}T.removeClass("sapzenfilterpanelM-MarkedRow");}W.scrollTop(S);X.setProperty("/axisfilterscrollpos",null);}if(U){X.setProperty("/axischanged",null);}}});L.addContent(N);M.ZENCharLists.push(N);return L;}function j(O){var K=[];var N=O.getProperty("/characteristics");if(N){for(var L=0;L<N.length;L++){var M=N[L].characteristic;if(M.axis==="FREE"){K.push({entry:{name:M.name,text:M.text}});}}}O.setProperty("/axis/free",K);}function q(P,O){var M=P.getProperty("/characteristics");for(var L=0,K=M.length;L<K;L++){var N=M[L].characteristic;if(N.name===O){return"/characteristics/"+L+"/characteristic";}}}function h(O,M,K){var N=O.getProperty("/property/compactDisplayMode")&&O.getProperty("/property/variablescreen");if(N){var L=new sap.ui.layout.GridData({span:K,linebreakS:true});M.setLayoutData(L);}}function p(K,L){return function(S,Y){var af,P,R,M=Y.getModel(),Z=L&&L!=="free",V=M.getProperty(L?Y.getPath("entry/name"):Y.getPath("characteristic/name")),O=L?q(M,V):Y.getPath("characteristic"),N=M.getProperty(O+"/valuehelp"),T=I(V,N,M,O),ad=function(){s.doLoadMembers(K,V);};if(!O){return new sap.m.CustomListItem({visible:false});}var W=Y.getPath();if(!K.ZEN_multiInput){K.ZEN_multiInput=[];}K.ZEN_multiInput.push(T);if(M.getProperty("/property/label")){R=new sap.m.Title().bindProperty("text",{path:O,formatter:function(ai){return(ai.mandatory?"* ":"")+ai.text;}});R.bindProperty("tooltip",{path:O,formatter:function(ai){return ai.text;}});var ah=new sap.m.Toolbar();var U=M.getProperty("/property/compactDisplayMode")&&M.getProperty("/property/variablescreen");h(M,ah,"XL6 L6 M6 S12");if(L){var ab=new sap.m.ToggleButton({icon:"sap-icon://menu2",pressed:L==="columns",press:function(){var ai=this.$().parents(".sapzenfilterpanelM-mainpage").children("section");M.setProperty("/axisfilterscrollpos",ai.scrollTop());M.setProperty("/axischanged",true);B(M,O,L==="columns"?"FREE":"COLUMNS");o(K);}});ab.addEventDelegate({onAfterRendering:function(){ab.$().find(".sapMBtnIconLeft").css("transform","rotate(90deg)").css("-ms-transform","rotate(90deg)").css("-webkit-transform","rotate(90deg)");ab.$().find(".sapMBtnIcon").css("display","table");}});ah.addContent(ab);var ac=new sap.m.ToggleButton({icon:"sap-icon://menu2",pressed:L==="rows",press:function(){var ai=this.$().parents(".sapzenfilterpanelM-mainpage").children("section");M.setProperty("/axisfilterscrollpos",ai.scrollTop());M.setProperty("/axischanged",true);B(M,O,L==="rows"?"FREE":"ROWS");o(K);}});ac.addEventDelegate({onAfterRendering:function(){}});ah.addContent(ac);var ag=Y.getPath("entry/text");if(!M.getProperty(ag)){M.setProperty(ag,M.getProperty(O+"/text"));}}ah.addContent(R);if(Z){var aa="/axis/"+L;var Q=M.getProperty(aa);if(Q.length>1){var ae=parseInt(W.substring(W.lastIndexOf("/")+1),10);ah.addContent(new sap.m.ToolbarSpacer());ah.addContent(new sap.m.Button({icon:"sap-icon://navigation-up-arrow",press:function(){var ai=ae===0?Q.length-1:ae-1;M.setProperty(O+"/axisdirty",true);u(M,aa,V,ae,ai,this.$());},type:sap.m.ButtonType.Transparent}));ah.addContent(new sap.m.Button({icon:"sap-icon://navigation-down-arrow",press:function(){var ai=ae===Q.length-1?0:ae+1;M.setProperty(O+"/axisdirty",true);u(M,aa,V,ae,ai,this.$());},type:sap.m.ButtonType.Transparent}));}}ah.addEventDelegate({onAfterRendering:function(){ah.$().css("border","none");if(U){ah.$().parent().addClass("cMborderToolbar");}}});if(U){P=new sap.ui.layout.Grid({width:"100%",content:[ah,T]});}else{P=new sap.ui.layout.VerticalLayout({width:"100%",content:[ah,T]});}}else{P=new sap.ui.layout.VerticalLayout({width:"100%",content:[T]});}P.addEventDelegate({onAfterRendering:function(){if(U){$(".sapMLIB").addClass("cMremoveLines sapMLIB");$(".sapzenfilterpanelM .sapMList").addClass("cMremoveBorder sapzenfilterpanelM sapMList");$(".sapMPageSubHeader").addClass("cMborder sapzenfilterpanelM-mainpage");$(".sapMPageEnableScrolling").addClass("cMpaddingFPContent");$(".sapUiRespGridBreakS").addClass("cMsapUiGridSpan");$(".sapMTB").addClass("cMremoveBorder sapMTB");}}});af=new sap.m.CustomListItem({content:[P.addStyleClass("sapUiContentPadding")]});if(N&&T.attachValueHelpRequest){T.attachValueHelpRequest(ad);}T.addEventDelegate({onfocusin:function(){K.$().css("z-index","1");},onfocusout:function(){K.$().css("z-index","");},onAfterRendering:function(){T.$().parent().addClass("cMpaddingInputFields");T.$().find("input").on("keydown",function(am){if(am.which===9&&K.ZEN_multiInput&&K.ZEN_multiInput.length>1){var ak=am.shiftKey?-1:1;for(var aj=0;aj<K.ZEN_multiInput.length;aj++){if(K.ZEN_multiInput[aj].getId()===T.getId()){if(aj+ak<0){K.$().find("input").first().focus();return false;}if(K.ZEN_multiInput[aj+ak]){K.ZEN_multiInput[aj+ak].$().find("input").focus();return false;}}}}if(am.ctrlKey&&am.keyCode==67&&T.sCharName!==undefined&&T.sType!=="DATE"){var ai=M.getProperty("/command/getMultipleMembers");var al=s.prepareCommand(ai,"__STRING__",T.sCharName);new Function(al)();}});}});if(K.ZEN_IdToDimensionMap){K.ZEN_IdToDimensionMap[af.getId()]=V;}var X=M.getProperty("/axisfilterselected");if(X&&X===V){af.addStyleClass("sapzenfilterpanelM-MarkedRow");M.setProperty("/axisfilterselected",null);}return af.addStyleClass("sapzenfilterpanelM-ListItem");};}function o(N){var M=N.ZENCharLists;for(var L=0;L<M.length;L++){var O=M[L].getBinding("items");var K=O.aFilters;if(K&&K.length>0){O.filter([]);O.filter(K);}}}function u(R,N,P,L,M,O){var K=R.getProperty(N);var Q=O.parents(".sapzenfilterpanelM-mainpage").children("section");R.setProperty("/axisfilterscrollpos",Q.scrollTop());R.setProperty("/axisfilterselected",P);K.splice(M,0,K.splice((L),1)[0]);R.setProperty(N,K);if(!R.getProperty("/property/pauserefresh")){s.submitAll(R,true,true);}s.forceModelUpdate(R,"/axis");}function G(){var K=new sap.m.Dialog({title:c.getText("CONFIRM_FILTER"),content:new sap.m.TextArea({width:"100%",enabled:false}),beginButton:new sap.m.Button({text:c.getText("OK"),press:function(){g=true;K.close();}.bind(this)}),endButton:new sap.m.Button({text:c.getText("CANCEL"),press:function(){g=false;K.close();}.bind(this)})});return K;}function I(Q,R,P,L){var N;var M=false;var T,K=P.getProperty(L+"/type"),V=P.getProperty(L+"/rangeallowed"),S=P.getProperty(L+"/intervalallowed"),W=P.getProperty(L+"/exclusionallowed"),X=P.getProperty(L+"/singleonly");if(K==="DATE"&&X&&!W&&!V){if(S){T=new sap.m.DateRangeSelection({dateValue:{path:"/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:n(Q,P,"from")},secondDateValue:{path:"/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:n(Q,P,"to")},change:function(aa){if(aa.getParameter("valid")){var Y=aa.getParameter("from")?aa.getParameter("from"):aa.getParameter("to"),Z=aa.getParameter("to")?aa.getParameter("to"):aa.getParameter("from");z(T.getModel(),Q,[new sap.m.Token().data("range",{exclude:false,operation:"BT",value1:Y,value2:Z})]);}else{T.invalidate();D(aa.getParameter("newValue"),Q,P);}}});}else{var U=P.getProperty("/dateformat");T=new sap.m.DatePicker({valueFormat:U?U:"yyyyMMdd",dateValue:{path:"/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:n(Q,P,"from")},change:function(Z){if(Z.getParameter("valid")){var Y=new sap.m.Token();Y.setKey(Z.getParameter("value")+"_REG");z(T.getModel(),Q,[Y]);}else{T.invalidate();D(Z.getParameter("value"),Q,P);}}});}}else{T=new sap.m.MultiInput({showValueHelp:R,enableMultiLineMode:{path:"/filters",mode:sap.ui.model.BindingMode.OneWay,formatter:k(Q,P)},tokenChange:function(Z){var Y=T.getModel().getProperty("/filters")[Q];if(Z.getParameter("type")===sap.m.MultiInput.TokenChangeType.Removed||Z.getParameter("type")===sap.m.MultiInput.TokenChangeType.RemovedAll){if(Y){Y.dirty=true;Y.duplicate=false;}z(T.getModel(),Q,T.getTokens());}else{if(Y){Y.dirtyForPaste=true;}}}});T.addValidator(function(Y){if(!M){D(Y.text,Q,T.getModel());return new sap.m.Token();}});T.onsapfocusleave=function(){if(this._validateCurrentText){this._validateCurrentText(true);}sap.m.MultiInput.prototype.onsapfocusleave.apply(this,arguments);};T.onpaste=function(Y){N=this;M=true;var Z="";if(window.clipboardData){Z=window.clipboardData.getData("Text");}else{Z=Y.originalEvent.clipboardData.getData("text/plain");}var aa=G();aa.open();if(aa&&aa.getContent()){N.setValue("");aa.getContent()[0].setValue(Z);aa.attachBeforeClose(function(){if(g){if(P.getProperty("/property/variablescreen")&&sap.zen.MessageViewHandler){sap.zen.MessageViewHandler.clearMessages();}}});aa.attachAfterClose(function(){if(g){var ab=P.getProperty("/command/sendMultipleMembers");var ac=s.prepareCommand(ab,"__STRING__",N.sCharName);ac=s.prepareCommand(ac,"__STRING6__",Z);setTimeout(function(){N.setValue("");}.bind(N),0);new Function(ac)();M=false;}else{N.setValue("");M=false;}});}};var O=T.onsapdelete;T.onsapdelete=function(Y){if(!this.getEditable()){return;}if(this.getValue()&&!this._completeTextIsSelected()){return;}if(this._tokenizer.getEditable()){var aa=this._tokenizer.getSelectedTokens();var Z=this._tokenizer.getTokens();if(aa&&Z&&aa.length===Z.length){this._tokenizer.removeAllTokens();return;}}O.apply(this,Y);};}h(P,T,"XL6 L6 M6 S12");T.sCharName=Q;T.sType=K;return T;}function n(L,M,K){return function(O){var P,Q,N;if(O&&L&&O[L]){P=O[L];if(P.ranges){Q=P.ranges[0];if(Q){N=Q[K];if(N){return m(M).parse(N.key);}}}}return null;};}function D(L,O,P){var M=P.getProperty("/filters"),K,N=P.getProperty("/property/pauserefresh");if(M){K=M[O];}if(K){K.dirty=true;K.input=L;}if(!N){s.submitAll(P,!P.getProperty("/property/variablescreen"),!N&&!P.getProperty("/property/variablescreen"));}else{s.submitAll(P,false,!N&&!P.getProperty("/property/variablescreen"));}}function k(K,L){return function(U){var R,X,aj,ak,aa,am,ai,S,af,ae,ac,N,ab,O,ah,ag,Z,W,V,T,al,Y;if(!U||!K||!U[K]){this.setTokens([]);return true;}else{am=U[K];}R=[];if(am&&am.ranges){O=L.getProperty("/property/memberdisplay");ag=s.getCharacteristicByName(L,K);if(ag.memberdisplay){O=ag.memberdisplay;}if(!ag.valuehelp){ah=true;}else{if(ag.type==="DATE"&&!L.getProperty("/dialog/hierarchical")){W=m(L);}}for(aj=0,ak=am.ranges.length;aj<ak;aj++){aa=am.ranges[aj];if(!W&&!aa.exclude&&(!aa.operation||aa.operation==="EQ")){X=aa.from;Z=X.displaykey?X.displaykey:X.key;if(ah||Z===X.text){ai=sap.ui.comp.util.FormatUtil.getFormattedExpressionFromDisplayBehaviour("idOnly",Z);}else{ai=sap.ui.comp.util.FormatUtil.getFormattedExpressionFromDisplayBehaviour(A(O),Z,X.text);}if(!ah||Z||ai){if(!X.xkey){s.attachXkey(X);}S=new sap.m.Token();S.setKey(X.xkey);S.setText(ai);S.setTooltip(ai);R.push(S);}}else{af=aa.operation?aa.operation:"EQ";ae=F(aa.from.key,af);ac=aa.to?aa.to.key:"";var ad=F(aa.from.inputstring,af);var M=aa.to?aa.to.inputstring:"";al=F(aa.from.text?aa.from.text:aa.from.inputstring,af);var Q=aa.from.displaykey?aa.from.displaykey:aa.from.key;if(al!==Q){al=sap.ui.comp.util.FormatUtil.getFormattedExpressionFromDisplayBehaviour(A(O),Q,al);}Y="";if(aa.to){Y=aa.to.text?aa.to.text:aa.to.inputstring;var P=aa.to.displaykey?aa.to.displaykey:aa.to.key;if(Y!==P){Y=sap.ui.comp.util.FormatUtil.getFormattedExpressionFromDisplayBehaviour(A(O),P,Y);}}N=aa.exclude?true:false;ab="key";if(W){if(ae){V=W.parse(ae);ae=sap.ui.core.format.DateFormat.getDateInstance().format(V);}if(ac){T=W.parse(ac);ac=sap.ui.core.format.DateFormat.getDateInstance().format(T);}}if(!aa.starSearchSignAssigned||aa.from.key.indexOf("*")===-1){ai=d.prototype._getFormatedRangeTokenText(af,al?al:ae,Y?Y:ac,N,ab);}else{if(aa.from.key){ai=aa.from.key;}else{aa.key;}}S=new sap.m.Token();S.setKey("r"+aj);S.setText(ai);S.setTooltip(ai);S.data("range",{exclude:N,operation:af,keyField:ab,value1:V?V:(ad?ad:ae),value2:T?T:(M?M:ac)});R.push(S);}}}this.setTokens(R);return true;};}function F(L,K){if(L){switch(K){case"StartsWith":L=L.substring(0,L.length-1);break;case"EndsWith":L=L.substring(1);break;case"Contains":L=L.substring(1,L.length-1);break;}}return L;}this.finalizeUpdate=function(Q,O,M){var R=Q.getModel();var P=R.getProperty("/axis");var L=O.axis;if(L&&P&&(M||!r(L,P))){if(O.filtercanceled){R.setProperty("/axis",L);C(R);}else{if(P.rows.dirty){R.setProperty("/axis/columns",L.columns);C(R,"columns");}else{if(P.columns.dirty){R.setProperty("/axis/rows",L.rows);C(R,"rows");}else{R.setProperty("/axis",L);C(R);}}}j(R);o(Q);}if(O.selectedinputstring!==undefined){var K=navigator.userAgent;if((K.indexOf("MSIE ")>-1||K.indexOf("Trident/")>-1)&&K.indexOf("Edge")===-1){H(O.selectedinputstring);}else{if(K.indexOf("Chrome")>-1&&K.indexOf("Edge")===-1&&navigator.clipboard!=undefined){navigator.clipboard.writeText(O.selectedinputstring);}else{prompt(c.getText("COPY_INPUT_STRING"),O.selectedinputstring);}}}if(Q&&Q.ZEN_multiInput){for(var N=0;N<Q.ZEN_multiInput.length;N++){if(Q.ZEN_multiInput[N]){Q.ZEN_multiInput[N]._bShowIndicator=true;}}}};function H(L){var K=document.createElement("textarea");K.value=L;K.id="clipboard";document.body.appendChild(K);K.select();document.execCommand("copy");document.body.removeChild(K);}function r(L,N){if(L.rows.length!==N.rows.length||L.columns.length!==N.columns.length){return false;}for(var M=0,K=L.rows.length;M<K;M++){if(L.rows[M].entry.name!==N.rows[M].entry.name){return false;}}for(var M=0,K=L.columns.length;M<K;M++){if(L.columns[M].entry.name!==N.columns[M].entry.name){return false;}}return true;}function C(N,R){var L=[];var T=N.getProperty("/characteristics");if(R){L.push(R);}else{L=["rows","columns"];}for(var Q=0;Q<L.length;Q++){var U=L[Q];var M=N.getProperty("/axis/"+U);if(M&&M.length>0){for(var P=0;P<T.length;P++){var S=T[P].characteristic;if(S.axis===U.toUpperCase()){for(var O=0;O<M.length;O++){var K=M[O].entry;if(K.name===S.name){K.text=S.text;break;}}}}}}}this.getValueHelpDialog=function(ao,am){var W,al,S,ab,ai,ak,P,ah,Y,X="xkey",ag=-1,N=ao.getModel(),ac=N.getProperty("/dialog/name"),Q=N.getProperty("/dialog/hierarchical"),Z=N.getProperty("/command/destroyfilterdialog"),ar=N.getProperty("/dialog/range/visible"),V=N.getProperty("/dialog/exclusionallowed"),an=N.getProperty("/dialog/singleonly"),aq=N.getProperty("/dialog/pattern"),Y=N.getProperty("/dialog/membertype"),O=N.getProperty("/dialog/selection/maxelements"),M=N.getProperty("/property/memberdisplay"),ae=[],L=N.getProperty("/dialog/attributes"),U=false;$.sap.require("sap.ui.core.IconPool");am=(typeof am!=="undefined")?am:true;if(am){ao.valueHelp2="";ao.zenValueHelpDialogParent=null;}else{ar=false;V=false;an=true;U=true;}W=new d({title:"{/dialog/title}",supportMultiselect:!an,supportRanges:ar||V,supportRangesOnly:!N.getProperty("/property/showDateMemberSelector")&&Y==="DATE",key:X,descriptionKey:"text",moreMembersExist:"{/dialog/selection/maxelements}",filterSelection:"",dialogInDialog:U,ok:function(ay){if(this.getDialogInDialog()){var av="",ax="",az;for(var at in this._oSelectedItems.items){az=this._oSelectedItems.items[at];av=az.key||az.displaykey;ax=az.xkey||az.key;break;}var au=sap.ui.getCore().getControl(ao.valueHelp2);if(au){au.valueHelp2_selectedKey=ax;au.valueHelp2_selectedItem=az;ao.isManuelInput=false;au.setValue(av);au.fireChange();}X="key";this._updateTokenizer();}else{z(N,ac,ay.getParameter("tokens"));ao.zenValueHelpDialog=null;ao.isManuelInput=true;}var aw=s.prepareCommand(Z,"__BOOLEAN__"," ");aw=s.prepareCommand(aw,"__BOOLEAN2__",ao.valueHelp2?"X":" ");new Function(aw)();W.close();},cancel:function(){if(!this.getDialogInDialog()){ao.zenValueHelpDialog=null;}var at=s.prepareCommand(Z,"__BOOLEAN__","X");at=s.prepareCommand(at,"__BOOLEAN2__",ao.valueHelp2?"X":" ");new Function(at)();W.close();},afterClose:function(au){if(ao.zenValueHelpDialog){if(!this.getDialogInDialog()){ao.zenValueHelpDialog=null;}var at=s.prepareCommand(Z,"__BOOLEAN__","X");at=s.prepareCommand(at,"__BOOLEAN2__",ao.valueHelp2?"X":" ");new Function(at)();}if(this.getDialogInDialog()){this.setDialogInDialog(false);ao.valueHelp2="";}else{W.destroy();}}});W.setOControl(ao);if(Q){W.setTable(new sap.ui.table.TreeTable());}var R=[sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.LT,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.LE,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.GT,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.GE];if(ar){W.setIncludeRangeOperations(R);}if(V){W.setExcludeRangeOperations(R);}if(ar&&an){W.setMaxIncludeRanges("1");W.setMaxExcludeRanges("1");R=[sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.BT];}if(ar&&!V){W.setMaxExcludeRanges("0");}if(!ar&&V){R=[sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EQ];}if(aq){R.push(sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.Contains,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.StartsWith,sap.ui.comp.valuehelpdialog.ValueHelpRangeOperation.EndsWith);}W.setIncludeRangeOperations(R);W.setExcludeRangeOperations(R);ah=W.getTable();ah.setEnableSelectAll(!O);W._setTableTitle=function(aE){var aG=new sap.m.Title();aG.setText(aE);aG.addStyleClass("sapUiTableHdrTitle");var aw=new sap.ui.layout.BlockLayout();var aH=new sap.ui.layout.BlockLayoutRow();var aF=new sap.ui.layout.BlockLayoutCell();aF.addContent(aG);var ay=new sap.ui.layout.BlockLayoutCell();var az=new sap.m.Title({width:"5px"});if(W.getMoreMembersExist()){var aD=new sap.m.Label();aD.setText(N.getProperty("/text/MORE_THAN_MAX_MEMBERS"));var aC=new sap.ui.core.Icon({size:"14px",src:sap.ui.core.IconPool.getIconURI("message-warning"),useIconTooltip:false});ay.addContent(aC);ay.addContent(az);ay.addContent(aD);}var ax=new sap.m.Label({text:N.getProperty("/text/display"),width:"100%"});ax.addStyleClass("sapMListHdr");var au=new sap.m.SelectList({items:{path:"/dialog/display",template:new sap.ui.core.ListItem({key:"{key}",text:"{text}"})},selectionChange:function(aK){M=this.getSelectedItem().getKey();W.setTokenDisplayBehaviour(A(M));var aL=i(N,M);if(!O&&!Q){S.setValue("");ah.getBinding("rows").filter([]);}else{S.clear();}s.doSetDisplay(ao,M);for(var aJ in ae){var aI=ae[aJ];aL.push({template:aI.getValue(),label:aI.getLabel()});}y(ah,al,aL);W.update();}});var av=[ax,au];if(L.length>0){var at=new sap.m.List({mode:sap.m.ListMode.MultiSelect,items:{path:"/dialog/attributes",template:new sap.m.DisplayListItem({value:"{key}",label:"{text}"})},headerText:N.getProperty("/text/attributes"),includeItemInSelection:true,selectionChange:function(aM){W.setTokenDisplayBehaviour(A(M));var aN=i(N,M);var aI=this.getSelectedItems();ae=[];var aK=[];var aJ=0;for(var aO in aI){var aL=aI[aO];if(aL!==null){aN.push({template:"attributeMembers/"+aJ+"/text",label:aL.getLabel()||aL.getValue()});ae.push(aL);aK.push(aL.getValue());aJ++;}}if(!O&&!Q){S.setValue("");ah.getBinding("rows").filter([]);}else{S.clear();}s.doSetAttributes(ao,aK.join());y(ah,al,aN);}});av.push(at);}var aA=new sap.m.Popover({showHeader:false,placement:"Left",bounce:true,content:av});au.setModel(N);if(L.length>0){at.setModel(N);}var aB=new sap.ui.core.Icon({size:"18px",color:"black",src:sap.ui.core.IconPool.getIconURI("action-settings"),tooltip:N.getProperty("/text/OPEN_DISPLAY_SETTINGS"),press:function(aL){au.setSelectedKey(M);if(at){var aK=at.getItems();if(ae.length>0){aK:for(var aI in aK){for(var aJ in ae){if(aK[aI].getValue()===ae[aJ].getValue()){at.setSelectedItem(aK[aI],true);continue aK;}}}}}aA.openBy(this);}});aB.addStyleClass("sapDisplayIcon"),au.addStyleClass("sapDisplayList");ay.addContent(new sap.m.Title({width:"10px"}));ay.addContent(aB);aH.addContent(aF);aH.addContent(ay);aH.addStyleClass("sapMMoreMembers");aw.addContent(aH);this._oTable.setTitle(aw);};ah.attachSort(function(){setTimeout(function(){ao.zenValueHelpDialog.update();},0);});if(Q&&ah.attachToggleOpenState){ah.attachToggleOpenState(function(aw){var ax=!ah.$("selall").hasClass("sapUiTableSelAll")&&!W.getFilterBar().ZEN_searchValue;var au,at,ay,av;au=aw.getParameters();W._bIgnoreSelectionChange=true;if(au.expanded){at=au.rowContext;ay=at.oModel;if(ay.getProperty(at.sPath+"/0/node")){av=s.prepareCommand(ay.getProperty("/command/expandnode"),"__STRING__",ay.getProperty(at.sPath+"/key"));av=s.prepareCommand(av,"__STRING2__",at.sPath);av=s.prepareCommand(av,"__STRING3__",ay.getProperty(at.sPath+"/keytype"));new Function(av)();}else{ao.zenValueHelpDialog.update();}if(ax){setTimeout(function(){ah.$("selall").removeClass("sapUiTableSelAll");},0);}}});var aj=ah.onclick;ah.onclick=function(){if(aj){aj.apply(ah,arguments);}W._bIgnoreSelectionChange=false;};W.attachTokenRemove(function(aA){var aw=!ah.$("selall").hasClass("sapUiTableSelAll")&&!W.getFilterBar().ZEN_searchValue;var av=aA.getParameters().tokenKeys;if(av&&av.length>0){var ax=ah.getBinding("rows").getContexts(0);if(ax&&ax.length>0){for(var az=0;az<av.length;az++){var au=av[az];for(var ay=0;ay<ax.length;ay++){var aB=ax[ay];if(aB){var at=aB.getObject();if(at.xkey===au){ah.removeSelectionInterval(ay,ay);E(at,W);W.update();}}}}if(aw){ah.$("selall").removeClass("sapUiTableSelAll");}}}});W.attachUpdateSelection(function(aJ){var aC=!ah.$("selall").hasClass("sapUiTableSelAll")&&!W.getFilterBar().ZEN_searchValue;ah.clearSelection();var aE=aJ.getParameters().tokenKeys;var ay=Object.keys(W.getModel().getProperty("/dialog/members"));var az=1;var aB=[];var aA=[];if(aE&&aE.length>0){for(var ax=0;ax<Object.keys(W.getModel().getProperty("/dialog/members")).length;ax++){aB=W.getModel().getProperty("/dialog/members")[ay[ax]];for(var aL in aB){if(aB[aL]!==null&&typeof(aB[aL])==="object"&&aB[aL].level>0){az++;aA=[];aA.push(aB[aL]);}var aK=aA;while(aK.length!==0&&aK!==undefined){var aG=[];for(var aI=0;aI<aK.length;aI++){var aD=aK[aI];for(var aw in aD){if(aD[aw]!==null&&typeof(aD[aw])==="object"&&aD[aw].level>0){az++;aG.push(aD[aw]);}}}aK=aG;}}az++;}var aM=ah.getBinding("rows").getContexts(0,az);if(aM&&aM.length>0){for(var aI=0;aI<aE.length;aI++){var av=aE[aI];var at=null;for(var aH=0;aH<aM.length;aH++){var aF=aM[aH];if(aF){var au=aF.getObject();if(at!==null&&W.getSupportMultiselect()){if(at<au.level){ah.addSelectionInterval(aH,aH);}else{at=null;}}else{if(au.xkey===av){this._oSelectedItems.add(au.xkey,au);ah.addSelectionInterval(aH,aH);if(at===null){at=au.level;}}}}}}if(aC){ah.$("selall").removeClass("sapUiTableSelAll");}}}});W.attachSelectionChange(function(aA){var aE=ah;var av=aA.getParameter("tableSelectionParams").rowIndices;var aF=av.length;var ay;var aC;var at;var ax=false;var az=aE.getBinding("rows");var au=aA.getParameter("tableSelectionParams").selectAll&&!W.getFilterBar().ZEN_searchValue;if(az.aKeys){ax=true;}if(!W.getSupportMultiselect()&&aF==1){W._oSelectedItems.removeAll();}for(var aw=0;aw<aF;aw++){ay=av[aw];aC=aE.getContextByIndex(ay);at=aC?aC.getObject():null;if(at){var aD;if(ax){aD=aC.sPath.substring(1);}else{aD=at.xkey;}if(aE.isIndexSelected(ay)||au){if(!au||(au&&!at.level)){E(at,W);W._oSelectedItems.add(aD,at);W._addToken2Tokenizer(aD,W._getFormatedTokenText(aD),W._oSelectedTokens);}}else{W._oSelectedItems.remove(aD);var aB=W._removeTokenFromTokenizer(aD,W._oSelectedTokens);f(at,aC.sPath,aB,W);}}}W.update();});}al=new sap.ui.model.json.JSONModel();var ad=s.getCharacteristicByName(N,ac);if(ad.memberdisplay){M=ad.memberdisplay;}W.setTokenDisplayBehaviour(A(M));var K=i(N,M);y(ah,al,K);var ap={label:N.getProperty("/text/key"),key:"key"};if((ar||V)&&Y==="DATE"){ap.type="date";}W.setRangeKeyFields([ap]);W.setModel(N);ah.bindRows("/dialog/members");if(ao.$().closest(".sapUiSizeCompact").length>0){W.addStyleClass("sapUiSizeCompact");}k(N.getProperty("/dialog/name"),N).call(W,N.getProperty("/filters"));S=new sap.m.SearchField({placeholder:"{/text/search}"});if(Q){ab=N.getProperty("/dialog/members");if(ab){for(ai=0;ai===ag+1;ai++){P=ab[""+ai];if(P){P.level=0;ag=ai;}}}}if(N.getProperty("/dialog/selection/maxelements")||Q){S.setBusyIndicatorDelay(0);S.attachSearch(function(au){if(!W.getSupportMultiselect()){W._oSelectedItems.removeAll();}S.setBusy(true);var at=au.getParameters().query;S.ZEN_searchValue=at;if(ao.zenValueHelpDialogParent&&!ao.zenValueHelpDialog){ao.zenValueHelpDialog=ao.zenValueHelpDialogParent;}s.doMemberSearch(ao,at,W.getFilterSelection());});}else{J(N.getProperty("/dialog/members"),M);S.attachLiveChange(function(aD){var av,aI,aA,aC,az,au,aB;if(!W.getSupportMultiselect()){W._oSelectedItems.removeAll();}av=aD.getParameters().newValue?aD.getParameters().newValue.toUpperCase():"";aI=["\\\\","\\^","\\$","\\+","\\.","\\(","\\)","\\[","\\]","\\{","\\}"];for(aA=0,aC=aI.length;aA<aC;aA++){az=aI[aA];av=av.replace(new RegExp(az,"g"),az);}if(av.indexOf("*")>-1){au=new RegExp(("^"+av+"$").replace(/\*/g,".*"));}else{au=new RegExp(av);}var ay=W.getFilterSelection();var aF=function(aJ){return aJ.search(au)!==-1;};if(!ay){var aH=new sap.ui.model.Filter({path:"text",operator:sap.ui.model.FilterOperator.Contains,test:aF});var aG=new sap.ui.model.Filter({path:"displaykey",operator:sap.ui.model.FilterOperator.Contains,test:aF});aB=new sap.ui.model.Filter([aH,aG],false);}else{if(ay==="KEY"){ay="displaykey";}else{if(ay==="TEXT"){ay="text";}else{if(ay!=="DEFAULT"){var at=0;var aE=N.getProperty("/dialog/members/0/attributeMembers");if(aE){for(var ax=0;ax<aE.length;ax++){if(aE[ax].key===ay){at=ax;break;}}}ay="attributeMembers/"+at+"/text";}}}var aw=new sap.ui.model.Filter({path:ay,operator:sap.ui.model.FilterOperator.Contains,test:aF});aB=new sap.ui.model.Filter([aw]);}if(!N.getProperty("/dialog/selection/maxelements")&&!N.getProperty("/dialog/hierarchical")){W._bIgnoreSelectionChange=true;if(ah&&ah.getBinding("rows")){ah.getBinding("rows").filter([aB]);}W._bIgnoreSelectionChange=false;W.update();}});}var T=[new sap.ui.core.Item({text:N.getProperty("/text/default"),key:""}),new sap.ui.core.Item({text:N.getProperty("/text/key"),key:"KEY"}),new sap.ui.core.Item({text:N.getProperty("/text/text"),key:"TEXT"})];if(!Q){for(var ai=0;ai<L.length;ai++){if(L[ai]){var af=L[ai].text?L[ai].text:L[ai].key;T.push(new sap.ui.core.Item({text:af,key:L[ai].key}));}}}var aa=new sap.m.Select({forceSelection:true,autoAdjustWidth:false,items:T,change:function(av){S.clear();ah.getBinding("rows").filter([]);var au=this.getSelectedItem().getKey();if(au&&!v(ae,au)&&M.indexOf(au)===-1){var at=ae.map(function(aw){return aw.getLabel();});at.push(au);if(!N.getProperty("/dialog/selection/maxelements")&&!Q){s.doSetAttributes(ao,at.join());}}else{if(!au){J(N.getProperty("/dialog/members"),M);}}W.setFilterSelection(au);W.update();}});W.setFilterBar(S,aa);return W;};function y(K,N,O){N.setData({cols:O});K.setModel(N,"columns");var M=K.getColumns();for(var L=0;L<O.length;L++){M[L].setSortProperty(O[L].template);}}function i(L,K){if(K==="KEY"){return[{label:L.getProperty("/text/key"),template:"displaykey"}];}else{if(K==="TEXT"){return[{label:L.getProperty("/text/text"),template:"text"}];}else{if(K==="KEY_TEXT"){return[{label:L.getProperty("/text/key"),template:"displaykey"},{label:L.getProperty("/text/text"),template:"text"}];}else{if(K==="TEXT_KEY"){return[{label:L.getProperty("/text/text"),template:"text"},{label:L.getProperty("/text/key"),template:"displaykey"}];}else{return[];}}}}}function J(N,M){if(N&&N.length>0){for(var P=0,K=N.length;P<K;P++){var L=N[P];var O="";if(P===0&&L.searchstring){return;}if(M!=="KEY"){O+=L.text;}if(M!=="TEXT"){if(O){O+=" ";}O+=L.displaykey;}L.searchstring=O;}}}function v(M,L){if(!L){return false;}for(var K=0;K<M.length;K++){if(M[K]&&M[K].getValue()===L){return true;}}return false;}function f(S,N,U,R){E(S,R);if(!U&&N){var V=N.split("/");var P=N;var M=R.getTable().getModel();var K=[S.xkey];var Q=P;while(V.length>3){V.pop();P=V.join("/");var L=M.getProperty(P);R._oSelectedItems.remove(L.xkey);if(R._removeTokenFromTokenizer(L.xkey,R._oSelectedTokens)){Q=P;}K.push(L.xkey);if(M.getProperty("/dialog/singleonly")){E(L);}}if(!M.getProperty("/dialog/singleonly")){V=N.split("/");P=N;while(V.length>3&&Q!==P){V.pop();P=V.join("/");var O=-1;for(var T=0;T===O+1;T++){var W=M.getProperty(P+"/"+T);if(W){if(!W.node&&K.indexOf(W.xkey)===-1){R._oSelectedItems.add(W.xkey,W);R._addToken2Tokenizer(W.xkey,R._getFormatedTokenText(W.xkey),R._oSelectedTokens);}O=T;}}}}}}function E(L,N){var O,K,M;if(L){O=-1;for(K=0;K===O+1;K++){M=L[""+K];if(M){N._oSelectedItems.remove(M.xkey);N._removeTokenFromTokenizer(M.xkey,N._oSelectedTokens);O=K;E(M,N);}}}}function A(K){switch(K){case"TEXT_KEY":return"descriptionAndId";case"KEY_TEXT":return"idAndDescription";case"TEXT":return"descriptionOnly";default:return"idOnly";}}function z(K,U,M){var R,X,W,N,S,Y,T,L,Q,P,Z=M.length,O=K.getProperty("/filters"),ab,aa=K.getProperty("/property/pauserefresh");if(O){ab=O[U];}if(ab){ab.dirty=true;ab.ranges=[];for(Y=0;Y<Z;Y++){N=M[Y];if(N.data("range")){S=N.data("range");Q=S.value1;if(Q&&Q.getDate){L=m(K);Q=L.format(Q);T={from:{key:Q},operation:S.operation};}else{T={from:{key:Q,keytype:"MANUAL_KEY"},operation:S.operation};if(!N.isManuelInput){T.isManuelInput=N.isManuelInput;}}if(S.exclude){T.exclude=true;}P=S.value2;if(P){if(P.getDate){if(!L){L=m(K);}P=L.format(P);if(T.from.key!=="#"&&T.operation!=="EQ"){T.to={key:P};}else{T.to=null;}}else{T.to={key:P,keytype:"MANUAL_KEY"};}}ab.ranges.push(T);}else{R=N.getKey();X=N.getText();W=N.data("longKey");if(!W){W=R;}var V=W.substr(W.length-4,4);if(V==="_NUL"){V="NULL_KEY";}else{if(V==="_EMP"){V="EMPTY_KEY";}else{V="";}}W=W.substr(0,W.length-4);if(V){ab.ranges.push({from:{key:W,keytype:V,text:X}});}else{ab.ranges.push({from:{key:W,text:X}});}}}}if(!aa){s.submitAll(K,!K.getProperty("/property/variablescreen"),!aa&&!K.getProperty("/property/variablescreen"));}else{s.submitAll(K,false,!aa&&!K.getProperty("/property/variablescreen"));}}function m(L){var K=L.getProperty("/dateformat");return sap.ui.core.format.DateFormat.getInstance({pattern:K?K:"yyyyMMdd",strictParsing:true});}this.getType=function(){return["filterpanel","filter"];};this.ctor=e;};var a=new e();return a;});define("zen.rt.components.filterpanel/resources/js/abstract_filter_m_handler",["sap/zen/basehandler","./emptyComponent"],function(c,b){var a=function(){c.apply(this,arguments);var h=this;this.getMainContent=function(k){};this.finalizeUpdate=function(l,k){};this.doLoadMembers=function(m,l){if(!l){l=m.getModel().getProperty("/characteristics/0/characteristic/name");}var k=h.prepareCommand(m.getModel().getProperty("/command/showfilterdialog"),"__STRING__",l);k=h.prepareCommand(k,"__BOOLEAN__"," ");k=h.prepareCommand(k,"__STRING2__","");new Function(k)();};this.doMemberSearch=function(n,m,k){var l=h.prepareCommand(n.getModel().getProperty("/command/membersearch"),"__STRING__",m);l=h.prepareCommand(l,"__STRING2__",k);l=h.prepareCommand(l,"__BOOLEAN__",n.valueHelp2?"X":" ");new Function(l)();};this.doSetDisplay=function(l,k){new Function(h.prepareCommand(l.getModel().getProperty("/command/setdisplay"),"__STRING__",k))();};this.doSetAttributes=function(l,k){new Function(h.prepareCommand(l.getModel().getProperty("/command/setattributes"),"__STRING__",k))();};this.doBoundaryMembers=function(l,k){new Function(h.prepareCommand(l.getModel().getProperty("/command/boundarymembers"),"__BOOLEAN__",k?"X":" "))();};this.setFilter=function(o,l,n){var p=o.getModel(),m=p.getProperty("/filters"),k;if(!n){n=p.getProperty("/characteristics/0/characteristic/name");}if(m){k=m[n];}if(k){k.dirty=true;k.ranges=l;}};this.getFilter=function(n,m){var o=n.getModel(),l=o.getProperty("/filters"),k;if(!m){m=o.getProperty("/characteristics/0/characteristic/name");}if(l){k=l[m];}return k?k.ranges:[];};this.create=function(n,m,q){$.sap.require("sap.ui.comp.util.FormatUtil");$.sap.require("sap.ui.core.format.DateFormat");var k,p,o,r;if(n&&n.getModel()){k=n.getModel();}else{k=new sap.ui.model.json.JSONModel();}k.setData(m);if(!k.getProperty("/property/pauserefresh")){k.setProperty("/property/pauserefresh",false);}o=k.getProperty("/property/memberselector")||k.getProperty("/property/popupreference");if(o){p=n?n:new b(m.id);}else{p=n?n:new sap.m.NavContainer(m.id,{autoFocus:false}).addStyleClass("sapzenfilterpanelM");if(!k.getProperty("/property/showembedded")){p.addStyleClass("sapzendimensionfilterM");}}p.onBeforeRendering=function(){sap.ui.getCore().getEventBus().publish("inputControlRemoveStyleEvent",{id:q.pureId,bUndoable:false});};p.onAfterRendering=function(){if(o){h.doLoadMembers(p);p.onAfterRendering=undefined;}if(!m.visible){setTimeout(function(){$("#"+p.getId()).parent(".sapUiLayoutAbsPos").css("display","none");},0);}if(p.zenType==="DIMENSIONFILTER_COMPONENT"&&p.zenControlType==="list_filter"&&h.ohierarchicalLov){h.ohierarchicalLov.invalidate();}};if(!k.getProperty("/property/variablescreen")){p.ZEN_IdToDimensionMap={};}p.setModel(k);if(n){p.removeAllPages();}if(!o){e(p);}if(!o){p.ZEN_submit=j(k,true);p.ZEN_submit_with_apply=j(k,true,true);p.ZEN_check=j(k,false);p.ZEN_cancel=function(){new Function(k.getProperty("/command/cancelonlyfilter"))();};}var l=p.exit;p.exit=function(){if(l){l.apply(p,arguments);}if(g(this)){new Function(k.getProperty("/command/destroyfiltercomponent"))();}};if(!this.isDesignModeD4LIncluded(m.id)){if(m.visible){p.removeStyleClass("zenHideFilterPanel");}else{p.addStyleClass("zenHideFilterPanel");}}return p;};function g(k){var l=true;if(k.zenType=="LUMIRADIMENSIONFILTER_COMPONENT"){l=false;}if(k.zenType=="LUMIRAEXPLOREFILTER_COMPONENT"){l=false;}if(k.zenType="DIMENSIONFILTER_COMPONENT"&&k.hasStyleClass("zenFilterBarMFilter")){l=false;}return l;}function j(m,l,k){return function(n,o){return h.submitAll(m,l,k,n,o);};}this.submitAll=function(m,n,k,r,z){var q,s,C,B,D,t,A,u,x,o,G,E,v,w,y=m.getProperty("/property/variablescreen");s=[];C=-1;q=m.getProperty("/filters");for(u in q){x=q[u];var l=false;if(x.duplicate){for(var F in x.duplicate){var p=x.duplicate[F];if(p.input===x.input&&p.name===u){l=true;break;}}}if(x&&(x.dirty||x.dirtyForPaste)&&!l){w=h.getCharacteristicByName(m,u);x.dirty=!n;s[++C]={};s[C].name=u;if(x.input!==undefined&&x.input!==null){s[C].input=x.input;}s[C].ranges=[];for(B=0,D=x.ranges.length;B<D;B++){t=x.ranges[B];A={};A.from=t.from.key;if(t.to){A.to=t.to.key;}if(t.operation&&t.operation!=="EQ"){A.operation=t.operation;}if(t.exclude){A.exclude=true;}if(t.from.keytype&&t.isManuelInput!==false){A.fromtype=t.from.keytype;}if(t.to&&t.to.keytype&&t.isManuelInput!==false){A.totype=t.to.keytype;}s[C].ranges[B]=A;}if(!x.duplicate){x.duplicate=[];}x.duplicate.push(s[C]);}}v=m.getProperty("/characteristics");if(v){for(C=0;C<v.length;C++){if(v[C].characteristic.axisdirty){if(!E){E=m.getProperty("/axis");}v[C].characteristic.axisdirty=!n;}}if(!E&&(m.getProperty("/axis/rows/dirty")||m.getProperty("/axis/columns/dirty"))){E=m.getProperty("/axis");}if(n&&E){m.setProperty("/axis/rows/dirty",undefined);m.setProperty("/axis/columns/dirty",undefined);}if(E||s.length>0||(k&&m.getProperty("/command/containsonsubmit"))){if(y){sap.zen.MessageViewHandler.clearMessages();}if(!E){E={};}G={filters:s,axis:E};if(r&&z){o=h.prepareCommand(z,r,JSON.stringify(G));return o;}else{o=h.prepareCommand(m.getProperty(k?"/command/submitfilter":"/command/submitonlyfilter"),"__STRING__",JSON.stringify(G));o=h.prepareCommand(o,"__BOOLEAN__",n?"X":" ");o=h.prepareCommand(o,"__BOOLEAN2__",n?"":"X");new Function(o)();}}}};function e(k){k.addPage(i(k));}function i(k){var m=k.getModel(),r=m.getProperty("/property/showembedded");if(r){var q=new sap.m.Toolbar({content:[,new sap.m.ToolbarSpacer(),new sap.m.Title({text:"{/text/title}"}).addStyleClass("sapzenfilterpanelM-title"),new sap.m.ToolbarSpacer()]});q.addStyleClass("sapzenfilterpanelM-titlebar");var u=m.getProperty("/property/navigationpanel");var s=new sap.m.SearchField({liveChange:function(v){var z=v.getParameter("newValue");var y=new sap.ui.model.Filter(u?"entry/text":"characteristic/text",sap.ui.model.FilterOperator.Contains,z);var x=k.ZENCharLists;k.ZEN_multiInput=[];for(var w=0;w<x.length;w++){x[w].getBinding("items").filter([y]);}}});s.addEventDelegate({onAfterRendering:function(){s.$().find("input").on("keydown",function(v){if(v.which===9&&k.ZEN_multiInput&&k.ZEN_multiInput[0]){k.ZEN_multiInput[0].$().find("input").focus();return false;}});}});var o=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp");var p=o.getText("FILTER_BAR_GO");var l=new sap.m.Toolbar({content:[,s,new sap.m.Button({text:p,visible:"{/property/pauserefresh}",enabled:{parts:["/filters","/axis"],mode:sap.ui.model.BindingMode.OneWay,formatter:function(x){for(var y in x){if(x[y].dirty){return true;}}var v=m.getProperty("/characteristics");if(v){for(var w=0;w<v.length;w++){if(v[w].characteristic.axisdirty){return true;}}}return false;}},type:sap.m.ButtonType.Emphasized,press:function(){h.submitAll(m,true,true);}})]});}var n=new sap.m.Page({showHeader:r,content:[h.getMainContent(k)]}).addStyleClass("sapzenfilterpanelM-mainpage");var t=m.getProperty("/text/title");if(t&&t.length>0){n.setCustomHeader(q);n.setSubHeader(l);n.setShowHeader(true);}else{n.setShowHeader(false);n.setCustomHeader(q);n.setSubHeader(l);}return n;}this.attachXkey=function(k){if(k.keytype==="NULL_KEY"){k.xkey=k.key.concat("_NUL");}else{if(k.keytype==="EMPTY_KEY"){k.xkey=k.key.concat("_EMP");}else{k.xkey=k.key.concat("_REG");}}};this.attachXkeys=function(l){if(l&&l.length){for(var m=0,k=l.length;m<k;m++){this.attachXkey(l[m]);}}};this.update=function(O,k,n){var G,l,t,s,o,N,J,y,C,p,q,P,m,x,F=-1,A=false;var u=(k&&k.target)?k.target:"";O.valueHelp2=u;if(O.zenValueHelpDialogParent){if(k&&!k.dialogInDialog){O.valueHelp2="";}}if(O&&k){G=k.view;if((this.isDesignModeD4LIncluded(k.id)&&G!=="DIALOG")||k.newds){O.ZEN_multiInput=[];if(O.zenControlType!==k.type){O.zenControlType=k.type;var D=c.dispatcher.getHandlers(O.zenControlType);if(D&&D[0]){O=D[0].create(O,k,n);}}else{O=this.create(O,k,n);}if(G!=="DIALOG"){return O;}}if(!k.visible){setTimeout(function(){$("#"+O.getId()).parent(".sapUiLayoutAbsPos").css("display","none");},0);}if(k.changeVisibility){if(k.visible){O.removeStyleClass("zenHideFilterPanel");}else{O.addStyleClass("zenHideFilterPanel");}if(G==="SUBMIT"){O.ZEN_submit();}else{if(G==="SUBMIT_WITH_APPLY"){O.ZEN_submit_with_apply();}else{if(G==="CANCEL"){O.ZEN_cancel();}}}return O;}l=O.getModel();p=l.getProperty("/property/variablescreen");s=k.filters;if(s){N=l.getProperty("/filters");for(y in s){if(!N||!(y in N)){continue;}J=N[y];o=s[y];if(J){A=true;if(k.filtercanceled||!J.dirty||p){if(p&&J.dirty){o.dirty=true;}N[y]=o;if(l.getProperty("/dialog/name")===y){l.setProperty("/dialog/filters",o);}}}}l.setProperty("/filters",A?N:s);this.forceModelUpdate(l,"/filters");}C=k.validatedfilters;if(C){N=l.getProperty("/filters");for(y in C){J=N[y];o=C[y];if(J){if(J.dirty){o.dirty=true;N[y]=o;if(l.getProperty("/dialog/name")===y){l.setProperty("/dialog/filters",o);}}}}this.forceModelUpdate(l,"/filters");}var B=l.getProperty("/characteristics");var L=false;if(G==="DEFAULT"){if(!f(k.characteristics,B)){l.setProperty("/characteristics",k.characteristics);L=true;}var E=null;if(k.command){E=k.command;var z="/command/";d(E,z,l);}if(k.text){E=k.text;var z="/text/";d(E,z,l);var w=l.getProperty("/text/title");if(w&&w.length>0){O.getCurrentPage().setShowHeader(true);}}}if(G==="DIALOG"){l.setProperty("/dialog",k.dialog);var r=l.getProperty("/dialog/hierarchical");if(k.characteristics&&!f(k.characteristics,B)){l.setProperty("/characteristics",k.characteristics);L=true;}var v=k.dialog.members;if(r){for(var M=0;M===F+1;M++){q=v[""+M];if(q){q.level=m+1;F=M;this.attachXkey(q);}}}else{this.attachXkeys(v);}l.setProperty("/dialog/members",v);if(this.getValueHelpDialog&&!O.zenValueHelpDialog){t=this.getValueHelpDialog(O);t.open();t.update();O.zenValueHelpDialog=t;}}else{if(G==="DIALOG_IN_DIALOG"){l.setProperty("/dialog",k.dialog);var r=l.getProperty("/dialog/hierarchical");if(k.characteristics&&!f(k.characteristics,B)){l.setProperty("/characteristics",k.characteristics);L=true;}var v=k.dialog.members;if(r){for(var M=0;M===F+1;M++){q=v[""+M];if(q){q.level=m+1;F=M;this.attachXkey(q);}}}else{this.attachXkeys(v);}l.setProperty("/dialog/members",v);if(this.getValueHelpDialog&&!O.zenValueHelpDialog){t=this.getValueHelpDialog(O,false);t._oSelectedItems.removeAll();if(t.getDialogInDialog()){var K=sap.ui.getCore().getControl(O.valueHelp2);if(K.valueHelp2_selectedKey&&K.valueHelp2_selectedItem){t._oSelectedItems.add(K.valueHelp2_selectedKey,K.valueHelp2_selectedItem);}}t.open();t.update();O.zenValueHelpDialog=t;}}else{if(G==="DIALOG_SEARCH"){var H=k.dialog;var r=l.getProperty("/dialog/hierarchical");l.setProperty("/dialog/selection",H.selection);var v=H.members;if(r){if(v){for(var I=0;I===F+1;I++){q=v[""+I];if(q){q.level=0;F=I;this.attachXkey(q);}}}}else{this.attachXkeys(v);}l.setProperty("/dialog/members",H.members);if(O.zenValueHelpDialogParent){O.zenValueHelpDialogParent.getFilterBar().setBusy(false);}if(O.zenValueHelpDialog){if(r&&O.zenValueHelpDialog.getTable().collapseAll){O.zenValueHelpDialog.getTable().collapseAll();}O.zenValueHelpDialog.update();O.zenValueHelpDialog._updateTableTitle();O.zenValueHelpDialog.getFilterBar().setBusy(false);O.zenValueHelpDialog.getTable().setEnableSelectAll(!H.selection.maxelements);}}else{if(G==="EXPAND_NODE"){m=l.getProperty(k.path).level;x=k.member;x.level=m;this.attachXkey(x);for(P=0;P===F+1;P++){q=x[""+P];if(q){q.level=m+1;F=P;this.attachXkey(q);}}l.setProperty(k.path,x);if(O.zenValueHelpDialog){O.zenValueHelpDialog.update();}}else{if(G==="SUBMIT"){O.ZEN_submit();}else{if(G==="SUBMIT_WITH_APPLY"){O.ZEN_submit_with_apply();}else{if(G==="CANCEL"){O.ZEN_cancel();}else{if(G==="BOUNDARY_MEMBERS"){if(k.lowboundarymember){O.getModel().setProperty("/lowboundarymember",k.lowboundarymember);}if(k.highboundarymember){O.getModel().setProperty("/highboundarymember",k.highboundarymember);}}}}}}}}}this.finalizeUpdate(O,k,L);if(!k.pauserefresh){if(O.getModel().getProperty("/property/pauserefresh")){O.ZEN_submit_with_apply();}}O.getModel().setProperty("/property/pauserefresh",k.pauserefresh?true:false);}return O;};function d(m,l,q){var p=Object.keys(m);for(var o=0;o<p.length;o++){var k=l+p[o];var n=m[p[o]];if(q.getProperty(k)!==n){q.setProperty(k,n);}}}function f(p,o){if((!p&&o)||(p&&!o)){return false;}if(p&&o){if(p.length!==o.length){return false;}for(var n=0,k=p.length;n<k;n++){var m=p[n].characteristic;var l=o[n].characteristic;if(m.name!==l.name||m.axis!==l.axis||m.displaymember!==l.displaymember){return false;}}}return true;}this.forceModelUpdate=function(m,k){var l=m.aBindings.slice(0);jQuery.each(l,function(n,o){if(o.sPath===k){o.checkUpdate(true);}});};this.getCharacteristicByName=function(p,o){var m=p.getProperty("/characteristics");for(var l=0,k=m.length;l<k;l++){var n=m[l].characteristic;if(n.name===o){return n;}}};this.isDesignModeD4LIncluded=function(k){return sap.zen.designmode&&sap.zen.designmode.isDesignMode(k)&&!sap.zen.designmode.isRuntimeAuthoringMode(k);};this.getDecorator=function(){return"DataSourceControlDecorator";};};a.dispatcher=c.dispatcher;return a;});define("zen.rt.components.dialog/resources/js/zendialog_m_handler",["sap/zen/basehandler","zen.rt.components.sdk/resources/js/biFramework_handler"],function(b,a){sap.zen.ZenDialogHandler=function(){sap.zen.ZenDialogHandler.anchorDivId="sapbi_snippet_ROOT_DIALOG";b.apply(this,arguments);this.dispatcher=b.dispatcher;this.bDisplayTitle=true;this.bCanMove=true;this.bCanResize=true;this.bIsRuntimeMode=false;this.resizeTimer=null;this.resizeEndTimer=null;this.initialWindowHeight=0;this.initialWindowWidth=0;this.contentTdHeight=0;this.contentHeight=0;this.oDomContentArea=null;this.oDomContentDiv=null;this.bBrowserResize=false;this.oContentComponent=null;this.oMsgComponent=null;this.oContentControl=null;this.oMsgControl=null;this.oVariants=null;this.oVariantsDataSource=null;this.bDialogClosing=false;this.bShowVariants=false;this.iVertPaddingAndBorderContribution=-1;this.oMatrixLayout;this.oTopLevelControl=null;this.loadingIndicatorCssHasBeenSet=false;var h="PUBLIC";var d="USER";var f=this;this.getMatrixLayoutCell=function(l){var j=this.oMatrixLayout.getRows()[l];var k=j.getCells()[0];return k;};this.createDialogButtons=function(l){var k=null;var m=null;var j;if(this.oMsgControl&&this.bIsRuntimeMode){sap.zen.Dispatcher.instance.oCurrentVarDlg.addButton(this.oMsgControl);}for(j=0;j<l.buttons.length;j++){m=l.buttons[j].button;k=null;if(m.lumira===true){if(this.aLumiraExtensions===undefined||!this.aLumiraExtensions||this.aLumiraExtensions.length===0){continue;}}if(m.rendered===true){k=this.createButton(m.name);k.setText(m.text);k.setEnabled(m.enabled);k.zenOkBtn=m.okBtn;k.zenCancelBtn=m.cancelBtn;if(m.okBtn===true){k.addStyleClass("zenDialogOkButton");}if(m.cancelBtn===true){k.addStyleClass("zenDialogCancelButton");}if(m.command&&(f.aLumiraExtensions.length===0||k.zenOkBtn===true)){k.zenOnClick=new Function(m.command);k.attachPress(function(n){if(this.zenOkBtn===true){sap.zen.Dispatcher.instance.enableReady(true);}if(this.zenOkBtn===true||this.zenCancelBtn===true){f.bDialogButtonPressed=true;sap.zen.MessageViewHandler.setVariableScreen(false);}f.bDialogClosing=true;this.setEnabled(false);if(f.currentVariant){f.currentVariant="";}this.zenOnClick();});}else{if(m.lumira===true||f.aLumiraExtensions.length>0){k.attachPress(function(o){for(var n=0;n<f.aLumiraExtensions.length;n++){f.aLumiraExtensions[n].onVariableDialogCancel();}});}else{k.setEnabled(false);}}}if(k){sap.zen.Dispatcher.instance.oCurrentVarDlg.addButton(k);}this.buttonStatusToDesigner(m);}};this.updateDialogContent=function(){if(this.oContentComponent){this.dispatcher.dispatchUpdateControl(this.oContentComponent);this.dispatcher.updateComponentProperties(null,this.oContentComponent);}};this.createDialogContent=function(k){if(this.oContentComponent){this.oContentControl=this.dispatcher.dispatchCreateControl(this.oContentComponent);if(this.oContentComponent.id){this.oTopLevelControl.aZenChildren.push(this.oContentComponent.id);}var l=this.getMatrixLayoutCell(0);this.oContentControl.setWidth("100%");this.oContentControl.setHeight("100%");var q=this.oContentControl.getModel();var p=q.getProperty("/variants");if(sap.zen.Dispatcher.instance.isMainMode()&&p&&p.length>0){var j=q.getProperty("/variants");var o=this.createVariantRow(q,j);this.oContentControl.setLayoutData(new sap.m.FlexItemData({growFactor:1,shrinkFactor:0}));var n=new sap.m.FlexBox();n.setWidth("100%");n.setHeight("100%");n.addItem(this.oContentControl);n.setFitContainer(true);var m=new sap.m.VBox({width:"100%"});m.addItem(o).addStyleClass("variantBoxFullBorder");m.addItem(n);m.setFitContainer(true);l.addContent(m);}else{l.addContent(this.oContentControl);}this.dispatcher.updateComponentProperties(undefined,this.oContentComponent);}};this.createVariantRow=function(o,k){var l=this.createEditVariantButton(o);var j=this.createSaveVariantButton(o);this.createVariantsDataSourceSelectBox(o,l);this.createVariantsSelectBox(o,j);var n=o.getProperty("/variants");this.oVariantsDataSource.setSelectedKey(n[0].datasource);this.oVariantsDataSource.fireChange({selectedItem:0});if(n.length===1){this.oVariantsDataSource.setVisible(false);}var m=new sap.m.Toolbar();m.addContent(this.oVariantsDataSource);m.addContent(this.oVariants);m.addContent(j);m.addContent(l);m.addStyleClass("variantBox");m.addStyleClass("variantBoxHorizontalLayout");return m;};this.createVariantsDataSourceSelectBox=function(l,j){var k=l.getProperty("/variants");this.oVariantsDataSource=new sap.m.Select();this.oVariantsDataSource.addStyleClass("variantDataSourceBoxAlignment");this.oVariantsDataSource.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:true,minWidth:"35%",maxWidth:"35%"}));this.oVariantsDataSource.setModel(l);this.oVariantsDataSource.bindItems("/variants",function(m,o){var n=o.oModel.getProperty(o.sPath);return new sap.ui.core.Item({key:n.datasource,text:n.datasourcetext});});this.oVariantsDataSource.attachChange(function(p){var n=p.getSource();var q=n.getSelectedKey();if(q&&j){j.setEnabled(true);}else{if(!q&&j){j.setEnabled(false);}}var o=f.getDatasourcePropertyKey(l);var m=new sap.ui.core.Item({key:"{name}",text:"{text}",enabled:"{enabled}",customData:new sap.ui.core.CustomData({key:"scope",value:"{scope}"})});f.oVariants.setSelectedKey();f.oVariants.bindItems("/variants/"+o+"/ALL",m);});};this.createVariantsSelectBox=function(k,j){this.oVariants=new sap.m.ComboBox();this.oVariants.setLayoutData(new sap.m.ToolbarLayoutData({shrinkable:true,minWidth:"45%",maxWidth:"84%"}));this.oVariants.setPlaceholder(k.getProperty("/text/VARIANTS_SELECT_VARIANT"));this.oVariants.setModel(k);k.setSizeLimit(1000);this.oVariants.onAfterRendering=function(){var m=f.oVariants.getValue();if(m===""){return;}var n=f.getDatasourcePropertyKey(k);var l=k.getProperty("/variants/"+n+"/"+d);l.forEach(function(p,o){if(p.text===m){f.oVariants.setSelectedKey(p.name);}});};this.oVariants.attachBrowserEvent("focusout",function(l){f.oVariants.fireChange(l);});this.oVariants.attachChange(function(s){var p=f.oVariants.getValue();var n=f.oVariants.getSelectedItem();if(n&&n.getText()!==p){f.oVariants.setSelectedItem(null);}f.oVariants.setValue(p);var l=s.getSource();if(!l.getSelectedKey()&&!l.getSelectedItem()){return;}var o=l.getSelectedKey();var m=l.getSelectedItem().getText();var t=f.oVariantsDataSource&&f.oVariantsDataSource.getSelectedKey();var q=l.getSelectedItem()&&l.getSelectedItem().getCustomData();var u="";if(f.currentVariant&&f.currentVariant===o){return;}if(!m||!f.oVariantsDataSource.getSelectedKey()){j.setEnabled(false);}else{j.setEnabled(true);}q.forEach(function(v){if(v.getProperty("key")==="scope"){u=v.getProperty("value");}});if(o&&m&&t&&u){sap.zen.MessageViewHandler.clearMessages();f.currentVariant=o;var r=f.prepareCommand(k.getProperty("/command/applyvariant"),"__STRING__",o===k.getProperty("/text/VARIANTS_GENERATED_ID")?m:o);r=f.prepareCommand(r,"__STRING2__",t);r=f.prepareCommand(r,"__STRING3__",u);new Function(r)();}});this.oVariants.attachBrowserEvent("keyup input undo redo",function(n){var m=f.oVariants.getValue()&&f.oVariants.getValue().trim();var l=f.oVariantsDataSource.getSelectedItem();if(j){if(!m||!l){j.setEnabled(false);}else{j.setEnabled(true);}}});};this.getDatasourcePropertyKey=function(m){var k=m.getProperty("/variants");var l=f.oVariantsDataSource&&f.oVariantsDataSource.getSelectedKey();var j=-1;k.forEach(function(o,n){if(o.datasource===l){j=n;}});return j;};this.createEditVariantButton=function(j){return new sap.m.Button({icon:"sap-icon://edit",enabled:false,tooltip:j.getProperty("/text/VARIANTS_EDIT_VARIANTS"),type:sap.m.ButtonType.Transparent,press:function(){var k=f.createEditTable(j);var l=new sap.m.Dialog({title:j.getProperty("/text/VARIANTS_EDIT_VARIANTS"),content:k,contentWidth:f.getEditDialogWidth(),beginButton:new sap.m.Button({text:j.getProperty("/text/close"),press:function(){l.close();}})});l.attachAfterClose(function(){var o=f.getDatasourcePropertyKey(j);var n="/variants/"+o+"/ALL/";var m=j.getProperty(n);for(var p=0;p<m.length;p++){if(m[p].editText===true){f.restoreOriginalValuesForVariants(n+p,j);j.setProperty(n+"/editText",false);j.setProperty(n+"/editName",false);}}f.disableEditableFields(j);});l.setModel(j);l.open();$("#"+l.sId+"-scrollCont").addClass("editDialogLayout");$("#"+l.sId).attr("dialog_identificaton","editVariantDialog");sap.ui.core.ResizeHandler.register(sap.ui.getCore().byId("DLG_VARIABLE_dlg"),function(){if($("#DLG_VARIABLE_dlg").length){var n=f.getEditDialogWidth();var m=$("[dialog_identificaton = editVariantDialog]");var o=m[0].id;$("#"+o).width(n);}});}}).addStyleClass("variantIcon");};this.disableEditableFields=function(n){var k=this.getDatasourcePropertyKey(n);var m=n.getProperty("/variants/"+k+"/ALL");var j="/variants/"+k+"/ALL/";for(var l=0;l<m.length;l++){n.setProperty(j+l+"/editText",false);n.setProperty(j+l+"/editName",false);}};this.getEditDialogWidth=function(){if($("#DLG_VARIABLE_dlg").length){var k=$("#DLG_VARIABLE_dlg").width();var j=(k-k/10)+"px";return j;}else{return;}};this.createEditTable=function(n){var l=n.getProperty("/variants");var m=f.oVariantsDataSource&&f.oVariantsDataSource.getSelectedKey();if(!m){return;}var k=f.getDatasourcePropertyKey(n);var j=new sap.m.Table({width:"100%",columns:[new sap.m.Column({header:new sap.m.Label({text:n.getProperty("/text/VARIANTS_DESCRIPTION")}),width:"auto"}),new sap.m.Column({header:new sap.m.Label({text:n.getProperty("/text/VARIANTS_SCOPE")}),width:"120px"}),new sap.m.Column({header:new sap.m.Label({text:n.getProperty("/text/VARIANTS_TECHNICAL_NAME")}),width:"auto"}),new sap.m.Column({header:new sap.m.Label({text:""}),width:"20px"}),new sap.m.Column({header:new sap.m.Label({text:""}),width:"20px"}),]});j.bindItems("/variants/"+k+"/ALL",new sap.m.ColumnListItem({visible:"{enabled}",cells:[new sap.m.Input({value:"{text}",enabled:"{editText}"}).attachBrowserEvent("keyup input undo redo",function(s){var q=this.getValue();var p=this.getParent().getCells()[2];var r=this.getParent().getCells()[3];var o=this.getBindingContext().getPath();if(f.isDescriptionUnique(n,q,o)&&q&&p.getValue()){r.setEnabled(true);}else{r.setEnabled(false);}}),new sap.m.Select({items:[{text:n.getProperty("/text/VARIANTS_USER_SCOPE"),key:d},{text:n.getProperty("/text/VARIANTS_PUBLIC_SCOPE"),key:h}],selectedKey:"{scope}",enabled:"{editText}",change:function(s){var p=s.getSource().getBindingContext().getPath();var r=this.getParent().getCells()[3];if(p){var o=this.getSelectedItem().getKey();n.setProperty(p+"/scope",o);if(o===h){if(n.getProperty(p+"/originalScope")===d){n.setProperty(p+"/name","");r.setEnabled(false);}else{n.setProperty(p+"/name",n.getProperty(p+"/originalName"));r.setEnabled(true);}n.setProperty(p+"/editName",true);}else{if(n.getProperty(p+"/originalScope")===h){n.setProperty(p+"/name",n.getProperty("/text/VARIANTS_GENERATED_ID"));}else{n.setProperty(p+"/name",n.getProperty(p+"/originalName"));}n.setProperty(p+"/editName",false);var q=n.getProperty(p+"/text");if(f.isDescriptionUnique(n,q,p)){r.setEnabled(true);}else{r.setEnabled(false);}}}}}),new sap.m.Input({value:"{name}",enabled:"{editName}"}).attachBrowserEvent("keyup input undo redo",function(r){var o=this.getValue();var p=this.getParent().getCells()[0];var q=this.getParent().getCells()[3];if(o&&p.getValue()&&f.isTechnicalNameUnique(n,o)){q.setEnabled(true);}else{q.setEnabled(false);}}).attachLiveChange(function(p){var o=this.getParent().getCells()[1];if(o&&o.getSelectedItem().getKey()&&o.getSelectedItem().getKey()===h){this.setValue(this.getValue().replace(/\W/g,""));}}),new sap.m.Button({icon:"sap-icon://edit",tooltip:n.getProperty("/text/VARIANTS_EDIT_VARIANT"),type:sap.m.ButtonType.Transparent,press:function(u){var q=u.getSource().getBindingContext().getPath();if(q){var t=n.getProperty(q+"/editText");var p=this.getParent().getCells()[4];if(t){f.setButtonEnabledForEditMode(this.sId,false,n);n.setProperty(q+"/editText",false);n.setProperty(q+"/editName",false);this.setIcon("sap-icon://edit");this.setTooltip(n.getProperty("/text/VARIANTS_EDIT_VARIANT"));p.setIcon("sap-icon://delete");p.setTooltip(n.getProperty("/text/VARIANTS_DELETE_VARIANT"));var s=n.getProperty(q+"/name");if(s){var r=f.prepareCommand(n.getProperty("/command/changevariant"),"__STRING__",n.getProperty(q+"/name"));r=f.prepareCommand(r,"__STRING2__",n.getProperty(q+"/originalName"));r=f.prepareCommand(r,"__STRING3__",n.getProperty(q+"/scope"));r=f.prepareCommand(r,"__STRING4__",n.getProperty(q+"/text"));r=f.prepareCommand(r,"__STRING5__",m);new Function(r)();}}else{f.setButtonEnabledForEditMode(this.sId,true,n);var o=n.getProperty(q+"/scope");n.setProperty(q+"/editText",true);if(o===h){n.setProperty(q+"/editName",true);}f.storeOriginalValuesForVariants(q,n);this.setIcon("sap-icon://save");this.setTooltip(n.getProperty("/text/VARIANTS_SAVE_VARIANT"));p.setIcon("sap-icon://cancel");p.setTooltip(n.getProperty("/text/cancel"));}}}}),new sap.m.Button({icon:"sap-icon://delete",tooltip:n.getProperty("/text/VARIANTS_DELETE_VARIANT"),type:sap.m.ButtonType.Transparent,press:function(s){var p=s.getSource().getBindingContext().getPath();var r=n.getProperty(p+"/editText");if(p&&!r){var q=new sap.m.Dialog({title:n.getProperty("/text/VARIANTS_DELETE_VARIANT"),type:"Message",content:new sap.m.Text({text:n.getProperty("/text/VARIANTS_DELETE_MSG").replace("{0}",n.getProperty(p+"/text"))}),beginButton:new sap.m.Button({text:n.getProperty("/text/ok"),press:function(){var u=n.getProperty(p+"/name");var t=f.prepareCommand(n.getProperty("/command/deletevariant"),"__STRING__",u);t=f.prepareCommand(t,"__STRING2__",m);new Function(t)();q.close();}}),endButton:new sap.m.Button({text:n.getProperty("/text/cancel"),press:function(){q.close();}}),afterClose:function(){q.destroy();}});q.open();}else{if(p){f.restoreOriginalValuesForVariants(p,n);f.setButtonEnabledForEditMode(this.sId,false,n);n.setProperty(p+"/editText",false);n.setProperty(p+"/editName",false);var o=this.getParent().getCells()[3];o.setIcon("sap-icon://edit");o.setTooltip(n.getProperty("/text/VARIANTS_EDIT_VARIANT"));this.setIcon("sap-icon://delete");this.setTooltip(n.getProperty("/text/VARIANTS_DELETE_VARIANT"));}}}})],type:"Active",}));return j;};this.isTechnicalNameUnique=function(o,l){var m=f.getDatasourcePropertyKey(o);var n=o.getProperty("/variants/"+m+"/"+h);var k=l.toUpperCase().replace(new RegExp(" ","g"),"");for(var j=0;j<n.length;j++){if(n[j].name===l||!k||n[j].name===k){return false;}}return true;};this.isDescriptionUnique=function(p,n,k){var j=p.getProperty(k+"/scope");var o=f.getDatasourcePropertyKey(p);var m=p.getProperty("/variants/"+o+"/"+d);for(var l=0;l<m.length;l++){if(m[l].text===n&&j!=="PUBLIC"){return false;}}return true;};this.setButtonEnabledForEditMode=function(o,j,k){var r=$("[dialog_identificaton = editVariantDialog]");var l=r[0].id;var n=$("#"+l).find("table");var s=n[0].id;var m=$("#"+s).find("button");for(var p=0;p<m.length;p++){var q=sap.ui.getCore().byId(m[p].id);if(m[p].id===o&&p%2===0){p++;continue;}if(j===true){q.setEnabled(false);}else{q.setEnabled(true);}}};this.storeOriginalValuesForVariants=function(j,k){if(!k.getProperty(j+"/originalText")){k.setProperty(j+"/originalText",k.getProperty(j+"/text"));}if(!k.getProperty(j+"/originalName")){k.setProperty(j+"/originalName",k.getProperty(j+"/name"));}if(!k.getProperty(j+"/originalScope")){k.setProperty(j+"/originalScope",k.getProperty(j+"/scope"));}};this.restoreOriginalValuesForVariants=function(j,k){k.setProperty(j+"/text",k.getProperty(j+"/originalText"));k.setProperty(j+"/name",k.getProperty(j+"/originalName"));k.setProperty(j+"/scope",k.getProperty(j+"/originalScope"));k.setProperty(j+"/originalText","");k.setProperty(j+"/originalScope","");k.setProperty(j+"/originalName","");};this.createSaveVariantButton=function(j){return new sap.m.Button({icon:"sap-icon://save",enabled:false,type:sap.m.ButtonType.Transparent,tooltip:j.getProperty("/text/VARIANTS_SAVE_VARIANT"),press:function(){var o=f.oVariants.getSelectedKey();var m=f.oVariants.getSelectedItem()&&f.oVariants.getSelectedItem().getText();if(!o){o=f.oVariants.getValue().trim();if(o!==f.oVariants.getValue()){f.oVariants.setValue(o);}if(!o){return;}var n=f.oVariantsDataSource&&f.oVariantsDataSource.getSelectedKey();var k=f.prepareCommand(j.getProperty("/command/savevariant"),"__STRING__",o);k=f.prepareCommand(k,"__STRING2__",n);k=f.prepareCommand(k,"__BOOLEAN__","X");new Function(k)();}else{var l=new sap.m.Dialog({title:j.getProperty("/text/VARIANTS_SAVE_VARIANT"),type:"Message",content:new sap.m.Text({text:j.getProperty("/text/VARIANTS_OVERWRITE_MSG").replace("{0}",m)}),beginButton:new sap.m.Button({text:j.getProperty("/text/ok"),press:function(){var q=f.oVariantsDataSource&&f.oVariantsDataSource.getSelectedKey();var p=f.prepareCommand(j.getProperty("/command/savevariant"),"__STRING__",o);p=f.prepareCommand(p,"__STRING2__",q);p=f.prepareCommand(p,"__BOOLEAN__","");new Function(p)();l.close();}}),endButton:new sap.m.Button({text:j.getProperty("/text/cancel"),press:function(){l.close();}}),afterClose:function(){l.destroy();}});l.open();}}}).addStyleClass("variantIcon");};this.buttonStatusToDesigner=function(j){if(j.statustodesigner===true){if(j.command){window.eclipse_setOkButtonEnabled(j.enabled);}else{window.eclipse_setOkButtonEnabled(false);}}};this.updateDialogButtons=function(l){var k;var j=null;for(k=0;k<l.buttons.length;k++){j=null;var m=l.buttons[k].button;if(m.rendered===true){j=sap.ui.getCore().getControl(m.name);if(j){if(!this.bDialogButtonPressed){j.setEnabled(m.enabled);}else{this.bDialogButtonPressed=false;}j.setVisible(true);}}else{j=sap.ui.getCore().getControl(m.name);if(j){j.setVisible(false);}}this.buttonStatusToDesigner(m);}};this.handleMessageControl=function(){var k;if(this.oMsgComponent){k=this.dispatcher.getComponentIdForControlId(this.oMsgComponent.content.control.id)==null;if(k){if(this.oMsgComponent.id){this.oTopLevelControl.aZenChildren.push(this.oMsgComponent.id);}sap.zen.MessageViewHandler.setVariableScreen(true);this.oMsgControl=this.dispatcher.dispatchCreateControl(this.oMsgComponent);if(!this.bIsRuntimeMode){var j=this.getMatrixLayoutCell(1);j.addContent(this.oMsgControl);}}else{this.oMsgControl=this.dispatcher.dispatchUpdateControl(this.oMsgComponent);this.dispatcher.updateComponentProperties(this.oMsgControl,this.oMsgComponent);}}};function g(){var j="loading.gif?1.0.0";if(sapbi_isMobile){j="loadingMobile.gif";}var k="margin:-20px 0px 0px -100px; background-position:center;background-repeat:no-repeat;height:40px;width:200px;background-image:url("+sap.zen.createStaticMimeUrl("zen.rt.client.servlet/resources/images/"+j)+");z-index:19994;position:absolute;top:50%;left:50%;";$("head").prepend("<style>.customLoadingIndicatorZenClass{"+k+"}</style>");f.loadingIndicatorCssHasBeenSet=true;}this.init=function(j,l){var k=true;if(j.loadingIndicatorDelay){sap.zen.loadingIndicatorDelay=j.loadingIndicatorDelay;}if(!this.loadingIndicatorCssHasBeenSet){g();}this.handleMessageControl();if(!this.bIsRuntimeMode){if(this.oContentComponent){k=this.dispatcher.getComponentIdForControlId(this.oContentComponent.content.control.id)==null;}}else{if(sap.zen.Dispatcher.instance.oCurrentVarDlg){k=!sap.zen.Dispatcher.instance.oCurrentVarDlg.isOpen();}else{k=true;}}if(!k){this.updateDialogButtons(j);this.updateDialogContent();}else{this.createDialogButtons(j);this.createDialogContent(j);}};this.getOrCreateDialogRootArea=function(){var j=$("#"+sap.zen.ZenDialogHandler.anchorDivId);if(!j.length){j=$('<div id="'+sap.zen.ZenDialogHandler.anchorDivId+'"></div>');$("body").append(j);}return j;};function e(l){var j=$(l);var k=0;if(j&&j.length>0){k=j.outerHeight();}return k;}function i(){var j=e(".zenDialogTitleRow");j+=e(".zenDialogButtonRow");j+=e(".zenDialogResizeRow");return j;}this.getVertPaddingAndBorderContribution=function(l){var k=0;var j=0;if(this.iVertPaddingAndBorderContribution===-1){j=parseInt(l.css("padding-top"),10);k+=(isNaN(j)?0:j);j=parseInt(l.css("padding-bottom"),10);k+=(isNaN(j)?0:j);j=parseInt(l.css("border-top"),10);k+=(isNaN(j)?0:j);j=parseInt(l.css("border-bottom"),10);k+=(isNaN(j)?0:j);this.iVertPaddingAndBorderContribution=k;}return this.iVertPaddingAndBorderContribution;};this.calculateAndSetDialogDivSizes=function(){f.oDomContentArea=$(".zenDialogContentArea");f.oDomContentArea.css("height","100%");f.oDomContentDiv=f.oDomContentArea.children(0);if(this.bIsRuntimeMode){$("#"+f.oMatrixLayout.getId()).parent().css("padding","0px").css("height","100%");f.oDomContentDiv.css("height","100%");var r=sap.ui.getCore().getElementById("DLG_VARIABLE_dlg");var l=this.oContentComponent.content.control.characteristics.length;if(r&&l<10){var p=$("#DLG_VARIABLE_dlg").height();var m=l*100+50;if($(".sapzenfilterpanelM-ListItem")){m=$(".sapzenfilterpanelM-ListItem").height()*l+60;}if($(".variantBox").length){m+=$(".variantBox").length*$(".variantBox")[0].offsetHeight;}if(m<=p){r.setContentHeight(m+50+"px");}}}else{var n=this.getOrCreateDialogRootArea();var k=parseInt(n.css("height"),10);var q=i();var j=k-q;var o=j-this.getVertPaddingAndBorderContribution(f.oDomContentArea);f.oDomContentDiv.css("height",o+"px");}};this.createMatrixLayout=function(l){$.sap.require("sap.zen.commons.layout.MatrixLayout");var j=new sap.zen.commons.layout.MatrixLayout(l,{layoutFixed:false,height:"100%",width:"100%"});j.addStyleClass("zenDialogMatrixLayout");j.fOrigOnAfterRendering=j.onAfterRendering;var k=this;j.onAfterRendering=function(){if(this.fOrigOnAfterRendering){this.fOrigOnAfterRendering();}k.calculateAndSetDialogDivSizes();k.setInitialSizes();};return j;};this.createContentArea=function(){var k=new sap.zen.commons.layout.MatrixLayoutRow();k.addStyleClass("zenDialogContentRow");var j=new sap.zen.commons.layout.MatrixLayoutCell();j.addStyleClass("zenDialogContentArea");k.addCell(j);return k;};this.createButtonArea=function(){var j=new sap.zen.commons.layout.MatrixLayoutRow();j.addStyleClass("zenDialogButtonRow");var k=new sap.zen.commons.layout.MatrixLayoutCell({hAlign:sap.zen.commons.layout.HAlign.Begin});k.addStyleClass("zenDialogButtonArea");j.addCell(k);return j;};this.getContent=function(j){var k=null;if(j.content&&j.content.length>0){k=j.content;}return k;};this.validateAndExtractDialogContent=function(j){var k=null;if(j){k=this.getContent(j);if(!k||k&&k.length>2){return false;}this.oMsgComponent=this.getMsgComponent(k);this.oContentComponent=this.getContentComponent(k);if(!this.oMsgComponent){if(!this.oContentComponent||(this.oContentComponent&&k.length>1)){return false;}}else{if(!this.oContentComponent&&k.length>1){return false;}}}else{return false;}return true;};this.getMsgComponent=function(n){var l=null;var k;var j;var m;var o;if(n){for(k=0;k<n.length&&!l;k++){j=n[k];if(j&&j.component){o=j.component.type;if(o==="MESSAGEVIEW_COMPONENT"){l=j.component;}}}}return l;};this.getContentComponent=function(n){var k=null;var l;var j;var m;var o;if(n){for(l=0;l<n.length&&!k;l++){j=n[l];if(j&&j.component){o=j.component.type;if(o!=="MESSAGEVIEW_COMPONENT"){k=j.component;}}}}return k;};this.getMsgControlFromComponent=function(k){var j=null;if(k&&k.content){j=k.content.control;}return j;};this.createAndAdd=function(m,p,s,n,r){var k=p.id;this.dispatcher.enableReady(false);this.iVertPaddingAndBorderContribution=-1;this.bDisplayTitle=p.displaytitle;this.sTitleText=p.titletext;this.bCanMove=p.canmove;this.bCanResize=p.canresize;this.bBrowserResize=p.hookbrowserresize;this.bIsRuntimeMode=p.renderruntimeinitvarscreen;this.aLumiraExtensions=a.getService(null,"*zen.rt.components.dialog.variabledialogextpoint");this.bShowVariants=p.showVariants;var q=null;var t=null;var l=null;var o;o=this.validateAndExtractDialogContent(p);if(!o){jQuery.sap.log.error("Invalid Dialog Content");return;}if(this.bIsRuntimeMode===true){this.createDialog(k+"_dlg");this.oMatrixLayout=this.createMatrixLayout(k+"_ml");this.oTopLevelControl=new sap.m.Button(k,{enabled:false});var j=this.oTopLevelControl.destroy;this.oTopLevelControl.destroy=function(){if(sap.zen.Dispatcher.instance.oCurrentVarDlg){sap.zen.Dispatcher.instance.oCurrentVarDlg.destroy();delete sap.zen.Dispatcher.instance.oCurrentVarDlg;sap.zen.Dispatcher.instance.notifyControlsOfVariableDialogClose();}j.apply(this,arguments);};sap.zen.Dispatcher.instance.oCurrentVarDlg.oDispatcherHook=this.oTopLevelControl;this.oTopLevelControl.aZenChildren=[];this.oTopLevelControl.aZenChildren.push(sap.zen.Dispatcher.instance.oCurrentVarDlg);if(typeof(DSH_deployment)!=="undefined"&&DSH_deployment===true){n(this.oTopLevelControl,r);}}else{this.oMatrixLayout=this.createMatrixLayout(k);this.oTopLevelControl=this.oMatrixLayout;this.oTopLevelControl.aZenChildren=[];}if(p.onepageprompt){this.oMatrixLayout.addStyleClass("zenDialogOnePage");}if(this.oContentComponent){t=this.createContentArea();this.oMatrixLayout.addRow(t);}if(!this.bIsRuntimeMode){l=this.createButtonArea();this.oMatrixLayout.addRow(l);this.getOrCreateDialogRootArea();n(this.oMatrixLayout,s);}this.init(p);this.hookBrowserResize();if(p.toplevelcssclass.length>0){this.oMatrixLayout.addStyleClass(p.toplevelcssclass);}if(this.bIsRuntimeMode===true){this.openDialog();}return this.oTopLevelControl;};this.openDialog=function(){var j=sap.zen.Dispatcher.instance.oCurrentVarDlg;if(j){sap.zen.Dispatcher.instance.notifyControlsOfVariableDialogOpen();j.addContent(this.oMatrixLayout);j.open();}};this.createDialog=function(m){var j="100%";var k=Math.floor(window.innerWidth/2)+"px";var l=new sap.m.Dialog(m,{showHeader:this.bDisplayTitle,title:this.sTitleText,resizable:this.bCanResize,draggable:this.bCanMove,horizontalScrolling:false,verticalScrolling:false,contentHeight:j,contentWidth:k,afterOpen:function(){if($.browser.mozilla){var o=$("#"+f.oContentControl.getId());o.css("display","inline-table");}else{if($.browser.webkit){var o=$("#"+f.oContentControl.getId());var n=o.parent();n.css("height","100%");}}}});l.attachBrowserEvent("keydown",function(n){if(n.which===27){if(n.stopPropagation){n.stopPropagation();}if(n.cancelBubble){n.cancelBubble=true;}}});l.addStyleClass("sapLudsiDialog");sap.zen.Dispatcher.instance.oCurrentVarDlg=l;};this.applyForChildren=function(o,k){if(o.aZenChildren){for(var l=0;l<o.aZenChildren.length;l++){var n=o.aZenChildren[l];var m=this.dispatcher.getRootControlForComponentId(n);if(m){var j=k(m);if(j){return j;}}}}return null;};var c=this.remove;this.remove=function(j){if(j){if(sap.zen.Dispatcher.instance.oCurrentVarDlg){sap.zen.Dispatcher.instance.oCurrentVarDlg.destroy();delete sap.zen.Dispatcher.instance.oCurrentVarDlg;sap.zen.Dispatcher.instance.notifyControlsOfVariableDialogClose();}c.call(this,j);}};this.setInitialSizes=function(){if(this.bBrowserResize===true){this.initialWindowHeight=parseInt($(window).innerHeight(),10);this.initialWindowWidth=parseInt($(window).innerWidth(),10);this.contentTdHeight=parseInt(this.oDomContentArea.css("height"),10)-1;this.contentHeight=parseInt(this.oDomContentDiv.css("height"),10)-1;}};this.browserResizeEndEvent=function(k,j){if(this.oContentControl.ZEN_resizeEnd){this.oContentControl.ZEN_resizeEnd(k,j);}};this.browserResizeListener=function(){clearTimeout(this.resizeEndTimer);var l=parseInt($(window).innerHeight(),10);var j=l-this.initialWindowHeight;var m=parseInt($(window).innerWidth(),10);var k=m-this.initialWindowWidth;if(j!==0){this.contentTdHeight+=j;this.contentHeight+=j;this.initialWindowHeight=l;this.oDomContentArea.css("height",this.contentTdHeight+"px");this.oDomContentDiv.css("height",this.contentHeight+"px");}if(k!==0){this.initialWindowWidth=m;}if(this.oContentControl.ZEN_resize){this.oContentControl.ZEN_resize();}this.resizeEndTimer=setTimeout((function(p,o,n){return function(){p.browserResizeEndEvent(o,n);};})(this,k,j),100);};this.hookBrowserResize=function(){if(this.bBrowserResize===true){var j=this;$(window).resize(function(k){clearTimeout(j.resizeTimer);j.resizeTimer=setTimeout((function(l){return function(){l.browserResizeListener();};})(j),50);});}};this.update=function(l,j,k){if(j){if(j.closeDialogCommand&&j.closeDialogCommand.length>0){sap.zen.ZenDialogHandler.closeDialog();setTimeout(function(){var m=new Function(j.closeDialogCommand);m();},0);}else{if(this.validateAndExtractDialogContent(j)){this.init(j,k);}else{jQuery.sap.log.error("Invalid Dialog Content");}}}};this.getType=function(){return"zendialog";};};sap.zen.ZenDialogHandler.closeDialog=function(){var c=sap.zen.Dispatcher.instance.oCurrentVarDlg;if(c){var d=c.oDispatcherHook;sap.zen.Dispatcher.instance.dispatchRemove(d);}};return new sap.zen.ZenDialogHandler();});define("zen.rt.components.filterpanel/resources/js/list_filter_m_handler",["zen.rt.components.filterpanel/resources/js/inputcontrol_handler","zen.rt.components.filterpanel/resources/js/MessageBundle","css!../css/inputcontrols.css"],function(a,b){sap.ui.getCore().loadLibrary("sap.ui.table");sap.m.StandardListItem.extend("sap.m.InputControlListItem",{metadata:{properties:{key:{type:"string"}}},renderer:{}});var c=function(){var f=this;var g=0;a.ctor.apply(this,arguments);var e=function(l,j,h,u){var r=j;var w=f.getICCustomProperties(l.sId,"searchField");var n=f.getICCustomProperties(l.sId,"maxElementValue");var t=l.getModel().oData.characteristics[0].characteristic.name;var p=l.getModel().oData.characteristics[0].characteristic.type;var i=l.getModel().getProperty("/property/memberdisplay");var v=l.getModel().getProperty("/dialog/hierarchical");if(v){var m=f.getICCustomProperties(l.sId,"HierLov");m.collapseAll();}if(n||v){w.ZEN_searchValue=r;f.doMemberSearch(l,r);}else{if(!n&&h==="liveChange"){var o=[];if(r&&r.length>0){if(i==="KEY"||p==="DATE"||p==="DATE_TIME"){var k=new sap.ui.model.Filter("displaykey",sap.ui.model.FilterOperator.Contains,r);}else{var k=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,r);}o.push(k);}else{var s=f.getICCustomProperties(l.sId,"headerToolbar");s.removeAllContent();s.addContent(w);}var q=u.getBinding("items");q.filter(o,"dialog/members");}}};this.getMainContent=function(w){this.callSubscribeContextMenu(w);var u=new sap.m.Title({width:"100%",level:sap.ui.core.TitleLevel.H6,titleStyle:sap.ui.core.TitleLevel.H6}).addStyleClass("sapUiTinyMarginBegin");var x=new sap.m.List();x.setMode(sap.m.ListMode.MultiSelect);x.setGrowing(true);x.setIncludeItemInSelection(true);x.setGrowingScrollToLoad(true);x.setGrowingThreshold(100);x.setBackgroundDesign(sap.m.BackgroundDesign.Transparent);x.exit=function(B){this.removeICCustomProperties(w.sId);}.bind(this);x.attachSelectionChange(function(M){var N=[];var C=w.getModel().oData.filters[w.getModel().oData.characteristics[0].characteristic.name].ranges;var L=w.getModel().oData.characteristics[0].characteristic.name;var H=w.getModel().oData.characteristics[0].characteristic.type;var D=w.getModel().getProperty("/filters/");if(D.hasOwnProperty(L)){var K=D[L];var E=false;if(K.ranges.length>0&&K.ranges[0].hasOwnProperty("exclude")){E=K.ranges[0].exclude;}}var B=w.getModel().getProperty("/property/memberdisplay");var F=false;if(M.getParameter("selected")==true){var J=K.ranges;var G=J.length;if(G==0){E=this.getExcludeForDeselectAll(L);}C.push({from:{key:M.getParameter("listItem").getProperty("key")},operation:"EQ",exclude:E});this.setICCustomProperties(w.sId,"renderUpdate","ADDED");N=C;}else{for(var I=0;I<C.length;I++){if((H==="DATE"||H==="DATE_TIME")){if(C[I].from.displaykey!=M.getParameter("listItem").getProperty("title")){N.push({from:{key:C[I].from.key},operation:"EQ",exclude:E});}}else{if(C[I].from.key!=M.getParameter("listItem").getProperty("key")){N.push({from:{key:C[I].from.key},operation:"EQ",exclude:E});}}}this.setICCustomProperties(w.sId,"renderUpdate","REMOVED");}if(!F){f.setFilter(w,N);clearTimeout(g);g=setTimeout(function(){sap.zen.loadingIndicator.showNow();w.ZEN_submit_with_apply();},1100);}}.bind(this));var j=new sap.m.HBox();var q=new sap.m.SearchField().addStyleClass("sapUiTinyMarginBegin").addStyleClass("sapUiTinyMarginEnd");q.attachSearch(function(C){var D=C.getSource().getValue();var B=C.getId();e(w,D,B,x);});var m;q.attachLiveChange(function(C){clearTimeout(m);var D=f.getICCustomProperties(w.sId,"maxElementValue");var E=C.getSource().getValue();var B=C.getId();if(D){m=setTimeout(e,2000,w,E,B,x);}else{e(w,E,B,x);}});this.setICCustomProperties(w.sId,"searchField",q);var v=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("search"),type:sap.m.ButtonType.Transparent,press:function(){var B=this.getICCustomProperties(w.sId,"headerToolbar");B.removeAllContent();var C=this.getICCustomProperties(w.sId,"searchField");B.addContent(C);C.setValue("");}.bind(this)});this.setICCustomProperties(w.sId,"searchButton",v);j.addItem(u);j.addItem(v);var k=this;x=this.createLovItems(k,w,x);var t;t=this.createHierarchyLovItems(w,t);var h=new sap.m.ScrollContainer({content:x,height:"calc(100% - 28px)",width:"100%",vertical:true,horizontal:false,visible:false}).addStyleClass("sapLudsiLightestBG");var o=function(C,B,E){var D=C.length;while(D--){if(C[D]&&(arguments.length>2&&C[D].from.key===E)){C.splice(D,1);}}return C;};var l=new sap.m.CheckBox({text:b.getText("SELECT_ALL"),selected:false,visible:false,select:function(Q){var D=w.getModel();var J=D.getProperty("/dialog/members");var E=[];for(var G=0;G<J.length;G++){var K=D.getProperty("/dialog/members/"+G+"/key");E.push(K);}var H=w.getModel().oData.characteristics[0].characteristic.name;var M=D.getProperty("/filters/");if(M.hasOwnProperty(H)){var R=M[H];}var S=R.ranges;var L=[];S.forEach(function(T){L.push(T.from.key);});if(Q.mParameters.selected){var O=x.getBinding("items").getCurrentContexts();var C=w.getModel().oData.characteristics[0].characteristic.name;var M=w.getModel().getProperty("/filters/");if(M.hasOwnProperty(C)){var R=M[C];}var B=false;if(R.ranges.length>0&&R.ranges[0].hasOwnProperty("exclude")){B=R.ranges[0].exclude;}var F=R.ranges;var I=F.length;if(I==0){B=this.getExcludeForDeselectAll(C);}O.forEach(function(V){var W=V.oModel;var T=V.sPath;var U=W.getProperty(T).key;if(E.indexOf(U)!=-1){L.push(U);}});L=_.uniq(L);var N=[];L.forEach(function(T){N.push({from:{key:T},operation:"EQ",exclude:B});});f.setFilter(w,N);clearTimeout(g);g=setTimeout(function(){sap.zen.loadingIndicator.showNow();w.ZEN_submit_with_apply();},1100);}else{var P=x.getBinding("items").getCurrentContexts();P.forEach(function(U){var W=U.oModel;var T=U.sPath;var V=W.getProperty(T).key;if(E.indexOf(V)!=-1){L=o(S,".from.key",V);}});f.setFilter(w,L);clearTimeout(g);g=setTimeout(function(){sap.zen.loadingIndicator.showNow();w.ZEN_submit_with_apply();},1100);}}.bind(this)}).addStyleClass("sapLudsiListInputControlSelectAll");var p=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("sys-cancel"),tooltip:b.getText("CLEAR_ALL"),type:sap.m.ButtonType.Transparent,press:function(C){var B=[];f.setFilter(w,B);clearTimeout(g);g=setTimeout(function(){sap.zen.loadingIndicator.showNow();w.ZEN_submit_with_apply();},1100);}}).addStyleClass("clearBtn");var s=new sap.m.ToolbarSpacer();var z=new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[l,s,p]}).addStyleClass("sapLudsiLightestBG");var i=new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[q]}).addStyleClass("sapLudsiLightestBG");var A=new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[u]});var y=new sap.m.ObjectStatus({width:"100%"});y.setVisible(false);y.addStyleClass("inputControlChoiceWarningStrip");var n=new sap.m.Panel({height:"100%",width:"100%",backgroundDesign:sap.m.BackgroundDesign.Solid,headerToolbar:A,content:[i,z,h,t,y]}).addStyleClass("sapLudsiInputControlPanel sapLudsiInputControlPanelZeroPadding");this.setICCustomProperties(w.sId,"listHeading",u);this.setICCustomProperties(w.sId,"ListLov",x);this.setICCustomProperties(w.sId,"HierLov",t);this.setICCustomProperties(w.sId,"selectAllCheckBox",l);this.setICCustomProperties(w.sId,"clearAllBtn",p);this.setICCustomProperties(w.sId,"listPanel",n);this.setICCustomProperties(w.sId,"scrollbar",h);this.setICCustomProperties(w.sId,"headerToolbar",i);this.setICCustomProperties(w.sId,"searchField",q);this.setICCustomProperties(w.sId,"renderUpdate","NONE");var r=w.getModel().getProperty("/property/label");this.setICCustomProperties(w.sId,"warningStrip",y);this.showHideHeader(r,A);return n;};this.createLovItems=function(i,k,h){var j=new sap.m.InputControlListItem({title:"{text}",key:"{key}",selected:"{selected}"});h.bindItems({path:"/dialog/members",template:j});if(k.getModel().getProperty("/characteristics")){f.doLoadMembers(k);}h.onAfterPageLoaded=function(){var l=this.getICCustomProperties(k.sId,"lovsToLoad");if(l!=undefined&&l!=null&&l.length>0){var o=[];for(var m=0;m<l.length;m++){var n=l[m];if(h.getItems()[n]==undefined){o.push(n);}else{h.setSelectedItemById(h.getItems()[n].getId());}}this.setICCustomProperties(k.sId,"lovsToLoad",o);}}.bind(this);return h;};this.createHierarchyLovItems=function(j,i){i=new sap.ui.table.TreeTable({visible:false,visibleRowCountMode:sap.ui.table.VisibleRowCountMode.Auto});this.bRestrictRerender=false;var h=new sap.ui.model.json.JSONModel();var k=j.getModel();h.setData({cols:[{label:k.getProperty("/text/text"),template:"text"},{label:k.getProperty("/text/key"),template:"displaykey"}]});i.setModel(h,"columns");i.bindRows("/dialog/members");i.bindAggregation("columns","columns>/cols",jQuery.proxy(function(l,m){var o,n;if(m.getProperty("type")==="string"){n={path:m.getProperty("template")};}o=new sap.m.Text({wrapping:false,text:{path:m.getProperty("template"),type:m.getProperty("oType")},tooltip:n});return new sap.ui.table.Column(l,{label:"{columns>label}",tooltip:"{columns>label}",template:o,width:"{columns>width}",hAlign:o instanceof sap.m.CheckBox?sap.ui.core.HorizontalAlign.Center:sap.ui.core.HorizontalAlign.Begin,filterProperty:m.getProperty("filter")});},this));i.attachToggleOpenState(function(o){var m,l,p,n;m=o.getParameters();if(m.expanded){l=m.rowContext;p=l.oModel;if(p.getProperty(l.sPath+"/0/node")){n=f.prepareCommand(p.getProperty("/command/expandnode"),"__STRING__",p.getProperty(l.sPath+"/key"));n=f.prepareCommand(n,"__STRING2__",l.sPath);new Function(n)();}}});i.attachRowSelectionChange(function(q){if(!this.bRestrictRerender){var n=[];var p=i.getSelectedIndices();var r=j.getModel().oData.characteristics[0].characteristic.name;var o=k.getProperty("/filters/");if(o.hasOwnProperty(r)){var s=o[r];var l=false;if(s.ranges.length>0&&s.ranges[0].hasOwnProperty("exclude")){l=s.ranges[0].exclude;}}var m=false;if(l){m=true;}p.forEach(function(x){var w=i.getContextByIndex(x);var v=w.oModel;var t=w.sPath;var u=v.getProperty(t).key;n.push({from:{key:u},operation:"EQ",exclude:m});}.bind(this));this.setFilter(j,n);j.ZEN_submit_with_apply();}this.bRestrictRerender=false;}.bind(this));return i;};this.updateSelectionState=function(m,n){this.bRestrictRerender=true;var o=this.getICCustomProperties(n.sId,"HierLov");o.clearSelection();if(m&&m.length>0){var p=o.getBinding("rows").getContexts(0);if(p&&p.length>0){for(var r=0;r<m.length;r++){var l=m[r];var k=null;for(var q=0;q<p.length;q++){var s=p[q];if(s){var h=s.getObject();if(k!==null){if(k<h.level){this.bRestrictRerender=true;o.addSelectionInterval(q,q);}else{k=null;}}else{if(h.key===l){this.bRestrictRerender=true;o.addSelectionInterval(q,q);if(k===null){k=h.level;}}}}}}}}this.bRestrictRerender=false;};this.finalizeUpdate=function(l){sap.zen.loadingIndicator.hide();var h=l.getModel().getProperty("/characteristics");if(h.length>0){var T=this.isControlNeedChange(l);if(!T){return;}var m=l.getModel();var n=m.getProperty("/dialog/members");var p=this.getICCustomProperties(l.sId,"clearAllBtn");var S=this.getICCustomProperties(l.sId,"scrollbar");var B=this.getICCustomProperties(l.sId,"selectAllCheckBox");var V=this.getICCustomProperties(l.sId,"ListLov");var v=this.getICCustomProperties(l.sId,"HierLov");var O=this.getICCustomProperties(l.sId,"maxElementValue");if(typeof O==="undefined"){O=m.getProperty("/dialog/selection/maxelements");this.setICCustomProperties(l.sId,"maxElementValue",O);}var q=m.getProperty("/dialog/hierarchical");if(q){v.setVisible(true);var W=m.getData();var P=W.dialog.name;var A=W.filters[P];var I=[];_.each(A.ranges,function(Y){var i=Y.from.key;I.push(i);});this.updateSelectionState(I,l);}else{S.setVisible(true);B.setVisible(true);}var z=[];var F=m.oData.characteristics[0].characteristic.name;var y=m.oData.characteristics[0].characteristic.type;var R=m.getProperty("/property/memberdisplay");var X="";var N=m.getProperty("/filters/");if(N.hasOwnProperty(F)){var j=N[F];}if(R=="KEY"&&this.getICCustomProperties(l.sId,"renderUpdate")=="NONE"){var w=new sap.m.InputControlListItem({title:"{displaykey}",key:"{key}"});w.addStyleClass("icListItemCss");V.bindItems({path:"/dialog/members",template:w});X="key";var r=v.getColumns();if(r[0]&&r[1]){r[0].setVisible(true);r[1].setVisible(false);}}else{if(this.getICCustomProperties(l.sId,"renderUpdate")=="NONE"){if(y==="DATE"||y==="DATE_TIME"){var w=new sap.m.InputControlListItem({title:"{displaykey}",key:"{key}"});w.addStyleClass("icListItemCss");V.bindItems({path:"/dialog/members",template:w});X="key";}else{var k=new sap.m.InputControlListItem({title:"{text}",key:"{key}"});k.addStyleClass("icListItemCss");V.bindItems({path:"/dialog/members",template:k});X="text";}var r=v.getColumns();if(r[0]&&r[1]){r[0].setVisible(true);r[1].setVisible(false);}}}this.setICCustomProperties(l.sId,"type",X);if(j.ranges[0]){var G=j.ranges[0].operation;}if(G==undefined){G="EQ";}G=this.getOperationName(G);var J=this.getICCustomProperties(l.sId,"listHeading");var K=l.getModel().oData.characteristics[0].characteristic.text;if(G!==""){K=l.getModel().oData.characteristics[0].characteristic.text;}J.setText(K);var H=j.ranges.length;if(H===0){this.setICCustomProperties(l.sId,"memberCount",0);p.setEnabled(false);}else{if(H>=0){p.setEnabled(true);}}if(this.getICCustomProperties(l.sId,"renderUpdate")=="NONE"&&H!=0){V.removeSelections(true);var x=0;var U=[];for(var D=0;D<H;D++){var u=j.ranges[D].from.key;z.push(u);var E=new sap.ui.model.Filter("key",sap.ui.model.FilterOperator.EQ,u);U.push(E);}var o=jQuery.extend({},V.getBinding("items"));o.filter(U,"dialog/members");var M=[];for(var Q=0;Q<o.aIndices.length;Q++){var L=o.aIndices[Q];if(V.getItems()[L]==undefined){M.push(L);}else{V.setSelectedItemById(V.getItems()[L].getId());}x=x+1;}this.setICCustomProperties(l.sId,"lovsToLoad",M);this.setICCustomProperties(l.sId,"memberCount",x);}else{if(this.getICCustomProperties(l.sId,"renderUpdate")=="SELECT_ALL"){V.selectAll();this.setICCustomProperties(l.sId,"memberCount",m.getProperty("/dialog/members/length"));}else{if(this.getICCustomProperties(l.sId,"renderUpdate")=="DESELECT_ALL"){V.removeSelections(true);this.setICCustomProperties(l.sId,"memberCount",0);}else{if(this.getICCustomProperties(l.sId,"renderUpdate")=="ADDED"){this.setICCustomProperties(l.sId,"memberCount",this.getICCustomProperties(l.sId,"memberCount")+1);}else{if(this.getICCustomProperties(l.sId,"renderUpdate")=="REMOVED"){this.setICCustomProperties(l.sId,"memberCount",this.getICCustomProperties(l.sId,"memberCount")-1);}}}}}if(this.getICCustomProperties(l.sId,"memberCount")==m.getProperty("/dialog/members/length")){B.setProperty("selected",true);}else{B.setProperty("selected",false);}var C=this.getICCustomProperties(l.sId,"warningStrip");var s=l.getModel().getProperty("/dialog/selection/maxelements");if(s){S.addContent(C);var t=f.getICCustomProperties(l.sId,"searchField");if(t.getValue()){C.setText(b.getText("IC_HAS_MORE_VALUES_IN_SEARCH_RESULT_TEXT"));d(C,b.getText("IC_HAS_MORE_VALUES_IN_SEARCH_RESULT"));}else{C.setText(b.getText("IC_HAS_MORE_VALUES_SEARCH"));d(C,b.getText("IC_HAS_MORE_VALUES"));}C.onAfterRendering=function(){d(C,b.getText("IC_HAS_MORE_VALUES"));};S.onAfterRendering=function(){$("#"+S.getId())[0].onscroll=function(Y){var i=f.getICCustomProperties(l.sId,"warningStrip");var aa=sap.ui.getCore().byId(Y.target.id);var Z=aa.getModel().getProperty("/dialog/selection/maxelements");if(Z&&i){i.setVisible(true);}};};B.setVisible(false);S.setHeight("calc(100% - 46px)");}else{C.setVisible(false);if(q){B.setVisible(false);}else{B.setVisible(true);}S.setHeight("calc(100% - 61px)");}this.setICCustomProperties(l.sId,"listHeading",J);this.setICCustomProperties(l.sId,"ListLov",V);this.setICCustomProperties(l.sId,"HierLov",v);this.setICCustomProperties(l.sId,"selectAllCheckBox",B);this.setICCustomProperties(l.sId,"clearAllBtn",p);this.setICCustomProperties(l.sId,"scrollbar",S);this.setICCustomProperties(l.sId,"renderUpdate","NONE");}};var d=function(h,j){var k=document.getElementById(h.getId());if(undefined!==k&&k!=null){var i=k.childNodes[2]!==undefined?k.childNodes[2].childNodes[0]:undefined;if(i!==undefined){i.title=j;}}};this.getType=function(){return"list_filter";};this.getDecorator=function(){return"LumiraDesignModeDecorator";};};return new c();});define("zen.rt.components.filterpanel/resources/js/ssd_filter_m_handler",["zen.rt.components.filterpanel/resources/js/inputcontrol_handler","zen.rt.components.filterpanel/resources/js/MessageBundle","css!../css/inputcontrols.css"],function(a,b){var c=function(){var f=this;this.isExclude=false;a.ctor.apply(this,arguments);var e=function(m){var j=m.oData.characteristics[0].characteristic.name;var i=m.getProperty("/filters/");if(i.hasOwnProperty(j)){var l=i[j];var k=l.ranges.length;for(var h=0;h<k;h++){var g=l.ranges[h].from.key;}}return g;};var d=function(l,i,g){var m=l.getModel();var q=f.getICCustomProperties(l.sId,"selectControl");var t=i;var v=f.getICCustomProperties(l.sId,"searchField");var n=f.getICCustomProperties(l.sId,"maxElementValue");var u=l.getModel().oData.characteristics[0].characteristic.name;var p=l.getModel().oData.characteristics[0].characteristic.type;var h=l.getModel().getProperty("/property/memberdisplay");var k=l.getModel().getProperty("/filters/");if(k.hasOwnProperty(u)){var s=k[u];}if(!n&&g==="liveChange"){var o=[];if(t&&t.length>0){if(h==="KEY"||p==="DATE"||p==="DATE_TIME"){var j=new sap.ui.model.Filter("displaykey",sap.ui.model.FilterOperator.Contains,t);}else{j=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,t);}o.push(j);}else{v.setValue();}var r=q.getBinding("items");r.filter(o,"dialog/members");}else{if(n){v.ZEN_searchValue=t;f.doMemberSearch(l,t);}}};this.getMainContent=function(l){this.callSubscribeContextMenu(l);var h=new sap.ui.core.Item({key:"{key}",text:"{text}"});var k=new sap.m.SearchField({placeholder:b.getText("SEARCH"),width:"100%"});var i=new sap.m.Select({width:"100%",items:{path:"/dialog/members",template:h},change:function(v){var s=v.getParameter("selectedItem");var r=l.getModel();var u=r.oData.characteristics[0].characteristic.name;var o=l.getModel().getProperty("/filters/");if(o.hasOwnProperty(u)){var t=o[u];var p=false;if(t.ranges.length>0&&t.ranges[0].hasOwnProperty("exclude")){p=t.ranges[0].exclude;}if(t.ranges[0]){var q=t.ranges[0].operation;}}if(!q){q="EQ";}var w=[];w.push({from:{key:s.getKey()},operation:q,exclude:p});f.setFilter(l,w);l.ZEN_submit_with_apply();}.bind(this)});i.addContent=function(){var o=this.getPicker();o.addStyleClass("sapLudsiInputControlPopover");if(o.getContent().length===1){o.insertContent(k,0);}};i.exit=function(o){this.removeICCustomProperties(l.sId);}.bind(this);k.attachSearch(function(p){var q=p.getSource().getValue();var o=p.getId();d(l,q,o);});var n;k.attachLiveChange(function(p){clearTimeout(n);var q=f.getICCustomProperties(l.sId,"maxElementValue");var r=p.getSource().getValue();var o=p.getId();if(q){n=setTimeout(d,2000,l,r,o);}else{d(l,r,o);}});i.onsapfocusleave=function(){};i.synchronizeSelection=function(o){if(this.isSelectionSynchronized()){return;}var p=true;if(o){p=!!o.forceSelection;}var r=this.getSelectedKey(),q=this.getItemByKey(""+r);if(q&&(r!=="")){this.setAssociation("selectedItem",q,true);this.setProperty("selectedItemId",q.getId(),true);}else{if(p&&this.getDefaultSelectedItem()&&(!this.isBound("items")||this.bItemsUpdated)){this.setSelection(this.getSelectedKey());}}};i._onBeforeRenderingPopover=function(){sap.m.Select.prototype._onBeforeRenderingPopover.apply(this,arguments);};i.onBeforeRendering=function(){sap.m.Select.prototype.onBeforeRendering.apply(this,arguments);var o=f.getICCustomProperties(l.sId,"maxElementValue");var p=k.getValue();if(p!==""&&!o){d(l,p,"liveChange");}};i.onAfterRendering=function(){sap.m.Select.prototype.onAfterRendering.apply(this,arguments);var o=i.getIdForLabel();$("#"+o).attr("readonly",true);k.focus();};var m=new sap.m.Title({width:"100%",level:sap.ui.core.TitleLevel.H6,titleStyle:sap.ui.core.TitleLevel.H6}).addStyleClass("sapUiTinyMarginBegin");var g=new sap.m.Panel({backgroundDesign:sap.m.BackgroundDesign.Solid,width:"100%",headerToolbar:new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[m]}),content:[i]}).setModel(this._model);f.setICCustomProperties(l.sId,"listHeading",m);f.setICCustomProperties(l.sId,"selectControl",i);this.setICCustomProperties(l.sId,"searchField",k);this.setICCustomProperties(l.sId,"panel",g);if(l.getModel().getProperty("/characteristics")){this.doLoadMembers(l);}g.addStyleClass("sapLudsiInputControlPanel");var j=l.getModel().getProperty("/property/label");this.showHideHeader(j,g.getHeaderToolbar());return g;};this.finalizeUpdate=function(x){var t=x.getModel().getProperty("/characteristics");if(t.length>0){this.isControlNeedChange(x);var j=x.getModel();var i=j.oData.characteristics[0].characteristic.name;var g=j.oData.characteristics[0].characteristic.type;var s=j.getProperty("/property/memberdisplay");var v=this.getICCustomProperties(x.sId,"selectControl");var k=this.getICCustomProperties(x.sId,"maxElementValue");var p=x.getModel().getProperty("/filters/");if(p.hasOwnProperty(i)){var u=p[i];}if(typeof k==="undefined"){k=j.getProperty("/dialog/selection/maxelements");this.setICCustomProperties(x.sId,"maxElementValue",k);}if(s=="KEY"||g==="DATE"||g==="DATE_TIME"){var w=new sap.ui.core.Item({key:"{key}",text:"{displaykey}"});var z={path:"/dialog/members",template:w};v.unbindItems();v.bindItems(z);}else{var y=new sap.ui.core.Item({key:"{key}",text:"{text}"});var n={path:"/dialog/members",template:y};v.unbindItems();v.bindItems(n);}var h=false;if(u.ranges.length>0&&u.ranges[0].hasOwnProperty("exclude")){h=u.ranges[0].exclude;}if(h){this.isExclude=true;}if(u.ranges[0]){var m=u.ranges[0].operation;}if(m==undefined){m="EQ";}m=this.getOperationName(m);var r=this.getICCustomProperties(x.sId,"listHeading");r.setText(x.getModel().oData.characteristics[0].characteristic.text);if(m!==""){r.setText(x.getModel().oData.characteristics[0].characteristic.text);}var u=e(x.getModel());if(u===undefined){v.setSelectedKey(" ");}else{v.setSelectedKey(u);}var o=x.getModel().getProperty("/dialog/selection/maxelements");if(o){var v=this.getICCustomProperties(x.sId,"selectControl");var l=new sap.ui.core.Item({width:"100%"});v.addItem(l);v.getPicker().addStyleClass("multiComboBoxDisableLastItem");var q=f.getICCustomProperties(x.sId,"searchField");if(q.getValue()){l.setText(b.getText("IC_HAS_MORE_VALUES_IN_SEARCH_RESULT_TEXT"));l.setTooltip(b.getText("IC_HAS_MORE_VALUES_IN_SEARCH_RESULT"));}else{l.setText(b.getText("IC_HAS_MORE_VALUES_SEARCH"));l.setTooltip(b.getText("IC_HAS_MORE_VALUES"));l.setEnabled(false);}l.onAfterRendering=function(){l.setTooltip(b.getText("IC_HAS_MORE_VALUES"));};}f.setICCustomProperties(x.sId,"listHeading",r);f.setICCustomProperties(x.sId,"selectControl",v);}};this.getType=function(){return"ssd_filter";};this.getDecorator=function(){return"LumiraDesignModeDecorator";};};return new c();});define("zen.rt.components.filterpanel/resources/js/dropdown_filter_m_handler",["zen.rt.components.filterpanel/resources/js/InputControlComboBox","zen.rt.components.filterpanel/resources/js/inputcontrol_handler","zen.rt.components.filterpanel/resources/js/MessageBundle","css!../css/inputcontrols.css"],function(d,a,c){var b=function(){var f=this;this.isExclude=false;var h=0;a.ctor.apply(this,arguments);var g=function(p){var k=[];var m=p.oData.characteristics[0].characteristic.name;var l=p.getProperty("/filters/");if(l.hasOwnProperty(m)){var o=l[m];var n=o.ranges.length;for(var j=0;j<n;j++){var i=o.ranges[j].from.key;k.push(i);}}k=_.uniq(k);return k;};var e=function(B,k,s){var j=B.getModel();var A=f.getICCustomProperties(B.sId,"multiComboBoxControl");var u=k;var t=f.getICCustomProperties(B.sId,"searchField");var n=f.getICCustomProperties(B.sId,"maxElementValue");var m=B.getModel().oData.characteristics[0].characteristic.name;var i=B.getModel().oData.characteristics[0].characteristic.type;var q=B.getModel().getProperty("/property/memberdisplay");var r=j.getProperty("/filters/");if(r.hasOwnProperty(m)){var z=r[m];}if(!n&&s==="liveChange"){var o=[];if(u&&u.length>0){if(q==="KEY"||i==="DATE"||i==="DATE_TIME"){var p=new sap.ui.model.Filter("displaykey",sap.ui.model.FilterOperator.Contains,u);}else{var p=new sap.ui.model.Filter("text",sap.ui.model.FilterOperator.Contains,u);}o.push(p);}else{t.setValue();}var v=A.getBinding("items");v.filter(o,"dialog/members");var w=A.getBinding("items").getCurrentContexts();var y=g(j);var l=true;var x=f.getICCustomProperties(B.sId,"selectAllCheckbox");w.forEach(function(E){var F=E.oModel;var C=E.sPath;var D=F.getProperty(C).key;if(y.indexOf(D)===-1){l=false;}});if(w===undefined||w.length===0){l=false;}x.setSelected(l);A.setSelectedKeys(y);}else{if(n){A.getPicker().removeStyleClass("multiComboBoxDisableLastItem");f.setICCustomProperties(B.sId,"isSearchWorkflow",true);t.ZEN_searchValue=u;f.doMemberSearch(B,u);if(u===""){A.getPicker().addStyleClass("multiComboBoxDisableLastItem");}}}};this.getMainContent=function(l){this.callSubscribeContextMenu(l);var p=new sap.ui.core.Item({key:"{key}",text:"{text}"});var u=new sap.m.SearchField({placeholder:"Search",width:"100%"});var q=function(x,w,z){var y=x.length;while(y--){if(x[y]&&(arguments.length>2&&x[y].from.key===z)){x.splice(y,1);}}return x;};var r=function(w,y){var x=w.length;while(x--){if(undefined!=w[x]&&(arguments.length>1&&w[x]===y)){w.splice(x,1);}}return w;};var v=new d({items:{path:"/dialog/members",template:p},selectionChange:function(K){var F=K.getParameter("changedItem");var A=K.getParameter("selected");var B=l.getModel();var I=f.getICCustomProperties(l.zenPureId,"filterKey");var J=B.oData.characteristics[0].characteristic.name;var z=B.getProperty("/filters/");if(z.hasOwnProperty(J)){var H=z[J];var y=false;if(H.ranges.length>0&&H.ranges[0].hasOwnProperty("exclude")){y=H.ranges[0].exclude;}var G=H.ranges;var D=G.length;if(D==0){y=this.getExcludeForDeselectAll(J);}}if(A){var L=[];I.push(F.getKey());for(var w=0;w<I.length;w++){L.push({from:{key:I[w]},operation:"EQ",exclude:y});}f.setFilter(l,L);clearTimeout(h);h=setTimeout(function(){sap.zen.loadingIndicator.showNow();l.ZEN_submit_with_apply();},1100);}else{var C=[];if(H){var x=H.ranges;}I=r(I,F.getKey());for(var E=0;E<I.length;E++){C.push({from:{key:I[E]},operation:"EQ",exclude:y});}if(!u.getValue()){f.setFilter(l,C);clearTimeout(h);h=setTimeout(function(){sap.zen.loadingIndicator.showNow();l.ZEN_submit_with_apply();},1100);}else{f.setFilter(l,C);clearTimeout(h);h=setTimeout(function(){sap.zen.loadingIndicator.showNow();l.ZEN_submit_with_apply();},1100);}}}.bind(this)});v.exit=function(w){this.removeICCustomProperties(l.sId);}.bind(this);v.setCountTextAlign(sap.ui.core.TextAlign.Right);var k=new sap.m.CheckBox({text:"Select All",selected:false,visible:false,select:function(F){var z=l.getModel();var B=z.getProperty("/dialog/members");var I=[];for(var D=0;D<B.length;D++){var L=z.getProperty("/dialog/members/"+D+"/key");I.push(L);}var C=[];var M=l.getModel().oData.characteristics[0].characteristic.name;var x=z.getProperty("/filters/");if(x.hasOwnProperty(M)){var J=x[M];var y=J.ranges;y.forEach(function(N){C.push(N.from.key);});}if(F.mParameters.selected){var H=v.getBinding("items").getCurrentContexts();var w=false;if(J.ranges.length>0&&J.ranges[0].hasOwnProperty("exclude")){w=J.ranges[0].exclude;}var E=J.ranges;var A=E.length;if(A==0){w=this.getExcludeForDeselectAll(M);}H.forEach(function(P){var Q=P.oModel;var N=P.sPath;var O=Q.getProperty(N).key;if(I.indexOf(O)!=-1){C.push(O);}});C=_.uniq(C);var G=[];C.forEach(function(N){G.push({from:{key:N},operation:"EQ",exclude:w});});f.setFilter(l,G);clearTimeout(h);h=setTimeout(function(){sap.zen.loadingIndicator.showNow();l.ZEN_submit_with_apply();},1100);}else{var K=v.getBinding("items").getCurrentContexts();K.forEach(function(O){var Q=O.oModel;var N=O.sPath;var P=Q.getProperty(N).key;if(I.indexOf(P)!=-1){C=q(y,".from.key",P);}});f.setFilter(l,C);clearTimeout(h);h=setTimeout(function(){sap.zen.loadingIndicator.showNow();l.ZEN_submit_with_apply();},1100);}}.bind(this)}).addStyleClass("sapLudsiListInputControlSelectAll");u.attachSearch(function(x){var y=x.getSource().getValue();var w=x.getId();e(l,y,w);});var m=new sap.m.Button({icon:sap.ui.core.IconPool.getIconURI("sys-cancel"),tooltip:c.getText("CLEAR_ALL"),type:sap.m.ButtonType.Transparent,press:function(x){var w=[];f.setFilter(l,w);clearTimeout(h);h=setTimeout(function(){sap.zen.loadingIndicator.showNow();l.ZEN_submit_with_apply();},1100);}}).addStyleClass("clearBtn");var o=new sap.m.ToolbarSpacer();var t=new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[k,o,m]}).addStyleClass("sapLudsiLightestBG dropdownSelectToolbar clear");var j;u.attachLiveChange(function(x){clearTimeout(j);var y=f.getICCustomProperties(l.sId,"maxElementValue");var z=x.getSource().getValue();var w=x.getId();if(y){j=setTimeout(e,2000,l,z,w);}else{e(l,z,w);}});v._onBeforeOpenDropdown=function(){sap.m.MultiComboBox.prototype._onBeforeOpenDropdown.apply(this,arguments);var w=this.getPicker();this._oList.setMode(sap.m.ListMode.MultiSelect);this._oList.setGrowing(true);this._oList.setIncludeItemInSelection(true);this._oList.setGrowingScrollToLoad(true);this._oList.setGrowingThreshold(100);w.addStyleClass("sapLudsiInputControlPopover");if(w.getContent().length===1){w.insertContent(t,0);w.insertContent(u,0);}};v.onBeforeRendering=function(){sap.m.MultiComboBox.prototype.onBeforeRendering.apply(this,arguments);var w=f.getICCustomProperties(l.sId,"maxElementValue");var x=u.getValue();if(x!==""&&!w){e(l,x,"liveChange");}};v.onAfterRendering=function(){sap.m.MultiComboBox.prototype.onAfterRendering.apply(this,arguments);var w=v.getIdForLabel();$("#"+w).attr("readonly",true);};var n=new sap.m.Title({width:"100%",level:sap.ui.core.TitleLevel.H6,titleStyle:sap.ui.core.TitleLevel.H6,}).addStyleClass("sapUiTinyMarginBegin");var i=new sap.m.Panel({backgroundDesign:sap.m.BackgroundDesign.Solid,width:"100%",headerToolbar:new sap.m.Toolbar({design:sap.m.ToolbarDesign.Transparent,content:[n]}),content:[v]}).setModel(this._model);f.setICCustomProperties(l.sId,"listHeading",n);f.setICCustomProperties(l.sId,"multiComboBoxControl",v);this.setICCustomProperties(l.sId,"selectAllCheckBox",k);this.setICCustomProperties(l.sId,"clearAllBtn",m);this.setICCustomProperties(l.sId,"searchField",u);this.setICCustomProperties(l.sId,"panel",i);if(l.getModel().getProperty("/characteristics")){this.doLoadMembers(l);}i.addStyleClass("sapLudsiInputControlPanel");var s=l.getModel().getProperty("/property/label");this.showHideHeader(s,i.getHeaderToolbar());return i;};this.finalizeUpdate=function(H){sap.zen.loadingIndicator.hide();var C=H.getModel().getProperty("/characteristics");if(C.length>0){this.isControlNeedChange(H);var l=H.getModel();var B=[];var k=l.oData.characteristics[0].characteristic.name;var j=l.oData.characteristics[0].characteristic.type;var A=l.getProperty("/property/memberdisplay");var F=this.getICCustomProperties(H.sId,"multiComboBoxControl");var D=this.getICCustomProperties(H.sId,"selectAllCheckBox");var v=this.getICCustomProperties(H.sId,"clearAllBtn",v);var w=this.getICCustomProperties(H.sId,"searchField");var n=this.getICCustomProperties(H.sId,"maxElementValue");var u=l.getProperty("/filters/");if(typeof n==="undefined"){n=l.getProperty("/dialog/selection/maxelements");this.setICCustomProperties(H.sId,"maxElementValue",n);}if(A=="KEY"||j==="DATE"||j==="DATE_TIME"){var G=new sap.ui.core.Item({key:"{key}",text:"{displaykey}"});var J={path:"/dialog/members",template:G};F.unbindItems();F.bindItems(J);}else{var I=new sap.ui.core.Item({key:"{key}",text:"{text}"});var r={path:"/dialog/members",template:I};F.unbindItems();F.bindItems(r);}if(u.hasOwnProperty(k)){var E=u[k];var i=false;if(E.ranges.length>0&&E.ranges[0].hasOwnProperty("exclude")){var i=E.ranges[0].exclude;}}if(i){this.isExclude=true;}if(E.hasOwnProperty(q)){var q=E.ranges[0].operation;}if(q==undefined){q="EQ";}if(E.ranges.length===0){v.setEnabled(false);}else{if(E.ranges.length>=0){v.setEnabled(true);}}q=this.getOperationName(q);var z=this.getICCustomProperties(H.sId,"listHeading");z.setText(H.getModel().oData.characteristics[0].characteristic.text);if(q!==""){z.setText(H.getModel().oData.characteristics[0].characteristic.text);}B=g(l);F.setSelectedKeys(B);f.setICCustomProperties(H.zenPureId,"filterKey",B);var x=B.length;F.setCountLabelValue(x+" selected");var p=f.getICCustomProperties(H.sId,"isSearchWorkflow");if(p){var y=F.getBinding("items").getCurrentContexts();var m=true;y.forEach(function(M){var N=M.oModel;var K=M.sPath;var L=N.getProperty(K).key;if(B.indexOf(L)===-1){m=false;}});if(y===undefined||y.length===0){m=false;}D.setSelected(m);p=false;}else{if(B.length===l.getProperty("/dialog/members/length")){D.setProperty("selected",true);}else{D.setProperty("selected",false);}}var t=H.getModel().getProperty("/dialog/selection/maxelements");if(t){var s=f.getICCustomProperties(H.sId,"multiComboBoxControl");var o=new sap.ui.core.Item({width:"100%"});s.addItem(o);s.getPicker().addStyleClass("multiComboBoxDisableLastItem maxmultiSelectD");var w=f.getICCustomProperties(H.sId,"searchField");if(w.getValue()){o.setText(c.getText("IC_HAS_MORE_VALUES_IN_SEARCH_RESULT_TEXT"));o.setTooltip(c.getText("IC_HAS_MORE_VALUES_IN_SEARCH_RESULT"));}else{o.setText(c.getText("IC_HAS_MORE_VALUES_SEARCH"));o.setTooltip(c.getText("IC_HAS_MORE_VALUES"));}o.onAfterRendering=function(){o.setTooltip(c.getText("IC_HAS_MORE_VALUES"));};D.setVisible(false);}else{D.setVisible(true);}f.setICCustomProperties(H.sId,"listHeading",z);f.setICCustomProperties(H.sId,"multiComboBoxControl",F);f.setICCustomProperties(H.sId,"selectAllCheckbox",D);this.setICCustomProperties(H.sId,"searchField",w);$("icComboBoxTokenizer").parent().click(function(){return false;});}};this.getType=function(){return"dropdown_filter";};this.getDecorator=function(){return"LumiraDesignModeDecorator";};};return new b();});define("zen.rt.components.filterpanel/resources/js/inputcontrol_handler",["zen.rt.components.filterpanel/resources/js/abstract_filter_m_handler","zen.rt.uiframework/inputcontrol/inputcontrolDialog","zen.rt.components.filterpanel/resources/js/sliderCustomDialog","zen.rt.components.filterpanel/resources/js/inputControlStyleModel","zen.rt.components.filterpanel/resources/js/MessageBundle"],function(b,i,h,k,e){var g=true;var d=false;var f=" ";var c=null;var a=[];var j=function(){var l=this;b.apply(this,arguments);this.subscribeContextMenu=function(){d=false;var o=function(q){var p=sap.zen.designmode&&sap.zen.designmode.isDesignMode()&&!sap.zen.designmode.isRuntimeAuthoringMode();d=false;if(q.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&!p){return true;}return false;};sap.bi.framework.registerService({provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",getState:function(){return{};},renderParams:{icon:sap.ui.core.IconPool.getIconURI("edit","fpa"),text:e.getText("EDIT_CONTROL"),tooltip:e.getText("EDIT_CONTROL")},action:function(){var r=b.dispatcher.getControlForId(arguments[0].sControlId);var q=r.getModel().getData();var u=q.DATASET;var s=q.DATASETID;var t=q.characteristics[0].characteristic.name;var p=r.zenScope;var w=sap.zen.request.zenSendCommandArrayWoEventWZenPVT([["BI_COMMAND",null,0,[["BI_COMMAND_TYPE","CREATE_DIMENSION_FILTER_STORY",0],["DATASET",u,0],["DATASETID",s,0],["DATASOURCE","",0],["DIMENSION",t,0],["DISPLAYMEMBER","",0],["FILTERSCOPE","",0],["SCOPE",p,0],["TARGET_ITEM_REF","STORY",0]]]]);var v=new Function(w);v();},category:["ICContextMenuActions","sap.lumira.menucategory.component.actions"],order:0,isVisible:o}});sap.bi.framework.registerService({provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",getState:function(){return{};},renderParams:{icon:sap.ui.core.IconPool.getIconURI("input-control","fpa"),text:e.getText("CHANGE_CONTROL"),tooltip:e.getText("CHANGE_CONTROL")},action:function(A){var s=b.dispatcher.getControlForId(arguments[0].sControlId);var p=s.getModel().getData().characteristics[0].characteristic.type;var v=s.getModel().getData().characteristics[0].characteristic.name;var r=s.getModel().getProperty("/filters/");if(r.hasOwnProperty(v)){var z=r[v];var q=z.ranges;}var u=[];q.forEach(function(C){var E=C.operation;var B=C.exclude;var D="";if(B){D=e.getText("NOT");}if(u.indexOf(D+E)==-1){u.push(D+E);}});var y=new Object();y.isChangeControl=true;y.control_id=s.zenPureId;y.dimension_name=v;y.count=q.length;y.dimension_DisplayName=s.getModel().getData().characteristics[0].characteristic.text;if(u.length>1){y.operatorArray="COMPLEX";}else{y.operatorArray=u[0];}if(y.operatorArray==undefined){y.operatorArray="EQUAL";}y.sControlId=A.sControlId;y.zenControlType=A.zenControlType;var w="ALL";try{w=s.getModel().oData.property.visualizationmode;var x=w;if(u.length>1){w="COMPLEX";}else{w=l.getVizMode(u,q,w,p);}y.visualizationmode=w;y.isHierarchy=s.getModel().getProperty("/dialog/hierarchical");}catch(t){y.visualizationmode="ALL";}if(p==="DOUBLE"||p==="LONG"||p==="INTEGER"){y.datatype="NUMBER";}else{y.datatype=p;}i.initiate(null,s.zenPureId,"","","",y,x);return;},category:["ICContextMenuActions","sap.lumira.menucategory.component.actions"],order:1,isVisible:o}});var n=function(r,p){var q=sap.bi.framework.getService(null,"zen.rt.components.dynamicmenu");if(p===e.getText("FONT_EDITING")){r.location="header";f=r.sControlId+" .sapMIBar";}else{r.location="body";f=r.sControlId+" .sapMPanelContent";}d=true;q.showDynamicMenu("HorizontalMenuBuilder",$("#"+f),l,r,"",["sap.lumira.menucategory.component.properties"],"",false);};sap.bi.framework.registerService({provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",getState:function(){return{};},renderParams:{text:e.getText("FONT_EDITING"),tooltip:e.getText("FONT_EDITING"),icon:{key:"text",family:"fpa"}},action:n,category:["ICContextMenuActions","sap.lumira.menucategory.component.actions"],isVisible:o}});sap.bi.framework.registerService({provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",getState:function(){return{};},renderParams:{text:e.getText("FORMAT_BODY"),tooltip:e.getText("FORMAT_BODY"),icon:{key:"text",family:"fpa"}},action:n,category:["ICContextMenuActions","sap.lumira.menucategory.component.actions"],isVisible:o}});};this.callSubscribeContextMenu=function(n){l=this;l.oControl=n;if(g){l.subscribeContextMenu();this.subsribeInlineMenu();}g=false;};this.getOperatorForDeselectall=function(r){var n=sap.bi.framework.getService(null,"zen.rt.components.story");if(n){var q=n.getFilterControl();var o="";if(q){var s=q.oControlProperties.filterValues;for(var p=0;p<s.length;p++){if(s[p].id===r){return(s[p].operator.split("::")[0]);}}}}return o;};this.getExcludeForDeselectAll=function(n){var o=this.getOperatorForDeselectall(n);if(o==="NOT EQUAL"){return true;}else{return false;}};this.getOperatorIdOfLastTokenDeleted=function(n){var o=this.getOperatorForDeselectall(n);switch(o){case"EQUAL":return"EQ";case"NOT EQUAL":return"EQ";case"GREATER_THAN":return"GT";case"GREATER_EQUAL":return"GE";case"LESS_THAN":return"LT";case"LESS_EQUAL":return"LE";case"BETWEEN":return"BT";case"NOT BETWEEN":return"NBT";case"CONTAINS_PATTERN":return"Contains";case"NOT CONTAINS_PATTERN":return"Contains";default:return"EQ";}};this.subsribeInlineMenu=function(){var n=this;this._getToggleState=function(s,r){return(r===true)||((r!==false)&&!(s.pressed&&s.highlighted));};this._getToggleRenderParams=function(r){return{renderParams:{pressed:r,highlighted:r}};};this._getFontNameState=function(u){var s;if(u.location==="body"){var v=u.zenControlType;var r;var t=q(v,u);r=$("#"+f).find(t);r=r.length>0?r:$("#"+f).find(".sapMListNoDataText");if(r.css("font-family")!=undefined){s=r.css("font-family").split(",")[0];}else{s="Arial";}if(s==="'Times New Roman'"||s==="'Trebuchet MS'"){s=r.css("font-family").split("'")[1];}}else{s=$("#"+f+" .sapMTitle").css("font-family").split(",")[0];if(s==="'Times New Roman'"||s==="'Trebuchet MS'"){s=$("#"+f+" .sapMTitle").css("font-family").split("'")[1];}}return{renderParams:{selectedKey:s}};};this._getFontSizeState=function(u){var r;var s;if(u.location==="body"){var v=u.zenControlType;var t=q(v,u);s=$("#"+f).find(t);if(s.css("font-size")===undefined){r=12;}else{s=s.length>0?s:$("#"+f).find(".sapMListNoDataText");r=Math.round(parseFloat(s.css("font-size")).toFixed(2));}}else{r=Math.round(parseFloat($("#"+f+" .sapMTitle").css("font-size")).toFixed(2));}return{renderParams:{selectedKey:r.toString()}};};this._createStyleInfoObj=function(y,x,s,r,w,v){var u={};var t={};t.id=y.zenPureId;t.icType=y.zenControlType;t.styleType=w;t.cssSelectors=s;t.cssTag=r;t.cssValue=x;t.styleType=w;t.location=y.location;u.style=t;u.bUndoable=true;sap.ui.getCore().getEventBus().publish("inputControlCacheStyleEvent",u);};this._textTypeAction=function(r,s){n._createStyleInfoObj(r,s,k[r.zenControlType][r.location].textType.cssSelectors,"font-family","textType","textTypeAction");};this._textSizeAction=function(s,r){n._createStyleInfoObj(s,parseInt(r,10)+"px",k[s.zenControlType][s.location].textSize.cssSelectors,"font-size","textSize","textSizeAction");};this._textBoldAction=function(t,r){var s;if(n._getToggleState(this.renderParams,r)){s="bold";}else{s="normal";}n._createStyleInfoObj(t,s,k[t.zenControlType][t.location].textBold.cssSelectors,"font-weight","textBold","textBoldAction");};this._textItalicAction=function(t,r){var s;if(n._getToggleState(this.renderParams,r)){s="italic";}else{s="normal";}n._createStyleInfoObj(t,s,k[t.zenControlType][t.location].textItalic.cssSelectors,"font-style","textItalic","textItalicAction");};this._textUnderlineAction=function(u,w){var s;var r;if(u.location==="body"){var t=q(u.zenControlType,u);r=$("#"+f).find(t).css("text-decoration");}else{r=$("#"+f+" .sapMTitle").css("text-decoration");}var v="";if(r.indexOf("line-through")!==-1){if(r.indexOf("underline")===-1){v="underline ";}s=v+"line-through";}else{if(r.indexOf("underline")===-1){s=v+"underline";}else{s=v+"none";}}n._createStyleInfoObj(u,s,k[u.zenControlType][u.location].textUnderline.cssSelectors,"text-decoration","textUnderline","textUnderlineAction");};this._textStrikeThroughAction=function(u,r){var t;var s=$("#"+f+" .sapMTitle").css("text-decoration");var v="";if(s.indexOf("underline")!==-1){if(s.indexOf("line-through")===-1){v="line-through ";}t=v+"underline";}else{if(s.indexOf("line-through")===-1){t="line-through";}else{t="none";}}n._createStyleInfoObj(u,t,k[u.zenControlType][u.location].textStrikethrough.cssSelectors,"text-decoration","textStrikethrough","textStrikeThroughAction");};this._textJustifyLeftAction=function(t,u){var s;var r=$("#"+f+" .sapMTitle").css("text-align");if(r!=="left"){s="left";n._textJustify(t,s);}};this._textJustifyCenterAction=function(u,r){var t;var s=$("#"+f+" .sapMTitle").css("text-align");if(s!=="center"){t="center";n._textJustify(u,t);}};this._textJustifyRightAction=function(u,r){var t;var s=$("#"+f+" .sapMTitle").css("text-align");if(s!=="right"){t="right";n._textJustify(u,t);}};this._textJustify=function(s,r){n._createStyleInfoObj(s,r,k[s.zenControlType][s.location].textJustify.cssSelectors,"text-align","textJustify","textJustifyRightAction");};this._textColorAction=function(s,r){n._createStyleInfoObj(s,r,k[s.zenControlType][s.location].textColor.cssSelectors,"color","textColor","textColorAction");};this._bgColorAction=function(s,r){n._createStyleInfoObj(s,r,k[s.zenControlType][s.location].bgColor.cssSelectors,"background-color","bgColor","bgColorAction");};sap.bi.framework.registerService({id:"zen.rt.components.inputControl.fontName",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"FontNameBuilder",startsSection:true,getState:n._getFontNameState,renderParams:{text:e.getText("TEXT_TYPE"),icon:{key:"font",family:"fpa"}},action:n._textTypeAction,subMenu:{menuBuilderType:"SubmenuBuilder",items:[{fnMenuItemFactory:function(v,u){var r=u._getFontNameState(v);var s=r.renderParams.selectedKey;var t=["Arial","Courier","Georgia","Times New Roman","Trebuchet MS","Verdana"];if(s==="'Times New Roman'"||s==="'Trebuchet MS'"){s=$("#"+f).css("font-family").split("'")[1];}return p(s,t,n._textTypeAction);}}]},category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textType.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.fontSize",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"FontSizeBuilder",startsSection:true,getState:n._getFontSizeState,renderParams:{text:e.getText("SIZE"),icon:{key:"text",family:"fpa"}},action:n._textSizeAction,subMenu:{menuBuilderType:"SubmenuBuilder",items:[{fnMenuItemFactory:function(u,t){var v=t._getFontSizeState(u);var s=v.renderParams.selectedKey;var r=["8","10","12","14","16","18","20","22","24","36","48"];return p(s,r,n._textSizeAction);}}]},category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textSize.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.bold",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"ToggleButtonBuilder",startsSection:true,getState:function(t){var r=false;if(t.location==="body"){var u=t.zenControlType;var s=q(u,t);r=$("#"+f).find(s).css("font-weight")==="bold";}else{r=$("#"+f+" .sapMTitle").css("font-weight")==="bold";}return n._getToggleRenderParams(r);},renderParams:{text:e.getText("TEXT_BOLD"),icon:{key:"bold",family:"fpa"},showOnlyIcon:true,ignoreAutoClose:true},action:n._textBoldAction,category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textBold.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.italic",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"ToggleButtonBuilder",getState:function(t){var r=false;if(t.location==="body"){var u=t.zenControlType;var s=q(u,t);r=$("#"+f).find(s).css("font-style")==="italic";}else{r=$("#"+f+" .sapMTitle").css("font-style")==="italic";}return n._getToggleRenderParams(r);},renderParams:{text:e.getText("TEXT_ITALIC"),icon:{key:"italic",family:"fpa"},showOnlyIcon:true,ignoreAutoClose:true},action:n._textItalicAction,category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textItalic.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.underline",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"ToggleButtonBuilder",getState:function(t){var r=false;if(t.location==="body"){var u=t.zenControlType;var s=q(u,t);r=$("#"+f).find(s).css("text-decoration").indexOf("underline")>=0;}else{r=$("#"+f+" .sapMTitle").css("text-decoration").indexOf("underline")>=0;}return n._getToggleRenderParams(r);},renderParams:{text:e.getText("TEXT_UNDERLINE"),icon:{key:"underline",family:"fpa"},showOnlyIcon:true,ignoreAutoClose:true},action:n._textUnderlineAction,category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textUnderline.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.strikethrough",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"ToggleButtonBuilder",getState:function(){var r=$("#"+f+" .sapMTitle").css("text-decoration").indexOf("line-through")>=0;return n._getToggleRenderParams(r);},renderParams:{text:e.getText("TEXT_STRIKETRHOUGH"),icon:{key:"strike",family:"fpa"},showOnlyIcon:true,ignoreAutoClose:true},action:n._textStrikeThroughAction,category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textStrikethrough.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.justify",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"ExpandedMenuItemBuilder",renderParams:{text:e.getText("TEXT_JUSTIFY"),icon:{key:"left-aligned",family:"fpa"}},subMenu:{menuBuilderType:"SubmenuBuilder",items:[{fnMenuItemFactory:function(t,s){var r=[{action:n._textJustifyLeftAction,getState:function(){var u=$("#"+f+" .sapMTitle").css("text-align")==="left";return n._getToggleRenderParams(u);},key:"TEXT_JUSTIFY_LEFT",icon:{key:"left-aligned",family:"fpa"}},{action:n._textJustifyCenterAction,getState:function(){var u=$("#"+f+" .sapMTitle").css("text-align")==="center";return n._getToggleRenderParams(u);},key:"TEXT_JUSTIFY_CENTER",icon:{key:"centered",family:"fpa"}},{action:n._textJustifyRightAction,getState:function(){var u=$("#"+f+" .sapMTitle").css("text-align")==="right";return n._getToggleRenderParams(u);},key:"TEXT_JUSTIFY_RIGHT",icon:{key:"right-aligned",family:"fpa"}}];return o(r);}}]},category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textJustify.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.changeColor",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",startsSection:true,getState:function(){return{};},renderParams:{icon:sap.ui.core.IconPool.getIconURI("font-color","fpa"),text:e.getText("FONT_COLOR"),labelWidth:"40px"},subMenu:{menuBuilderType:"CustomMenuBuilder",items:[{builderId:"ColorBuilder",category:["sap.lumira.menucategory.component.properties"],action:n._textColorAction,getState:function(t){if(t.location==="body"){var r;var u=t.zenControlType;var s=q(u,t);r=$("#"+f).find(s).css("color");}else{r=$("#"+f+" .sapMTitle").css("color");}return{renderParams:{color:r,useRGB:false}};},renderParams:{color:"#000000",useRGB:false}}]},category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].textColor.visibility){return true;}return false;}}});sap.bi.framework.registerService({id:"zen.rt.components.inputControl.changeBGColor",provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",startsSection:true,getState:function(){return{};},renderParams:{icon:{key:"fill-background-color",family:"fpa"},text:e.getText("BACKGROUND_COLOR"),labelWidth:"40px"},subMenu:{menuBuilderType:"CustomMenuBuilder",items:[{builderId:"ColorBuilder",category:["sap.lumira.menucategory.component.properties"],action:n._bgColorAction,getState:function(s){var r;if(s.location==="body"){r=$("#"+f).css("background-color");}else{r=$("#"+f).css("background-color");}return{renderParams:{color:r,useRGB:true}};},renderParams:{color:"#000000",useRGB:true,hideAlpha:false}}]},category:["sap.lumira.menucategory.component.properties"],isVisible:function(r){if(r.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"&&d&&k[r.zenControlType][r.location].bgColor.visibility){return true;}return false;}}});var q=function(y,v){var u=b.dispatcher.getControlForId(v.sControlId);var s=u.getModel().getProperty("/dialog/hierarchical");switch(y){case"radio_filter":case"list_filter":if(s){return".sapMText";}else{return".sapMSLITitleOnly";}break;case"dropdown_filter":case"complex_filter":return".sapMLabel";break;case"range_filter":var w=u.getModel().getProperty("/characteristics/")[0].characteristic.name;var t=u.getModel().getProperty("/filters/");if(t.hasOwnProperty(w)){var x=t[w];}if(x.ranges[0]){var r=x.ranges[0].operation;}if(r==="BT"){return".sapMSliderRangeLabel";}else{return".sapMSliderLabel";}break;case"date_filter":return".sapMInputBaseInner";break;case"text_filter":return".sapMInputBaseInner";break;case"ssd_filter":return".sapMSltLabel";break;default:return".sapMLabel";break;}};var p=function(v,s,r){var t={builderId:"SubmenuItemBuilder",renderParams:{},action:r},u=[];_.each(s,function(w){var x=$.extend(true,{},t);x.renderParams={text:w,highlighted:v.toLowerCase()===w.toLowerCase()};this.push(x);},u);return u;};var o=function(t){var r={builderId:"SubmenuItemBuilder",renderParams:{},},s=[];_.each(t,function(u){var v=$.extend(true,{},r);v.action=u.action;v.getState=u.getState;v.renderParams={text:e.getText(u.key),icon:u.icon};this.push(v);},s);return s;};sap.bi.framework.registerService({provide:"zen.rt.components.dynamicmenu.menuItem",instance:{builderId:"IconBuilder",getState:function(){return{};},renderParams:{icon:sap.ui.core.IconPool.getIconURI("customise","fpa"),text:e.getText("CONFIGURE_SLIDER"),tooltip:e.getText("CONFIGURE_SLIDER")},action:function(){var r=n.getICCustomProperties(b.dispatcher.getControlForId(arguments[0].sControlId).sId,"slider");var s=b.dispatcher.getControlForId(arguments[0].sControlId);h.initiate(n,s,r);},category:["ICContextMenuActions","sap.lumira.menucategory.component.actions"],isVisible:function(u){var s=sap.zen.designmode&&sap.zen.designmode.isDesignMode()&&!sap.zen.designmode.isRuntimeAuthoringMode();if(!s&&u.sSelectedComponentType=="DIMENSIONFILTER_COMPONENT"){var t=b.dispatcher.getControlForId(arguments[0].sControlId);var r=t.getModel().oData.property.visualizationmode;if(r=="RANGE"){d=false;return true;}else{return false;}}return false;}}});};this.getType=function(){return["inputControl"];};this.showHideHeader=function(o,n){if(!o){n.setVisible(false);}else{n.setVisible(true);}};var m=function(p){var r=["Contains","NotContains","StartsWith","NotStartsWith","EndsWith","NotEndsWith"];var o=false;var q=false;for(var n=0;n<p.length;n++){if(p[n]=="Contains"||p[n]=="StartsWith"||p[n]=="EndsWith"){o=true;}else{if(p[n]=="NotContains"||p[n]=="NotStartsWith"||p[n]=="NotEndsWith"){q=true;}}if(o&&q){return false;}if(r.indexOf(p[n])==-1){return false;}}return true;};this.isControlNeedChange=function(E){try{var D=E.zenControlType;var p=E.getModel();var y=p.oData.characteristics[0].characteristic.name;var s=E.getModel().getProperty("/dialog/hierarchical");var x=p.getProperty("/filters/");if(x.hasOwnProperty(y)){var B=x[y];var q=B.ranges;var r=B.ranges;}var o=[];var z="ALL";var C=p.oData.characteristics[0].characteristic.type;q.forEach(function(G){var I=G.operation;var F=G.exclude;var H="";if(F){H=e.getText("NOT");}if(o.indexOf(H+I)==-1){o.push(H+I);}});if(D=="complex_filter"){if(o.length>1){return false;}}else{if((!window.LUMIRA_ENVIRONMENT)&&s===true&&(D!="complex_filter"&&D!="list_filter")){sap.zen.MessageViewHandler.createMessage(sap.zen.MessageViewHandler.error,e.getText("UNSUPPORTED_IC_TYPE"),e.getText("UNSUPPORTED_IC_TYPE"),true);return false;}else{if(o.length==1){var n=o[0];var t=false;switch(D){case"list_filter":case"dropdown_filter":if((o[0]!=="EQ"&&o[0]!=="NotEQ")){t=true;}break;case"date_filter":if((o[0]=="EQ"||o[0]=="NotEQ")){if(r.length>1){t=true;}}break;case"range_filter":if((o[0]=="EQ"||o[0]=="NotEQ")){if(r.length>1){t=true;}}break;case"radio_filter":if((r.length>1||o[0]==="BT"||o[0]==="NotBT")){t=true;}break;case"ssd_filter":if(q.length>1||o[0]==="BT"||o[0]==="NotBT"){t=true;}break;default:t=false;}var w="";if(o.length>1){w="COMPLEX";}else{w=o[0];}if(w==undefined){w="EQUAL";}if(t){var z=l.getVizMode(o,r,z,C);var A=new Object();A.isChangeControl=true;A.control_id=E.zenPureId;A.visualizationmode=z;A.enableCancelButton=false;A.dimension_name=y;A.count=q.length;A.operatorArray=w;if(C==="DOUBLE"||C==="LONG"||C==="INTEGER"){A.datatype="NUMBER";}else{A.datatype=C;}if(window.LUMIRA_ENVIRONMENT){i.initiate(null,E.zenPureId,"","","",A);}else{sap.zen.MessageViewHandler.createMessage(sap.zen.MessageViewHandler.error,e.getText("UNSUPPORTED_IC_TYPE"),e.getText("UNSUPPORTED_IC_TYPE"),true);}return false;}}}}if(D=="complex_filter"){return;if(o.length==1){z=l.getVizMode(o,r,z,C);var A=new Object();A.isChangeControl=true;A.control_id=E.zenPureId;A.visualizationmode=z;A.enableCancelButton=false;A.dimension_name=y;if(o.length>1){A.operatorArray="COMPLEX";}else{A.operatorArray=o[0];}if(A.operatorArray==undefined){A.operatorArray="EQUAL";}i.initiate(null,E.zenPureId,"","","",A);return false;}else{return true;}}else{if(o.length>1){var v=m(o);if(!v){var A=new Object();A.isChangeControl=true;A.control_id=E.zenPureId;A.visualizationmode="COMPLEX";A.dimension_name=y;A.enableCancelButton=false;A.operatorArray="COMPLEX";i.initiate(null,E.zenPureId,"","","",A);return false;}}else{return true;}}}catch(u){return true;}};this.getVizMode=function(p,q,n,o){if(_.isEmpty(p)||p[0]=="EQ"||p[0]=="NotEQ"){if(q.length>1&&o!=="DATE"){n="LIST";}else{switch(o){case"STRING":case"BOOLEAN":case"TIME":if(_.isEmpty(p)||p[0]=="EQ"||p[0]=="NotEQ"){n="LIST";}else{n="TEXT";}break;case"DATE":case"DATE_TIME":if(_.isEmpty(p)){n="LIST";}else{n="DATELIST";}break;case"DOUBLE":case"LONG":case"INTEGER":if(_.isEmpty(p)){n="LIST";}else{n="RANGELIST";}break;}}}else{switch(o){case"STRING":case"BOOLEAN":case"TIME":n="TEXT";break;case"DATE":case"DATE_TIME":n="DATE";break;case"DOUBLE":case"LONG":case"INTEGER":n="RANGE";break;}}return n;};this.getOperationName=function(n){var o="Equals to";switch(n){case"BT":o="Between";break;case"EQ":o="Equals to";break;case"Contains":o="Contains";break;case"GT":o="Greater Than";break;case"GE":o="Greater Than Equal";break;case"LT":o="Less Than";break;case"LE":o="Less Than Equal";break;case undefined:o="";break;default:o=n;}return o;};this.getICCustomProperties=function(o,p){if(a){if(undefined!==a[o]){var n=a[o][p];return n;}}return"";};this.setICCustomProperties=function(o,p,n){if(a){if(undefined===a[o]){a[o]={};}a[o][p]=n;}};this.removeICCustomProperties=function(n){if(a){if(a[n]){a[n]={};}}};this.setRangeSliderObj=function(n){c=n;};this.ctor=j;};return new j();});define("zen.rt.components.filterpanel/resources/js/MessageBundle",["require"],function(b){var a=function(){this.oResourceModel=new sap.ui.model.resource.ResourceModel({bundleUrl:"zen.res/zen.rt.components.filterpanel/resources/i18n/localization.properties"});this.getText=function(d){if(this.oResourceModel){var c=this.oResourceModel.getResourceBundle().getText(d);if(c!=null){return c;}}return d;};};return new a();});define("zen.rt.components.filterpanel/resources/js/InputControlComboBox",["zen.rt.components.filterpanel/resources/js/InputControlComboBoxRenderer"],function(a){var b=sap.m.MultiComboBox.extend("sap.m.InputControlComboBox",{renderer:a});b.prototype.setCountLabelValue=function(c){this._oCountLabel.setText(c);};b.prototype.setCountTextAlign=function(c){this._oCountLabel.setTextAlign(c);};b.prototype.init=function(){sap.m.MultiComboBox.prototype.init.apply(this,arguments);this._oTokenizer.setVisible(false);this._oCountLabel=new sap.m.Label();};return b;},true);define("zen.rt.components.filterpanel/resources/js/InputControlDatePicker",["zen.rt.components.filterpanel/resources/js/InputControlDatePickerRenderer","css!./InputControlDatePicker.css"],function(c){var a=sap.m.DatePicker.extend("sap.m.InputControlDatePicker",{metadata:{events:{nullDate:{},emptyDate:{}}},renderer:c});a.prototype.init=function(){sap.m.DatePicker.prototype.init.apply(this,arguments);};a.prototype._getSelectedDate=function(){var f=this._oCalendar.getSelectedDates();var e;if(f.length>0){e=f[0].getStartDate();}if(this._oNullButtonSelected==true&&this.getValue()=="<<null>>"){e="<<null>>";}return e;};a.prototype._selectDate=function(e){var f=this.getDateValue();var g=this._getSelectedDate();var h="";if(!jQuery.sap.equal(g,f)){if(g!="<<null>>"){this.setDateValue(new Date(g.getTime()));}h=this.getValue();this.fireChangeEvent(h,{valid:true});if(this.getDomRef()){this._curpos=this._$input.val().length;this._$input.cursorPos(this._curpos);}}else{if(!this._bValid){h=this._formatValue(g);if(h!=this._$input.val()){this._bValid=true;if(this.getDomRef()){this._$input.val(h);this._lastValue=h;}this.setProperty("value",h,true);this.fireChangeEvent(h,{valid:true});}}}this._oPopup.close();this._bFocusNoPopup=true;this.focus();};a.prototype._fillDateRange=function(){var f=this.getDateValue();if(f){if(this.getValue()!="<<null>>"){this._oCalendar.focusDate(new Date(f.getTime()));if(!this._oDateRange.getStartDate()||this._oDateRange.getStartDate().getTime()!=f.getTime()){this._oDateRange.setStartDate(new Date(f.getTime()));}}else{this._oCalendar.removeAllSelectedDates();}}else{var g=new Date();var e=this._oMaxDate.getTime()+86400000;if(g.getTime()<this._oMinDate.getTime()||g.getTime()>e){g=this._oMinDate;}this._oCalendar.focusDate(g);if(this._oDateRange.getStartDate()){this._oDateRange.setStartDate(undefined);}}};a.prototype._createPopupContent=function(){if(!this._oCalendar){sap.ui.getCore().loadLibrary("sap.ui.unified");jQuery.sap.require("sap.ui.unified.library");this._oCalendar=new sap.ui.unified.Calendar({intervalSelection:this._bIntervalSelection,minDate:this.getMinDate(),maxDate:this.getMaxDate(),legend:this.getLegend()});this._oDateRange=new sap.ui.unified.DateRange();if(this.getValue()!="<<null>>"){this._oCalendar.addSelectedDate(this._oDateRange);}else{this._oCalendar.removeAllSelectedDates();}if(this.$().closest(".sapUiSizeCompact").length>0){this._oCalendar.addStyleClass("sapUiSizeCompact");}if(this._bSecondaryCalendarTypeSet){this._oCalendar.setSecondaryCalendarType(this.getSecondaryCalendarType());}this._oNullButton=new sap.m.Button({text:"Null",width:"100%",type:sap.m.ButtonType.Transparent}).attachPress(function(g){this._oNullButtonSelected=true;this.setValue("<<null>>");this._selectDate();this._oNullButtonSelected=false;}.bind(this));var f=new sap.m.Toolbar({width:"100%",design:sap.m.ToolbarDesign.Transparent,content:[this._oNullButton]}).addStyleClass("sapLudsiICDatePickerToolbar");if(this._bOnlyCalendar){this._oCalendar.attachSelect(this._selectDate,this);this._oCalendar.attachCancel(d,this);this._oCalendar.attachEvent("_renderMonth",b,this);this._oCalendar.setPopupMode(true);this._oCalendar.setParent(this,undefined,true);var e=new sap.m.VBox();e.addItem(this._oCalendar);e.addStyleClass("sapLudsiDatepickerBackground");e.addItem(f);this._oPopup.setContent(e);}else{this._oPopup.addContent(f);}}if(this.getValue()=="<<null>>"){this._oNullButton.setType(sap.m.ButtonType.Emphasized);}};function d(e){if(this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();this._bFocusNoPopup=true;this.focus();}}function b(e){var f=e.getParameter("days");if(f>this._renderedDays){this._renderedDays=f;this._oPopup._applyPosition(this._oPopup._oLastPosition);}}return a;},true);define("zen.rt.components.filterpanel/resources/js/InputControlDateTimePicker",["zen.rt.components.filterpanel/resources/js/InputControlDateTimePickerRenderer","zen.rt.components.filterpanel/resources/js/InputControlDatePicker","css!./InputControlDatePicker.css"],function(h,m){var f=sap.m.DateTimePicker.extend("sap.m.InputControlDateTimePicker",{metadata:{events:{nullDate:{},emptyDate:{}}},renderer:h});var j=sap.ui.core.Control.extend("DateTimePickerPopup",{metadata:{aggregations:{_switcher:{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},calendar:{type:"sap.ui.core.Control",multiple:false},timeSliders:{type:"sap.ui.core.Control",multiple:false}}},renderer:function(p,q){p.write("<div");p.writeControlData(q);p.addClass("sapMDateTimePopupCont");p.addClass("sapMTimePickerDropDown");p.writeClasses();p.write(">");var r=q.getAggregation("_switcher");if(r&&r.getVisible()){p.write("<div");p.addClass("sapMTimePickerSwitch");p.writeClasses();p.write(">");p.renderControl(r);p.write("</div>");}var n=q.getCalendar();if(n){p.renderControl(n);}p.write("<div");p.addClass("sapMTimePickerSep");p.writeClasses();p.write(">");p.write("</div>");var o=q.getTimeSliders();if(o){p.renderControl(o);}p.write("</div>");},init:function(){},onBeforeRendering:function(){var p=this.getAggregation("_switcher");if(sap.ui.Device.system.phone||jQuery("html").hasClass("sapUiMedia-Std-Phone")){if(!p){var n=sap.ui.getCore().getLibraryResourceBundle("sap.m");var o=n.getText("DATETIMEPICKER_DATE");var q=n.getText("DATETIMEPICKER_TIME");p=new sap.m.SegmentedButton(this.getId()+"-Switch",{selectedKey:"Cal",items:[new sap.m.SegmentedButtonItem(this.getId()+"-Switch-Cal",{key:"Cal",text:o}),new sap.m.SegmentedButtonItem(this.getId()+"-Switch-Sli",{key:"Sli",text:q})]});p.attachSelect(this._handleSelect,this);this.setAggregation("_switcher",p,true);}else{p.setVisible(true);p.setSelectedKey("Cal");}}else{if(p){p.setVisible(false);}}},onAfterRendering:function(){if(sap.ui.Device.system.phone||jQuery("html").hasClass("sapUiMedia-Std-Phone")){var o=this.getAggregation("_switcher");var n=o.getSelectedKey();this._switchVisibility(n);if(sap.ui.Device.system.phone){this._adjustTimePickerHeightOnPhone();}}},_adjustTimePickerHeightOnPhone:function(){var o=this.getAggregation("_switcher"),n=o.$().children(0).css("height").replace("px","");this.$().css("height",(document.documentElement.clientHeight-parseInt(n,10))+"px");},_handleSelect:function(n){this._switchVisibility(n.getParameter("key"));},_switchVisibility:function(p){var n=this.getCalendar();var o=this.getTimeSliders();if(!n||!o){return;}if(p=="Cal"){n.$().css("display","");o.$().css("display","none");n.focus();}else{n.$().css("display","none");o.$().css("display","");o.updateSlidersValues();o._onOrientationChanged();o._initFocus();}},switchToTime:function(){var n=this.getAggregation("_switcher");if(n&&n.getVisible()){n.setSelectedKey("Sli");this._switchVisibility("Sli");}},getSpecialDates:function(){return this._oDateTimePicker.getSpecialDates();}});f.prototype.getAccessibilityInfo=function(){var n=m.prototype.getAccessibilityInfo.apply(this,arguments);n.type=sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ACC_CTR_TYPE_DATETIMEINPUT");return n;};f.prototype._getSelectedDate=function(){var o=m.prototype._getSelectedDate.apply(this,arguments);if(o&&o!="<<null>>"){var p=this._oSliders.getTimeValues();var n=this._oSliders.getFormat();if(n.search("h")>=0||n.search("H")>=0){o.setHours(p.getHours());}if(n.search("m")>=0){o.setMinutes(p.getMinutes());}if(n.search("s")>=0){o.setSeconds(p.getSeconds());}if(o.getTime()<this._oMinDate.getTime()){o=new Date(this._oMinDate.getTime());}else{if(o.getTime()>this._oMaxDate.getTime()){o=new Date(this._oMaxDate.getTime());}}}return o;};f.prototype._createPopupContent=function(){var n=!this._oCalendar;m.prototype._createPopupContent.apply(this,arguments);if(n){this._oPopupContent.setCalendar(this._oCalendar);}if(!this._oSliders){jQuery.sap.require("sap.m.TimePickerSliders");this._oSliders=new sap.m.TimePickerSliders({format:"yyyy-MM-dd HH:mm:ss.SSS"});this._oPopupContent.setTimeSliders(this._oSliders);}};f.prototype._checkStyle=function(r){if(m.prototype._checkStyle.apply(this,arguments)){return true;}else{if(r.indexOf("/")>0){var q=["short","medium","long","full"];var o=false;for(var p=0;p<q.length;p++){var t=q[p];for(var n=0;n<q.length;n++){var s=q[n];if(r==t+"/"+s){o=true;break;}}if(o){break;}}return o;}}return false;};f.prototype._parseValue=function(q,o){var p=m.prototype._parseValue.apply(this,arguments);if(o&&!p){p=this._oDisplayFormatDate.parse(q);if(p){var n=this.getDateValue();if(!n){n=new Date();}p.setHours(n.getHours());p.setMinutes(n.getMinutes());p.setSeconds(n.getSeconds());p.setMilliseconds(n.getMilliseconds());}}return p;};f.prototype.setDisplayFormat=function(n){m.prototype.setDisplayFormat.apply(this,arguments);if(this._oSliders){this._oSliders.setFormat(a.call(this));}return this;};f.prototype.init=function(){m.prototype.init.apply(this,arguments);this._bOnlyCalendar=false;};f.prototype.exit=function(){m.prototype.exit.apply(this,arguments);if(this._oSliders){this._oSliders.destroy();delete this._oSliders;}this._oPopupContent=undefined;};function a(){var r=this.getDisplayFormat();var p;var s=this.getBinding("value");if(s&&s.oType&&(s.oType instanceof Date1)){r=s.oType.getOutputPattern();}else{r=this.getDisplayFormat();}if(!r){r="medium";}var n=r.indexOf("/");if(n>0&&this._checkStyle(r)){r=r.substr(n+1);}if(r=="short"||r=="medium"||r=="long"||r=="full"){var o=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var q=sap.ui.core.LocaleData.getInstance(o);p=q.getTimePattern(r);}else{p=r;}return p;}function d(n){this._oPopupContent.switchToTime();}f.prototype._selectDate=function(n){var o=this.getDateValue();var p=this._getSelectedDate();var q="";if(!jQuery.sap.equal(p,o)){if(p!="<<null>>"){this.setDateValue(new Date(p.getTime()));}q=this.getValue();this.fireChangeEvent(q,{valid:true});if(this.getDomRef()){this._curpos=this._$input.val().length;this._$input.cursorPos(this._curpos);}}else{if(!this._bValid){q=this._formatValue(p);if(q!=this._$input.val()){this._bValid=true;if(this.getDomRef()){this._$input.val(q);this._lastValue=q;}this.setProperty("value",q,true);this.fireChangeEvent(q,{valid:true});}}}this._oPopup.close();this._bFocusNoPopup=true;this.focus();};function e(n){this._selectDate();}function c(n){this.onsaphide(n);}function k(n){}function l(n){this._oCalendar.focus();this._oSliders._onOrientationChanged();}function i(n){}function d(n){}f.prototype._selectDate=function(n){var o=this.getDateValue();var p=this._getSelectedDate();var q="";if(!jQuery.sap.equal(p,o)){if(p!="<<null>>"){this.setDateValue(new Date(p.getTime()));}q=this.getValue();this.fireChangeEvent(q,{valid:true});if(this.getDomRef()){this._curpos=this._$input.val().length;this._$input.cursorPos(this._curpos);}}else{if(!this._bValid){q=this._formatValue(p);if(q!=this._$input.val()){this._bValid=true;if(this.getDomRef()){this._$input.val(q);this._lastValue=q;}this.setProperty("value",q,true);this.fireChangeEvent(q,{valid:true});}}}this._oPopup.close();this._bFocusNoPopup=true;this.focus();};f.prototype._fillDateRange=function(){var n=this.getDateValue();if(this.getValue()!="<<null>>"){if(n){n=new Date(n.getTime());}else{n=new Date();}this._oCalendar.focusDate(n);if(!this._oDateRange.getStartDate()||this._oDateRange.getStartDate().getTime()!=n.getTime()){this._oDateRange.setStartDate(n);}this._oSliders.setTimeValues(n);}};f.prototype._openPopup=function(){if(!this._oPopup){return;}var o=this._oPopup.getAggregation("_popup");o.oPopup.setAutoCloseAreas([this.getDomRef()]);this._oPopup.openBy(this);var n=this._oPopupContent&&this._oPopupContent.getTimeSliders();if(n){jQuery.sap.delayedCall(0,n,n.updateSlidersValues);}};function g(n){if(this._oPopup&&this._oPopup.isOpen()){this._oPopup.close();this._bFocusNoPopup=true;this.focus();}}function b(n){var o=n.getParameter("days");if(o>this._renderedDays){this._renderedDays=o;this._oPopup._applyPosition(this._oPopup._oLastPosition);}}f.prototype._createPopup=function(){if(!this._oPopup){var q=sap.ui.getCore().getLibraryResourceBundle("sap.m");var p=q.getText("TIMEPICKER_SET");var o=q.getText("TIMEPICKER_CANCEL");this._oPopupContent=new j(this.getId()+"-PC");this._oPopupContent._oDateTimePicker=this;this._oPopup=new sap.m.ResponsivePopover(this.getId()+"-RP",{showCloseButton:false,showHeader:false,placement:sap.m.PlacementType.VerticalPreferedBottom,height:"310px",beginButton:new sap.m.Button(this.getId()+"-OK",{text:p,press:jQuery.proxy(e,this)}),endButton:new sap.m.Button(this.getId()+"-Cancel",{text:o,press:jQuery.proxy(c,this)}),content:[this._oPopupContent]});this._oPopup.addStyleClass("sapMDateTimePopup");var n=this._oPopup.getAggregation("_popup");if(n.setShowArrow){n.setShowArrow(false);}this._oPopup.attachBeforeOpen(k,this);this._oPopup.attachAfterOpen(l,this);this._oPopup.attachAfterClose(i,this);if(sap.ui.Device.system.desktop){this._oPopoverKeydownEventDelegate={onkeydown:function(s){var r=jQuery.sap.KeyCodes,t=s.which||s.keyCode,u=s.altKey;if((u&&(t===r.ARROW_UP||t===r.ARROW_DOWN))||t===r.F4){e.call(this,s);this.focus();s.preventDefault();}}};this._oPopup.addEventDelegate(this._oPopoverKeydownEventDelegate,this);}this.setAggregation("_popup",this._oPopup,true);}};return f;},true);define("zen.rt.components.filterpanel/resources/js/sliderCustomDialog",["zen.rt.components.filterpanel/resources/js/inputcontrol_handler","zen.rt.components.filterpanel/resources/js/MessageBundle","css!../css/inputcontrols.css"],function(a,b){var c=sap.m.Dialog.extend("sap.lumira.sliderCustomDialog",{metadata:{properties:{},aggregations:{},events:{}},renderer:{}});c.prototype.initiate=function(k,y,s){var t=s.getMin();var w=s.getMax();var i=s.getStep();var n=null;var r=null;var v="160px";var d="80px";try{n=s.getRange();}catch(g){r=s.getValue();}this.removeAllContent();this.removeAllButtons();var z=false;var h=false;var e=false;var q=new sap.m.Input({liveChange:function(D){var F=D.getParameter("newValue");var E=/^-{0,1}\d*\.{0,1}\d+$/;if(!E.test(F)){q.setValueState(sap.ui.core.ValueState.Error);}else{q.setValueState(sap.ui.core.ValueState.None);}if(e){e=false;}},width:v});var p=new sap.m.Input({liveChange:function(D){var F=D.getParameter("newValue");var E=/^-{0,1}\d*\.{0,1}\d+$/;if(!E.test(F)){p.setValueState(sap.ui.core.ValueState.Error);}else{p.setValueState(sap.ui.core.ValueState.None);}if(h){h=false;}},width:v});var u=new sap.m.Input({liveChange:function(D){var F=D.getParameter("newValue");var E=/^-{0,1}\d*\.{0,1}\d+$/;if(!E.test(F)){u.setValueState(sap.ui.core.ValueState.Error);}else{u.setValueState(sap.ui.core.ValueState.None);}if(z){z=false;B.setText(b.getText("OK"));}},width:v});q.setValue(t);p.setValue(w);u.setValue(i);var m=new sap.m.Label({text:b.getText("MIN_VALUE")+" :",textAlign:sap.ui.core.TextAlign.Right,width:d});var C=new sap.m.Label({text:b.getText("MAX_VALUE")+" :",textAlign:sap.ui.core.TextAlign.Right,width:d});var l=new sap.m.Label({text:b.getText("SLIDER_INTERVAL")+" :",textAlign:sap.ui.core.TextAlign.Right,width:d});var A=new sap.m.HBox();A.addItem(m);A.addItem(q);var o=new sap.m.HBox();o.addItem(C);o.addItem(p);var x=new sap.m.HBox();x.addItem(l);x.addItem(u);var f=new sap.m.VBox();f.addItem(A);f.addItem(o);f.addItem(x);var B=new sap.m.Button({text:b.getText("OK"),press:function(){try{var N=u.getValue();if(N==null||N==""){N=i;}var L=p.getValue();if(L==null||L==""){L=w;}var O=q.getValue();if(O==null||O==""){O=t;}var D=/^-{0,1}\d*\.{0,1}\d+$/;var Q=D.test(N);var E=D.test(L);var J=D.test(O);var K,P;try{var I=s.getRange();K=I[0];P=I[1];}catch(F){r=s.getValue();K=r;P=r;}if(Q&&E&&J){var H=parseFloat(N);var G=parseFloat(L);var M=parseFloat(O);if(M>K){q.setValueState(sap.ui.core.ValueState.Error);q.setValueStateText(b.getText("MIN_GT_VALUE"));e=true;}if(G<P){p.setValueState(sap.ui.core.ValueState.Error);p.setValueStateText(b.getText("MAX_LT_VALUE"));h=true;}if((((G-M)/H<200)||z)&&!e&&!h){this.setCustomization(k,y,M,G,H);this.close();}else{if(!e&&!h){u.setValueState(sap.ui.core.ValueState.Error);u.setValueStateText(b.getText("SLIDER_200_WARNING"));B.setText(b.getText("IGNORE_AND_CONTINUE"));z=true;}}}else{if(!Q){u.setValueState(sap.ui.core.ValueState.Error);}if(!E){p.setValueState(sap.ui.core.ValueState.Error);}if(!J){q.setValueState(sap.ui.core.ValueState.Error);}}}catch(F){}}.bind(this)});var j=new sap.m.Button({text:b.getText("CANCEL"),press:function(){this.close();}.bind(this)});this.addContent(f);this.addButton(B);this.addButton(j);this.setTitle(k.oControl.getModel().oData.characteristics[0].characteristic.text);if(!this.isOpen()){this.open();}};c.prototype.setCustomization=function(j,e,i,n,m){var l=j.getICCustomProperties(e.sId,"slider");var f=n-i;if(f>=m||i==Infinity){var k=m;l.setStep(k);l.setMax(n);l.setMin(i);try{if(l.mProperties.hasOwnProperty("range")){var d=j.getICCustomProperties(e.zenPureId,"rangeMin");var h=j.getICCustomProperties(e.zenPureId,"rangeMax");if(h-d>0){l.setProperty("range",[d,h]);j.callSubmitFilter(e,d,h);}}else{var d=j.getICCustomProperties(e.zenPureId,"rangeMin");l.setProperty("value",parseInt(d,10));j.callSubmitFilter(e,d,null);}}catch(g){}j.setICCustomProperties(e.zenPureId,"step",k);j.setICCustomProperties(e.zenPureId,"max",n);j.setICCustomProperties(e.zenPureId,"min",i);}}.bind(this);return new c;});define("zen.rt.components.filterpanel/resources/js/inputControlStyleModel",[],function(){var d=16;var r=8;var s=11;var g=4;var h=8;var e=function(G,D,E){var F=$("<span>"+(G||"M")+"</span>").css({"font-size":D,"font-type":E,"float":"left","white-space":"nowrap",visibility:"hidden"}).appendTo($("body")),C=F.height();F.remove();return C;};var j=function(C){return((C+r)/d).toFixed(1)+"rem";};var c=function(C){return((C+s)/d).toFixed(1)+"rem";};var k=function(C){return((parseInt(j(C),10)*d)/2-g)/d+"rem";};var a=function(C){return((parseInt(j(C),10)*d)/2-h)/d+"rem";};var m=function(C){return(C/d).toFixed(1)+"rem";};var i=function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(D>14){E+="#"+F+" .sapMComboBoxBase { height:"+j(D)+"!important;}";}return E;};var v=function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(parseInt(C.cssValue,10)>14){E+="#"+F+" .sapMPanel > .sapMIBar { height:"+c(D)+"!important;}";E+="#"+F+" .sapMIBar:after { top:"+c(D)+"!important;}";}return E;};var w=function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(D>14){E+="#"+F+" .sapMPanelContent > .sapMSlt { height:"+j(D)+"!important;}";}return E;};var t=function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(parseInt(C.cssValue,10)>14){E+="#"+F+" .sapMPanel > .sapMIBar { height:"+c(D)+"!important;}";E+="#"+F+" .sapMIBar:after { top:"+c(D)+"!important;}";}return E;};var x=function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(D>14){E+="#"+F+" .sapMSLI,#"+F+" .sapMPanelContent .sapLudsiListInputControlSelectAll,#"+F+" .sapMPanelContent .sapMIBar,#"+F+" .sapMSFI,#"+F+" .sapMSFR,#"+F+" .sapMSFB { height:"+j(D)+"!important;}";E+="#"+F+" .sapMLabel,#"+F+" .sapMSFR:after,#"+F+" .sapMSFB:after { line-height:"+j(D)+"!important;}";E+="#"+F+" .sapLudsiListInputControlSelectAll > .sapMCbMark { top:"+k(D)+";}";}return E;};var l=function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(parseInt(C.cssValue,10)>14){E+="#"+F+" .sapMPanel > .sapMIBar { height:"+c(D)+"!important;}";E+="#"+F+" .sapMIBar:after { top:"+c(D)+"!important;}";}return E;};var B=function(){return{body:{textType:{visibility:true,cssSelectors:[".sapMTitle"]},textSize:{visibility:true,cssSelectors:[]},textBold:{visibility:true,cssSelectors:[]},textItalic:{visibility:true,cssSelectors:[]},textStrikethrough:{visibility:false,cssSelectors:[]},textJustify:{visibility:false,cssSelectors:[]},textUnderline:{visibility:true,cssSelectors:[]},textColor:{visibility:true,cssSelectors:[]},bgColor:{visibility:true,cssSelectors:[".sapMPanelContent"]},sliderLine:{visibility:false,cssSelectors:[]},pointerColor:{visibility:false,cssSelectors:[]}},header:{textType:{visibility:true,cssSelectors:[".sapMTitle"]},textSize:{visibility:true,cssSelectors:[".sapMTitle"],bRequiresAdditionalSettings:true,getAdditionlStyleSettings:function(C,F){var E="";var D=e("",C.cssValue,"Arial");if(parseInt(C.cssValue,10)>14){E+="#"+F+" .sapMIBar { height:"+c(D)+"!important;}";E+="#"+F+" .sapMIBar:after { top:"+c(D)+"!important;}";}return E;}},textBold:{visibility:true,cssSelectors:[".sapMTitle"]},textItalic:{visibility:true,cssSelectors:[".sapMTitle"]},textStrikethrough:{visibility:true,cssSelectors:[".sapMTitle"]},textJustify:{visibility:true,cssSelectors:[".sapMTitle"]},textUnderline:{visibility:true,cssSelectors:[".sapMTitle"]},textColor:{visibility:true,cssSelectors:[".sapMTitle"]},bgColor:{visibility:true,cssSelectors:[".sapMPanel > .sapMIBar"]},sliderLine:{visibility:false,cssSelectors:[]},pointerColor:{visibility:false,cssSelectors:[]}}};};var b=function(C,D,E){C.body.textType[D]=E;C.body.textSize[D]=E;C.body.textBold[D]=E;C.body.textItalic[D]=E;C.body.textUnderline[D]=E;C.body.textColor[D]=E;};var o=function(){var C=[".sapMLabel",".sapMSLITitleOnly",".sapMInputBaseInner"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapMMultiComboBoxBorder",".sapMComboBoxTextFieldArrow",".sapMInputBaseInner:hover"];D.body.textSize.bRequiresAdditionalSettings=true;D.header.textSize.getAdditionlStyleSettings=v;D.body.textSize.getAdditionlStyleSettings=i;return D;};var n=function(){var C=[".sapMInputBaseInner"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapMMultiInputBorder"];return D;};var A=function(){var C=[".sapMSltLabel",".sapMSLITitleOnly"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapMSelectListItem"];D.body.textSize.bRequiresAdditionalSettings=true;D.header.textSize.getAdditionlStyleSettings=t;D.body.textSize.getAdditionlStyleSettings=w;return D;};var q=function(){var C=[".sapMSFI",".sapMSLITitleOnly",".sapMLabel",".sapMText",".sapMListNoDataText"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapUiTableCol",".sapUiTableCtrl",".sapUiTableColRowHdr",".sapUiTableRowHdr",".sapUiTableTd"];D.body.textSize.bRequiresAdditionalSettings=true;D.header.textSize.getAdditionlStyleSettings=l;D.body.textSize.getAdditionlStyleSettings=x;return D;};var y=function(){var C=[".sapMSFI",".sapMSLITitleOnly",".sapMText",".sapMPanelContent .sapMLabel",".sapMListNoDataText"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapMListBGSolid .sapMLIB",".sapUiTableCol",".sapUiTableCtrl",".sapUiTableColRowHdr",".sapUiTableRowHdr",".sapUiTableTd"];D.body.textSize.bRequiresAdditionalSettings=true;D.header.textSize.getAdditionlStyleSettings=l;D.body.textSize.getAdditionlStyleSettings=x;return D;};var z=function(){var C=[".sapMSliderLabel",".sapMSliderRangeLabel"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapMSlider"];D.body.sliderLine.visibility=true;D.body.pointerColor.visibility=true;D.body.textSize.bRequiresAdditionalSettings=true;D.body.textSize.getAdditionlStyleSettings=function(E,H){var G="";var F=e("",E.cssValue,"Arial");if(parseInt(E.cssValue,10)>16){G+="#"+H+" .sapMSliderLabels { top:"+m(F)+";}";}return G;};D.body.textColor.bRequiresAdditionalSettings=true;D.body.textColor.getAdditionlStyleSettings=function(E,G){var F="#"+G+" .sapMSliderHandle,#"+G+" .sapMSliderProgress { background-color:"+E.cssValue+";}";return F;};return D;};var p=function(){var C=[".sapMLabel"];var D=B();b(D,"cssSelectors",C);return D;};var u=function(){var C=[".sapMInputBaseInner",".sapUiIcon:before"];var D=B();b(D,"cssSelectors",C);D.body.bgColor.cssSelectors=[".sapMPanelContent",".sapMInputBaseInner"];D.body.textSize.bRequiresAdditionalSettings=true;D.body.textSize.getAdditionlStyleSettings=function(E,H){var G="";var F=e("",E.cssValue,"Arial");if(parseInt(E.cssValue,10)>16){G+="#"+H+" .sapMInputBaseInner { height:"+j(F)+"!important;}";G+="#"+H+" .sapMInputValHelp { top:"+a(F)+";}";}return G;};return D;};var f=function(){var C={dropdown_filter:o(),text_filter:n(),ssd_filter:A(),radio_filter:q(),list_filter:y(),range_filter:z(),complex_filter:p(),date_filter:u()};sap.bi.framework.registerService({instance:C,provide:"zen.rt.components.filterpanel.inputControlStyleModel"});return C;};return f();});define("zen.rt.components.filterpanel/resources/js/InputControlComboBoxRenderer",function(){var a={};jQuery.sap.require("sap.m.MultiComboBoxRenderer");jQuery.sap.extend(a,sap.m.MultiComboBoxRenderer);a.openInputTag=function(b,c){sap.m.ComboBoxBaseRenderer.openInputTag.call(this,b,c);b.addStyle("width","0px");b.addStyle("min-width","0px");b.addStyle("padding","0px");};a.prependInnerContent=function(b,c){b.write('<div class="sapLudsiMultiComboBoxCountLabelDiv">');c._oCountLabel.addStyleClass("sapLudsiMultiComboBoxCountLabel");b.renderControl(c._oCountLabel);b.write("</div>");};return a;});define("zen.rt.components.filterpanel/resources/js/InputControlDatePickerRenderer",function(){var a={};jQuery.sap.require("sap.m.DatePickerRenderer");jQuery.sap.extend(a,sap.m.DatePickerRenderer);a.writeInnerAttributes=function(b,c){b.writeAttribute("readonly","readonly");};return a;});define("zen.rt.components.filterpanel/resources/js/InputControlDateTimePickerRenderer",function(){var a={};jQuery.sap.require("sap.m.DateTimePickerRenderer");jQuery.sap.extend(a,sap.m.DateTimePickerRenderer);a.writeInnerAttributes=function(b,c){b.writeAttribute("readonly","readonly");};return a;});
define("zen.rt.components/resources/js/gridlayout_handler",["sap/zen/basehandler","./gridcell_handler"],function(d,a){var c=d.dispatcher;var b=function(){d.apply(this,arguments);var h=this;var f=false;var g=function(m){m.getParent().removeCell(m);};function k(o,n,p,m){h.updateChildren(n.content,o,function(t,s){var r=Math.floor(s/m);var q=o.getRows()[r];q.addCell(t);},g);}this.createAndAdd=function(r,w,A,s,v){f=!!w.zenUseChromeCssWorkaround;var B=w.rows;var t=w.cols;var u=-1;var y=-1;var p=e(B);var z=j(t);if(B!=null){u=B.length;}if(t!=null){y=t.length;}var o=w.id;var x=new sap.zen.commons.layout.MatrixLayout({id:o,layoutFixed:false,width:"100%",height:"100%"});x.newGrid=true;s(x,v);sap.zen.Dispatcher.instance.updateComponentProperties(x,A);for(var q=0;q<u;q++){var m=new sap.zen.commons.layout.MatrixLayoutRow();i(m,p[q]);x.addRow(m);}if(y!=-1){x.setColumns(y);var n=new Array(y);for(var q=0;q<y;q++){n[q]=z[q]+"%";}x.setWidths(n);}k(x,w,A,y);return x;};this.update=function(p,s,B){if(!p||!s){return;}f=!!s.zenUseChromeCssWorkaround;var v=p;var C=s.rows;var q=s.cols;if(C||q){var w=v.getRows().length;var z=C.length;var t=q.length;var o=e(C);for(var r=0;r<w;r++){var m=v.getRows()[r];i(m,o[r]);}for(r=w;r<z;r++){var m=new sap.zen.commons.layout.MatrixLayoutRow();v.addRow(m);i(m,o[r]);}for(r=w-1;r>=z;r--){var u=v.getRows()[r].getCells();for(var y=0;y<u.length;y++){c.addTransferControl(u[y],g);}v.removeRow(r);}var A=j(q);var n=new Array(q.length);for(var x=0;x<q.length;x++){n[x]=A[x]+"%";}v.setWidths(n);v.setColumns(q.length);k(p,s,B,t);}};this.applyForChildren=function(r,n){var q=r.getRows();var s;var p;for(s=0;s<q.length;s++){var o=q[s].getCells();for(p=0;p<o.length;p++){var m=o[p];n(m);}}};var e=function(o){var n=null;if(o!=null){var q=o.length;var p=new Array(q);for(var m=0;m<q;m++){p[m]=parseInt(o[m].row.height,10);}n=l(p);}return n;};var j=function(q){var n=null;if(q!=null){var o=q.length;var m=new Array(o);for(var p=0;p<o;p++){m[p]=parseInt(q[p].col.width,10);}n=l(m);}return n;};var i=function(m,n){if(n){m.setHeight(n+"%");}else{m.setHeight("100%");}};var l=function(o){var n=o.reduce(function(p,q){return p+q;},0);var m=100/n;return o.map(function(p){if(f){return Math.floor(m*p);}return m*p;});};this.testAccessor={getRowHeightsInPercent:e,getColumnWidthsInPercent:j,convertRelativeGridSizesToPercentages:l};this.getDecorator=function(){return"GridDecorator";};this.getType=function(){return"gridlayout";};};return new b();});
define("zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/dataMappers/SDKChartDataMapper",["zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/utilities/SDKUtilsHelper","zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/dataMappers/helpers/SDKChartTypeHelper","zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/dataMappers/helpers/SDKDataMapperHelper","zen.rt.uiframework/legacyfeeding/zen.rt.components.sdkhtml5chart/charts/ChartException","zen.rt.uiframework/legacyfeeding/sap_viz/CrossTableDataSet"],function(b,c,e,d,a){function f(){var r=this;var j=null;var o=null;var g=null;var s=null;var t=null;var m=null;var y=null;var v=null;var h=null;var n={key:"12345",isFake:true,text:"Key Figures",axis:"ROWS",axis_index:0,containsMeasures:true,members:[{key:"",text:"",scalingFactor:0,unitOfMeasure:"",formatString:""}]};var i=null;this.getDataMapperHelper=function(){if(y==null){y=new e(this.getMeasureCounter());}return y;};this.getChartTypeHelper=function(){if(v==null){v=new c();}return v;};this.getMessages=function(){return this.messgaes;};this.setMessages=function(A){this.messgaes=A;};var q=function(A){j=A;};this.getMeasureAxis=function(){return j;};var u=function(A){o=A;};this.getMeasureIndex=function(){return o;};var p=function(A){g=A;};this.getMeasureCounter=function(){return g;};var k=function(A){m=A;};this._getDataExist=function(){return m;};var x=function(A){s=A;};this._getRowDimensionCounter=function(){return s;};var z=function(A){t=A;};this._getColDimensionCounter=function(){return t;};this.setDataFeeding=function(A){this.dataFeeding=A;};this.getDataFeeding=function(){return this.dataFeeding;};this.setTotalMeasure=function(A){var C=0;var D;for(var B=0;B<A.length;B++){D=A[B][0]||0;C=C+D;}r.total=C;};this.getTotalMeasure=function(A){return r.total;};this.setNumberOfDimensions=function(C){var B=C.dimensions;var A=0;var D=0;$.each(B,function(E,F){if(F.axis=="COLUMNS"&&!F.containsMeasures){A++;}else{if(F.axis=="ROWS"&&!F.containsMeasures){D++;}}});x(D);z(A);};this.setInfo=function(C,A){var B=true;for(var F=0;F<C.data.length;F++){if(C.data[F]!=null){B=false;break;}}if(this._getColDimensionCounter()==0){n.axis="COLUMNS";}if(B){if(!this.getUtilsHelper().hasMeasures(C)){C.dimensions.push(n);}}var I=0;var G="";var H=-1;for(var D=0;D<C.dimensions.length;D++){var E=C.dimensions[D];if(E.containsMeasures==true){G=E.axis;I=E.members.length;H=D;break;}}if(I==0){C.dimensions.push(n);G=n.axis;I=n.members.length;}q(G);u(H);p(I);this.setNumberOfDimensions(C);k(!B);w(C,A);};this.validateData=function(){};var w=function(D,E){var C=r.getChartTypeHelper();if((C.isScatterBubbleChart(E))||(C.isRadarChart(E))){r.validateData(E);}else{if(C.isDualChart(E)){if(D.dualAxis!=undefined){var A=0;var F=0;for(var B=0;B<D.dualAxis.length;B++){if(D.dualAxis[B][1]=="axis1"){A++;}else{F++;}}if(A==0&&F==0){throw new d(r.getMessages().datasource_no_measures);}}r.validateData(D,E);}else{r.validateData();}}};this.setAnalysisAxisValue=function(A){};this.getAnalysisAxisValue=function(){return null;};this.getxAxisValues=function(D){this.setInfo(D);var B=r.createAnalysisAxisGroup(D);var A=l(D,B);this.setTotalMeasure(A[0].data[0].values);for(var C in B){if(B[C].index==1){return B[C].data[0].values;}}};var l=function(E,A){var F=r.getMeasureAxis();var D=r.getMeasureIndex();var C={};$.each(E.dimensions,function(G,H){if(H.containsMeasures){C=H.members;}});var B;if(E.cvomType&&E.cvomType==="viz/waterfall"||E.cvomType==="viz/horizontal_waterfall"||E.cvomType==="viz/stacked_waterfall"||E.cvomType.indexOf("pie")!==-1){var F=r.getMeasureAxis();var D=r.getMeasureIndex();var C={};$.each(E.dimensions,function(G,H){if(H.containsMeasures){C=H.members;}});B=r.createMeasureValues(E,C,F,D);}else{B=r.createMeasureValues(E,A);}return B;};this.createDataSet=function(B){var C={};C.analysisAxis=r.createAnalysisAxisGroup(B);C.measureValuesGroup=l(B,C.analysisAxis);var A=new a();A.data(C);return A;};this.findKeyFigureAxis=function(B){for(var A=0;A<B.dimensions.length;A++){if(B.dimensions[A].containsMeasures){return B.dimensions[A].axis;}}};this.setDimensionsOnAxis=function(I,D,C,P,K,F,B){var J={};var M=[];J.index=I;J.data=[];var O=-1;var L=0;var N=-1;var H=this;$.each(F,function(Q,R){if(N==-1||R[L]==N){$.each(R,function(S,T){if(T!=-1&&(!D.dimensions[S].containsMeasures||B)){if(N!=-1&&N){if(O==-1){O=S;}}if(M[S-O]==undefined){M[S-O]=[];}var U=H.getDimensionLabel(D.dimensions[S].members[T],D.presentationValue);M[S-O].push(U);}else{if(D.dimensions[S].containsMeasures&&N==-1){L=S;N=T;}}});}});for(var A=0;A<D.dimensions.length;A++){var G=D.dimensions[A];if((G.containsMeasures&&!B)||G.axis!=P){continue;}var E={};E.name=G.text;E.type="Dimension";E.values=M[A-O];J.data.push(E);}C.push(J);};this.createAnalysisAxis=function(D,C,A,E,B){return null;};this.createAnalysisAxisGroup=function(D){var E=this.getMeasureAxis();var B=this.getMeasureCounter();var A=1;var C=1;if(E=="COLUMNS"){A=B;}else{if(E=="ROWS"){C=B;}}return this.createAnalysisAxis(D,C,A,this._getRowDimensionCounter(),this._getColDimensionCounter());};this.getValues=function(F,C,G,H,J,B,K,A,E){var I=[];var D=this.getDataMapperHelper();if(C=="ROWS"){if(A){I=D.getAllRowValuesInArray(F,G,J,H,K);}else{I=D.getAllRowValuesInOneArray(F,G,J,B,H,K,E);}}else{if(C=="COLUMNS"){if(H){I=D.getFirstMeasureColValuesInArray(F,G,J);}else{if(A){I=D.getAllColValuesInArray(F,G,J,K);}else{if(E){I=D.getAllColValuesInOneArrayRows(F,G,J,B,K);}else{I=D.getAllColValuesInOneArray(F,G,J,B,K);}}}}}return I;};this.getIDimensionOnRows=function(D,A,C){var B=0;if(A[C].data[0]!=undefined){B=A[C].data[0].values.length;}return B;};this.mergeValues=function(A,B,C){if(C=="ROWS"){A.push(B[0]);}else{if(C=="COLUMNS"){$.each(B,function(D,E){A[D].push(E[0]);});}}};this.mapData=function(A,B){B.dualAxis=A.dualAxis;this.setInfo(B,A.cvomType);var C={};B.presentationValue=A.mProperties.presentation.selectedValue;B.newChartOptionsProperties=A.newChartOptionsProperties;B.cvomType=A.cvomType;C.ds=this.createDataSet(B);C.dataFeeding=this.getChartDataFeeding(A);this.setAnalysisAxisValue(C.ds);return C;};this.getChartDataFeeding=function(F){var E=this.getChartTypeHelper();var B=this.getMeasureCounter();var A=F.getChartDataFeedingHelper();var D=(this.getMeasureAxis()=="ROWS")?this._getRowDimensionCounter():this._getColDimensionCounter();if((F.isGenericViz)||((F.newChartOptionsProperties!==undefined)&&(F.newChartOptionsProperties.feeds!==undefined))){return A.genericDataFeeding(F,this.getMeasureAxis(),this.getMeasureIndex(),s,t);}if(E.isScatterChart(F.cvomType)){return F.getDataFeeding(this.getMeasureAxis(),this.getMeasureIndex(),s,t);}else{if(E.isBubbleChart(F.cvomType)){var C=false;if(B>3){C=true;}return F.getDataFeeding(this.getMeasureAxis(),this.getMeasureIndex(),s,t,C);}else{if(E.isRadarChart(F.cvomType)){return F.getDataFeeding(this.getMeasureAxis(),this.getMeasureIndex(),s,t,B);}else{if(E.isDualChart(F.cvomType)){return F.getDataDualFeeding(this.getMeasureAxis(),this.getMeasureIndex(),s,t);}else{return F.getDataFeeding(this.getMeasureAxis(),this.getMeasureIndex(),s,t,D);}}}}};this.getLegendValues=function(G,A){var C=G.getData();var L=this.getMeasuresHelper();var I=[""];if(!(C)){return null;}this.setInfo(C,G.cvomType);var E={};C.axesSwapped=G.axesSwapped;C.presentationValue=G.mProperties.presentation.selectedValue;C.cvomType=G.cvomType;E.ds=G.getMappedData().ds;var H=this.getMeasureIndex();var F=this.getMeasureAxis();if(A&&F!=A){return null;}var K=this.getMeasureCounter();var B=this._getRowDimensionCounter();var J=this._getColDimensionCounter();if(A=="ROWS"){return L.getMeasureTuplesCombination(C,H);}if(G.getDataFeeding()==undefined){var D=0;if(G.cvomType=="viz/multi_pie"||G.cvomType=="viz/stacked_waterfall"){D=1;}else{if(G.cvomType=="viz/waterfall"||G.cvomType=="viz/horizontal_waterfall"||G.cvomType=="viz/horizontal_waterfall"){return L.getMeasureTuples(E.ds);}}return L.getRowDimTuples(E.ds,D);}if(G.cvomType=="viz/multi_radar"||G.cvomType=="viz/radar"){if(B==0&&J==0&&F=="COLUMNS"){return I;}else{if(B==0){return L.getMeasureTuples(E.ds);}else{if(G.cvomType=="viz/multi_radar"){return L.getRowDimTuples(E.ds,1);}}}}if(K>0&&B>0&&F=="ROWS"){I=L.getMeasureAndRowDimTuples(E.ds,H-J);}if(F=="COLUMNS"){if(B==0&&J==0){I=L.getRowDimTuples(E.ds,0);}else{if(B==0&&J>1){I=L.getRowDimTuples(E.ds,1);}else{if(B>0&&J==0){I=L.getRowDimTuples(E.ds,0);}else{I=L.getRowDimTuples(E.ds,1);}}}}else{if(K>0&&B==0&&F=="ROWS"){I=L.getMeasureTuples(E.ds);}}return I;};this.getLegendValuesFromData=function(D,J,K,M){var O=this.getMeasuresHelper();var I=[""];if(!(D)){return null;}this.setInfo(D,K);var F={};D.axesSwapped=J;D.presentationValue=M;F.ds=this.createDataSet(D);var H=this.getMeasureIndex();var G=this.getMeasureAxis();var N=this.getMeasureCounter();var A=this._getRowDimensionCounter();var L=this._getColDimensionCounter();var E=0;if(K=="viz/multi_pie"||K=="viz/stacked_waterfall"||K=="viz/pie"){if(K!="viz/pie"){E=1;}return O.getRowDimTuples(F.ds,E);}else{if(K=="viz/waterfall"||K=="viz/horizontal_waterfall"||K=="viz/horizontal_waterfall"){return O.getMeasureTuples(F.ds);}else{if(K=="viz/multi_radar"||K=="viz/radar"){if(A==0&&L==0&&G=="COLUMNS"){return I;}else{if(A==0){return O.getMeasureTuples(F.ds);}else{if(K=="viz/multi_radar"){return O.getRowDimTuples(F.ds,1);}}}}}}if(this.getChartTypeHelper().isScatterBubbleChart(D.cvomType)&&A>0){for(var C=0;C<D.dimensions.length;C++){var B=D.dimensions[C];if(B.axis==="ROWS"&&B.axis_index===0){I=D.dimensions[C].members.map(function(P){return P.text;});break;}}}else{if(G=="COLUMNS"){if(A==0&&L==0){I=O.getRowDimTuples(F.ds,0);}else{if(A==0&&L>1){I=O.getRowDimTuples(F.ds,1);}else{if(A>0&&L==0){I=O.getRowDimTuples(F.ds,0);}else{I=O.getRowDimTuples(F.ds,1);}}}}else{if(N>0&&A>0&&G=="ROWS"){I=O.getMeasureAndRowDimTuples(F.ds,H-L);}else{if(N>0&&A==0&&G=="ROWS"){if(this.getChartTypeHelper().isDualChart(K)){I=["Axis 1","Axis 2"];}else{I=O.getMeasureTuples(F.ds);}}}}}return I;};this.setEmptyDimension=function(B,A){var C={};var D={};C.index=B;C.data=[];D.name="";D.type="Dimension";D.values=[""];C.data.push(D);A.push(C);};this.getDimensionLabel=function(B,A){return B.text;};this.getUtilsHelper=function(){if(this._utilsHelper!=null||this._utilsHelper!=undefined){return this._utilsHelper;}this._utilsHelper=new b();return this._utilsHelper;};}return f;});
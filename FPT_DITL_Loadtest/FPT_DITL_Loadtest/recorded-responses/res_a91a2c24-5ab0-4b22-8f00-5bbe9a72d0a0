define("zen.rt.components.vizframe/js/referenceLines/common/js/colorPicker/ColorPicker",["css!./css/ColorPicker"],function(){var a=sap.ui.core.Control.extend("sap.lumira.ColorPicker",{metadata:{library:"sap.m",properties:{colorString:{type:"string",group:"Misc",defaultValue:null},defaultColorString:{type:"string",group:"Misc",defaultValue:null},height:{type:"string"},width:{type:"string"},hideHSV:{type:"boolean",defaultValue:true},hideAlpha:{type:"boolean",defaultValue:true}},events:{change:{parameters:{r:{type:"int"},g:{type:"int"},b:{type:"int"},h:{type:"int"},s:{type:"int"},v:{type:"int"},hex:{type:"string"},alpha:{type:"string"}}},liveChange:{parameters:{r:{type:"int"},g:{type:"int"},b:{type:"int"},h:{type:"int"},s:{type:"int"},v:{type:"int"},hex:{type:"string"},alpha:{type:"string"}}}}},renderer:function(b,c){if(c.getDefaultColorString()){c.resetColorButton.setVisible(true);}b.write("<div");b.writeControlData(c);b.writeClasses();b.write(">");b.renderControl(c.oVBoxLayout);b.write("</div>");}});a.prototype.init=function(){var f=new sap.ui.model.resource.ResourceModel({bundleUrl:"zen.res/zen.rt.components.lumira/i18n/localization.properties"});var e=f.getResourceBundle();this.Color={r:255,g:255,b:255,h:0,s:0,v:100,a:1,a_old:1,hex:"#FFFFFF",old:"#FFFFFF"};this.HexString="FFFFFF";this.rgbString="";this.$cpBox=null;this.$cpCur=null;this.RGB={r:0,g:0,b:0};this.bRtl=sap.ui.getCore().getConfiguration().getRTL();this.oVBoxLayout=new sap.m.VBox({});this.oVBoxLayout.setParent(this);this.oVBoxLayout.addStyleClass("sapLumiraColorPicker-ColorPickerMatrix");this.oVBoxLayout.setHeight(this.getHeight());this.oVBoxLayout.setWidth(this.getWidth());var d=this.getId()+"-cpBox";var g=this.getId()+"-cpCur";this.oHtmlBox=new sap.ui.core.HTML({content:"<DIV id="+d+" class=sapLumiraColorPicker-ColorPickerBox><DIV id="+g+" class=sapLumiraColorPicker-ColorPickerCircle></DIV></DIV>"});var i=this.getId()+"-ocBox";this.oHtmlOldCol=new sap.ui.core.HTML({content:"<DIV id="+i+" class=sapLumiraColorPicker-ColorPickerOldColor></DIV>"});var b=this.getId()+"-ncBox";this.oHtmlNewCol=new sap.ui.core.HTML({content:"<DIV id="+b+" class=sapLumiraColorPicker-ColorPickerNewColor></DIV>"});var c=this.getId()+"-hxF";var h=this.Color.hex.substr(1);this.oHexField=new sap.m.Input({id:c,value:h});this.oHexField.addStyleClass("sapLumiraColorPicker-ColorPickerHexField");this.oHexField.setTooltip(e.getText("COLORPICKER_HEX"));this.oHexField.setWidth("4.4rem");this.oHexLabel=new sap.m.Label();this.oHexLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oHexLabel.setText("#:");this.oHexLabel.setTooltip(e.getText("COLORPICKER_HEX"));this.oHexLabel.setLabelFor(this.oHexField);c=this.getId()+"-rF";this.oRedField=new sap.m.Input({id:c,value:this.Color.r,width:"3.5rem"});this.oRedField.addStyleClass("sapLumiraColorPicker-ColorPickerInputFieldsLeft");this.oRedField.setTooltip(e.getText("COLORPICKER_RED"));this.oRedLabel=new sap.m.Label();this.oRedLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oRedLabel.setText("R:");this.oRedLabel.setTooltip(e.getText("COLORPICKER_RED"));this.oRedLabel.setLabelFor(this.oRedField);c=this.getId()+"-gF";this.oGreenField=new sap.m.Input({id:c,value:this.Color.g,width:"3.5rem"});this.oGreenField.addStyleClass("sapLumiraColorPicker-ColorPickerInputFieldsLeft");this.oGreenField.setTooltip(e.getText("COLORPICKER_GREEN"));this.oGreenLabel=new sap.m.Label();this.oGreenLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oGreenLabel.setText("G:");this.oGreenLabel.setTooltip(e.getText("COLORPICKER_GREEN"));this.oGreenLabel.setLabelFor(this.oGreenField);c=this.getId()+"-bF";this.oBlueField=new sap.m.Input({id:c,value:this.Color.b,width:"3.5rem"});this.oBlueField.addStyleClass("sapLumiraColorPicker-ColorPickerInputFieldsLeft");this.oBlueField.setTooltip(e.getText("COLORPICKER_BLUE"));this.oBlueLabel=new sap.m.Label();this.oBlueLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oBlueLabel.setText("B:");this.oBlueLabel.setTooltip(e.getText("COLORPICKER_BLUE"));this.oBlueLabel.setLabelFor(this.oBlueField);c=this.getId()+"-hF";this.oHueField=new sap.m.Input({id:c,value:this.Color.h,width:"3.5rem"});this.oHueField.addStyleClass("sapLumiraColorPicker-ColorPickerInputFieldsRight");this.oHueField.setTooltip(e.getText("COLORPICKER_HUE"));this.oHueLabel=new sap.m.Label();this.oHueLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oHueLabel.setText("H:");this.oHueLabel.setTooltip(e.getText("COLORPICKER_HUE"));this.oHueLabel.setLabelFor(this.oHueField);c=this.getId()+"-sF";this.oSatField=new sap.m.Input({id:c,value:this.Color.s,width:"3.5rem"});this.oSatField.addStyleClass("sapLumiraColorPicker-ColorPickerInputFieldsRight");this.oSatField.setTooltip(e.getText("COLORPICKER_SAT"));this.oSatLabel=new sap.m.Label();this.oSatLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oSatLabel.setText("S:");this.oSatLabel.setTooltip(e.getText("COLORPICKER_SAT"));this.oSatLabel.setLabelFor(this.oSatField);c=this.getId()+"-vF";this.oValField=new sap.m.Input({id:c,value:this.Color.v,width:"3.5rem"});this.oValField.addStyleClass("sapLumiraColorPicker-ColorPickerInputFieldsRight");this.oValField.setTooltip(e.getText("COLORPICKER_VALUE"));this.oValLabel=new sap.m.Label();this.oValLabel.addStyleClass("sapLumiraColorPicker-ColorPickerLabels");this.oValLabel.setText("V:");this.oValLabel.setTooltip(e.getText("COLORPICKER_VALUE"));this.oValLabel.setLabelFor(this.oValField);c=this.getId()+"-hSLD";this.oSlider=new sap.m.Slider({id:c});this.oSlider.setWidth("161px");this.oSlider.setStep(1);this.oSlider.setMax(360);this.oSlider.setValue(parseInt(this.oHueField.getValue(),10),10);this.oSlider.setTooltip(e.getText("COLORPICKER_HUE"));this.oSlider.addStyleClass("sapLumiraColorPicker-ColorPickerSlider");c=this.getId()+"-aSLD";this.oAlphaSlider=new sap.m.Slider({id:c});this.oAlphaSlider.setMax(1);this.oAlphaSlider.setValue(1);this.oAlphaSlider.setStep(0.01);this.oAlphaSlider.setTooltip(e.getText("COLORPICKER_ALPHA"));this.oAlphaSlider.addStyleClass("sapLumiraColorPicker-ColorPickerAlphaSlider sapUiSmallMarginBegin sapUiSmallMarginEnd");this.alphaLabel=new sap.m.Text();this.alphaLabel.addStyleClass("sapUiTinyMarginTop sapUiTinyMarginBegin sapUiSmallMarginBegin");this.alphaLabel.setText(e.getText("OPACITY_TEXT"));this.opacityPercent=new sap.m.Label();this.opacityPercent.setText(this._getPercentOf(this.oAlphaSlider.getValue())+"%");this.oHLayout1=new sap.ui.layout.HorizontalLayout({content:[this.oRedLabel,this.oRedField]});this.oHLayout2=new sap.ui.layout.HorizontalLayout({content:[this.oGreenLabel,this.oGreenField]});this.oHLayout3=new sap.ui.layout.HorizontalLayout({content:[this.oBlueLabel,this.oBlueField]});this.oHLayout4=new sap.ui.layout.HorizontalLayout({content:[this.oHexLabel,this.oHexField]});this.oHLayout5=new sap.ui.layout.HorizontalLayout({content:[this.oHtmlNewCol]});this.oToolbarAlphaSlider=new sap.m.Toolbar({width:"100%",content:[this.oAlphaSlider,this.opacityPercent]});this.alphaLabel.setVisible(!this.getHideAlpha());this.oToolbarAlphaSlider.setVisible(!this.getHideAlpha());this.oVLayout1=new sap.ui.layout.VerticalLayout({content:[this.oHLayout1,this.oHLayout2,this.oHLayout3,this.oHLayout5,this.oHLayout4]});this.oVLayout1.addStyleClass("sapLumiraColorPicker-ColorPickerFirstColumn");this.oHBoxLayout1=new sap.m.HBox();this.oHBoxLayout1.addItem(this.oHtmlBox).addItem(this.oVLayout1).addItem(this.oVLayout2);this.oVBoxLayout.addItem(this.oHBoxLayout1);this.oVBoxLayout.addItem(this.oSlider);this.oVBoxLayout.addItem(this.oHBoxLayout2);this.oVBoxLayout.addItem(this.alphaLabel);this.oVBoxLayout.addItem(this.oToolbarAlphaSlider);this.resetColorButton=new sap.m.Button({tooltip:e.getText("RESET_BACKGROUND_COLOR"),icon:sap.ui.core.IconPool.getIconURI("reject","fpa"),visible:false}).addStyleClass("sapLumiraColorPicker-ColorPickerResetColorButton");this.oVBoxLayout.addItem(this.resetColorButton);this.oHexField.attachChange(jQuery.proxy(this._handleHexValueChange,this));this.oRedField.attachChange(jQuery.proxy(this._handleRedValueChange,this));this.oGreenField.attachChange(jQuery.proxy(this._handleGreenValueChange,this));this.oBlueField.attachChange(jQuery.proxy(this._handleBlueValueChange,this));this.oHueField.attachChange(jQuery.proxy(this._handleHueValueChange,this));this.oSatField.attachChange(jQuery.proxy(this._handleSatValueChange,this));this.oValField.attachChange(jQuery.proxy(this._handleValValueChange,this));this.oSlider.attachLiveChange(jQuery.proxy(this._handleSliderLiveChange,this));this.oSlider.attachChange(jQuery.proxy(this._handleSliderChange,this));this.oAlphaSlider.attachChange(jQuery.proxy(this._handleAlphaSliderLiveChange,this));this.oAlphaSlider.attachChange(jQuery.proxy(this._handleAlphaSliderChange,this));this.resetColorButton.attachPress(jQuery.proxy(this._onResetColorButtonPress,this));};a.prototype.exit=function(){if(this.$cpBox){this.$cpBox.unbind("mousedown",this.handleMouseDown);}jQuery(document).unbind("mousemove",this.handleMousePos).unbind("mouseup",this.handleMouseUp);this.oVBoxLayout.destroy();};a.prototype.setHideAlpha=function(b){if(b===false){this.alphaLabel.setVisible(true);this.oToolbarAlphaSlider.setVisible(true);}else{this.alphaLabel.setVisible(false);this.oToolbarAlphaSlider.setVisible(false);}};a.prototype.setColorString=function(d,b){this._parseColorString(d);this.oHexField.setValue(this.Color.hex.substr(1));this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);this.oValField.setValue(this.Color.v);this.oSlider.setValue(this.Color.h);this.oAlphaSlider.setValue(this.Color.a);if(this.getDefaultColorString()!==""&&this.getDefaultColorString()!==this._getRGBString()){this.resetColorButton.setEnabled(true);}else{this.resetColorButton.setEnabled(false);}if(b){this._processRGBchanges();}else{var c={r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex};this.fireLiveChange(c);this.fireChange(c);}this.setProperty("colorString",this._getRGBString(),true);};a.prototype.setDefaultColorString=function(b){this._parseColorString(b);this.setProperty("defaultColorString",this._getRGBString(),true);};a.prototype._onResetColorButtonPress=function(b){this._parseColorString(this.getDefaultColorString());this.setProperty("colorString",this._getRGBString(),true);this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});};a.prototype.handleMouseDown=function(b){if(this.oHexField.getValueState()==sap.ui.core.ValueState.Error){return;}this.handleMousePos(b);jQuery(document).bind("mousemove",jQuery.proxy(this.handleMousePos,this)).bind("mouseup",jQuery.proxy(this.handleMouseUp,this));};a.prototype.handleMouseUp=function(b){if(this.oHexField.getValueState()==sap.ui.core.ValueState.Error){return;}this.handleMousePos(b);jQuery(document).unbind("mousemove",this.handleMousePos).unbind("mouseup",this.handleMouseUp);this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype.handleMousePos=function(h){var f=this.$cpBox.offset();var b=this.$cpBox.width();var k=this.$cpBox.height();var j=h.pageX-f.left;var i=h.pageY-f.top;j=Math.min(Math.max(j,0),b);if(this.bRtl){var g=b-j;j=g;}i=Math.min(Math.max(i,0),k);var c=parseInt(j/b*100,10);var d=parseInt((1-i/k)*100,10);this.oSatField.setValue(d);this.oValField.setValue(c);this._processHSVchanges();this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleSliderLiveChange=function(){var b=parseInt(this.oSlider.getValue(),10);this.oHueField.setValue(b);this._processHSVchanges();this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleSliderChange=function(){var b=parseInt(this.oSlider.getValue(),10);this.oHueField.setValue(b);this._processHSVchanges();this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleAlphaSliderLiveChange=function(){this.Color.a=this.oAlphaSlider.getValue();this._processHSVchanges();this.opacityPercent.setText(this._getPercentOf(this.oAlphaSlider.getValue())+"%");this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleAlphaSliderChange=function(){this.Color.a=this.oAlphaSlider.getValue();this._processHSVchanges();this.opacityPercent.setText(this._getPercentOf(this.oAlphaSlider.getValue())+"%");this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._getPercentOf=function(b){return Math.round(b*100);};a.prototype._handleHueValueChange=function(){var b=parseInt(this.oHueField.getValue(),10);if(b<0||isNaN(b)){b=0;}if(b>360){b=359.9;}this.oHueField.setValue(b);this.oSlider.setValue(b);this._processHSVchanges();this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleSatValueChange=function(){var b=parseInt(this.oSatField.getValue(),10);if(b<0||isNaN(b)){b=0;}if(b>100){b=100;}this.oSatField.setValue(b);this._processHSVchanges();this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleValValueChange=function(){var b=parseInt(this.oValField.getValue(),10);if(b<0||isNaN(b)){b=0;}if(b>100){b=100;}this.oValField.setValue(b);this._processHSVchanges();this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.setProperty("colorString",this._getRGBString(),true);};a.prototype._handleRedValueChange=function(){var b=parseInt(this.oRedField.getValue(),10);if(b<0||isNaN(b)){b=0;}if(b>255){b=255;}this.oRedField.setValue(b);this._processRGBchanges();this.setProperty("colorString",this._getRGBString(),true);this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});};a.prototype._handleGreenValueChange=function(){var b=parseInt(this.oGreenField.getValue(),10);if(b<0||isNaN(b)){b=0;}if(b>255){b=255;}this.oGreenField.setValue(b);this._processRGBchanges();this.setProperty("colorString",this._getRGBString(),true);this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});};a.prototype._handleBlueValueChange=function(){var b=parseInt(this.oBlueField.getValue(),10);if(b<0||isNaN(b)){b=0;}if(b>255){b=255;}this.oBlueField.setValue(b);this._processRGBchanges();this.setProperty("colorString",this._getRGBString(),true);this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});};a.prototype._processHSVchanges=function(){var c=parseInt(this.oHueField.getValue(),10);var d=parseInt(this.oSatField.getValue(),10);var b=parseInt(this.oValField.getValue(),10);this._calculateRGB(c,d,b);this.Color.r=this.RGB.r;this.Color.g=this.RGB.g;this.Color.b=this.RGB.b;this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this._calculateHEX(this.Color.r,this.Color.g,this.Color.b);this.oHexField.setValue(this.HexString);this.Color.hex="#"+this.oHexField.getValue();this.Color.h=c;this.Color.s=d;this.Color.v=b;this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);this.oValField.setValue(this.Color.v);this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateSelColorBackground();};a.prototype._processRGBchanges=function(){var b=Math.round(parseInt(this.oRedField.getValue(),10));var d=Math.round(parseInt(this.oGreenField.getValue(),10));var c=Math.round(parseInt(this.oBlueField.getValue(),10));this._calculateHEX(b,d,c);this.oHexField.setValue(this.HexString);this._calculateHSV(b,d,c);this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);this.oValField.setValue(this.Color.v);this.oSlider.setValue(parseInt(this.oHueField.getValue(),10));this.Color.r=b;this.Color.g=d;this.Color.b=c;this.Color.hex="#"+this.oHexField.getValue();this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateSelColorBackground();};a.prototype._handleHexValueChange=function(){var d=this.oHexField.getValue().toUpperCase();if(d.substr(0,1)=="#"){d=d.substr(1);}var c=/^([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;if(c.test(d)==false){this.oHexField.setValueState(sap.ui.core.ValueState.Error);this.oSlider.setEnabled(false);this.oAlphaSlider.setEnabled(false);this.oHueField.setEnabled(false);this.oRedField.setEnabled(false);this.oGreenField.setEnabled(false);this.oBlueField.setEnabled(false);this.oSatField.setEnabled(false);this.oValField.setEnabled(false);return false;}else{if(this.oHexField.getValueState()==sap.ui.core.ValueState.Error){this.oHexField.setValueState(sap.ui.core.ValueState.None);this.oSlider.setEnabled(true);this.oAlphaSlider.setEnabled(true);this.oHueField.setEnabled(true);this.oRedField.setEnabled(true);this.oGreenField.setEnabled(true);this.oBlueField.setEnabled(true);this.oSatField.setEnabled(true);this.oValField.setEnabled(true);}}if(d.length==3){var b=d.charAt(0)+d.charAt(0)+d.charAt(1)+d.charAt(1)+d.charAt(2)+d.charAt(2);d=b;}this._processHexChanges(d);this.oHexField.setValue(d);this.oRedField.setValue(this.Color.r);this.oGreenField.setValue(this.Color.g);this.oBlueField.setValue(this.Color.b);this.oHueField.setValue(this.Color.h);this.oSatField.setValue(this.Color.s);this.oValField.setValue(this.Color.v);this.oSlider.setValue(parseInt(this.oHueField.getValue(),10));this.oAlphaSlider.setValue(1);this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();this._updateSelColorBackground();this.setProperty("colorString",this._getRGBString(),true);this.fireLiveChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});this.fireChange({r:this.Color.r,g:this.Color.g,b:this.Color.b,h:this.Color.h,s:this.Color.s,v:this.Color.v,alpha:this.Color.a,hex:this.Color.hex});};a.prototype._processHexChanges=function(b){this._convertRGB(b);this._calculateHSV(this.Color.r,this.Color.g,this.Color.b);this.Color.hex="#"+b.toUpperCase();};a.prototype._updateCursorPosition=function(){if(!this.$cpCur||!this.$cpBox){return;}var e=this.$cpCur.width();var i=this.$cpCur.height();var b=this.$cpBox.width();var j=this.$cpBox.height();var d=this.oSatField.getValue();var c=this.oValField.getValue();var h=parseInt(c*b/100,10);if(this.bRtl){var f=b-h;h=f;}var g=parseInt((1-d/100)*j,10);h=Math.min(Math.max(h,0),b-e/2)-e/2;g=Math.min(Math.max(g,0),j-i/2)-i/2;this.$cpCur.css("left",h).css("top",g);};a.prototype._calculateRGB=function(g,d,b){if(g==360){g=0;}g/=60;d/=100;b/=100;var k=b*d;var l=k*(1-Math.abs(g%2-1));var e=b-k;var j=0,h=0,n=0;var f=Math.floor(g);switch(f){case 0:j=k;h=l;break;case 1:j=l;h=k;break;case 2:h=k;n=l;break;case 3:h=l;n=k;break;case 4:j=l;n=k;break;case 5:j=k;n=l;break;}this.RGB.r=Math.floor((j+e)*255);this.RGB.g=Math.floor((h+e)*255);this.RGB.b=Math.floor((n+e)*255);};a.prototype._getRGBString=function(){if(this.Color.a<1){return"rgba("+this.Color.r+","+this.Color.g+","+this.Color.b+", "+this.Color.a+")";}else{return"rgb("+this.Color.r+","+this.Color.g+","+this.Color.b+")";}};a.prototype._calculateHEX=function(g,f,b){var c=g.toString(16);var e=f.toString(16);var d=b.toString(16);if(c.length==1){c="0"+c;}if(e.length==1){e="0"+e;}if(d.length==1){d="0"+d;}this.HexString=(c+e+d).toUpperCase();};a.prototype._calculateHSV=function(d,e,i){var h=Math.max(Math.max(d,e),i);var f=Math.min(Math.min(d,e),i);var j=(h-f);var b=Math.round(h*100/255);var c=(h==0)?0:(100*j/h);var g=0;if(c==0){g=0;}else{if(d==h){g=60*(e-i)/j;}else{if(e==h){g=120+60*(i-d)/j;}else{if(i==h){g=240+60*(d-e)/j;}}}}if(g<0){g+=359.9;}g=Math.round(g);c=Math.round(c);this.Color.h=g;this.Color.s=c;this.Color.v=b;};a.prototype._convertRGB=function(c){var e=parseInt(c.substr(0,2),16);var d=parseInt(c.substr(2,2),16);var b=parseInt(c.substr(4,2),16);this.Color.r=e;this.Color.g=d;this.Color.b=b;};a.prototype._updateGradientBoxBackground=function(b){this._calculateRGB(b,100,100);this._calculateHEX(this.RGB.r,this.RGB.g,this.RGB.b);if(this.$cpBox){this.$cpBox.css("background-color","rgb("+this.RGB.r+", "+this.RGB.g+", "+this.RGB.b+")");}};a.prototype._updateSelColorBackground=function(){if(this.$("ncBox")){this.$("ncBox").css("background-color",this._getRGBString());}};a.prototype._parseColorString=function(g){if(g.substr(0,1)=="#"){g=g.substr(1);}g=g.replace(/ /g,"");g=g.toLowerCase();var f="";var i="";var d={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(f in d){if(g==f){i=d[f].toUpperCase();}}if(i!=""){this._processHexChanges(i);this.Color.old=this.Color.hex;}var e=/^([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/;if(e.test(g)==true){if(g.length==3){var i=g.charAt(0)+g.charAt(0)+g.charAt(1)+g.charAt(1)+g.charAt(2)+g.charAt(2);}else{i=g;}this._processHexChanges(i);this.Color.old=this.Color.hex;}if(g.substr(0,4)=="rgba"){g=g.substr(4);g=g.replace("(","");g=g.replace(")","");g=g.split(" ").join("");var e=/^(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])),){2}(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])),){1}(([0]\.[0-9]*)|(\.[0-9]{2})|[1]){1}$/;if(e.test(g)==true){var c=g.split(",");var b=g.substr(g.lastIndexOf(",")+1,(g.length-g.lastIndexOf(",")));this._calculateHEX(parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10));this._processHexChanges(this.HexString);this.Color.old=this.Color.hex;this.Color.a=this.Color.a_old=parseFloat(b);this.opacityPercent.setText(this._getPercentOf(this.Color.a)+"%");}}if(g.substr(0,3)=="rgb"){g=g.substr(3);g=g.replace("(","");g=g.replace(")","");g=g.split(" ").join("");var e=/^(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5])),){2}(((\d{1,2})|(1\d{2})|(2[0-4]\d)|(25[0-5]))){1}$/;if(e.test(g)==true){var c=g.split(",");this._calculateHEX(parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10));this._processHexChanges(this.HexString);this.Color.old=this.Color.hex;}}if(g.substr(0,3)=="hsv"){g=g.substr(3);g=g.replace("(","");g=g.replace(")","");g=g.split(" ").join("");var e=/^(((\d{1,2})|([1,2]\d{2})|(3[0-5]\d)|(360)),){1}(((\d{1,2})|(100)),){1}((\d{1,2})|(100)){1}$/;if(e.test(g)==true){var h=g.split(",");this._calculateRGB(parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10));this._calculateHEX(this.RGB.r,this.RGB.g,this.RGB.b);this.Color.r=this.RGB.r;this.Color.g=this.RGB.g;this.Color.b=this.RGB.b;this.Color.h=parseInt(h[0],10);this.Color.s=parseInt(h[1],10);this.Color.v=parseInt(h[2],10);this.Color.hex="#"+this.HexString;this.Color.old=this.Color.hex;}}else{return false;}};a.prototype.onAfterRendering=function(){this.$cpBox=this.$("cpBox");this.$cpCur=this.$("cpCur");this.$cpBox.bind("mousedown",jQuery.proxy(this.handleMouseDown,this));this.$("ncBox").css("background-color",this._getRGBString());this.$("ocBox").css("background-color",this._getRGBString());this._updateGradientBoxBackground(this.Color.h);this._updateCursorPosition();};a.prototype.onBeforeRendering=function(){this.$("cpBox").unbind("mousedown",this.handleMouseDown);};a.prototype.getRGB=function(){return{r:this.Color.r,g:this.Color.g,b:this.Color.b};};return a;});
define(["sap/designstudio/sdk/component","css!../css/shape_component.css"],function(a,b){a.subclass("com.sap.ip.bi.Shape",function(){var j=this;var e="";var f;var k;var i;var c;var d;var l;var h;var g=false;this.saveOriginalStyles=function(){d=this.$().find("svg").css("fill");l=this.$().find("svg").css("stroke");_originalLineWidth=this.$().find("svg").css("stroke-width");};this.updateShape=function(){if(f){this.$().find("svg").css("overflow","hidden");if(c||c===""){var n=c===""?d:c;this.$().find("svg").css("fill",n);}if(k||k===""){var m=k===""?l:k;this.$().find("svg").css("stroke",m);}if(i||i===""){var o=i===""?_originalLineWidth:i;this.$().find("svg").css("stroke-width",o);}}};this.init=function(){this.$().click(function(m){if(g){m.stopPropagation();j.fireEvent("onclick");}});};this.fillColor=function(m){if(m===undefined){return c;}else{c=m;this.updateShape();return this;}};this.lineColor=function(m){if(m===undefined){return k;}else{k=m;this.updateShape();return this;}};this.lineWidth=function(m){if(m===undefined){return i;}else{i=m;this.updateShape();return this;}};this.tooltip=function(m){if(m===undefined){return this.$().prop("title");}else{this.$().prop("title",m);return this;}};this.blackList=["onload","script","a"];this.checkAttributes=function(m){var o=[];for(var n=0;n<m.length;n++){o.push(m[n].nodeName);}return o.some(function(p){return j.blackList.indexOf(p)>-1;});};this.sanityCheck=function(n){if(!(n[0] instanceof SVGElement)||j.checkAttributes(n[0].attributes)){return false;}var p=n.find("*");for(var o=0;o<p.length;o++){var r=p[o];var m=j.blackList.indexOf(r.tagName)>-1;var q=j.checkAttributes(r.attributes);if(m||q){return false;}}return true;};this.shapeUrl=function(m){if(m===undefined){return f;}else{f=m;if(m.substring(0,5)==="data:"){var o=m.split(",")[1];var n=atob(o);var p=$(n);j.$().empty();if(j.sanityCheck(p)){j.$().append(p);j.saveOriginalStyles();j.updateShape();}}else{$.get(m,function(q){e=q;var r=$(q.lastChild);j.$().empty();if(j.sanityCheck(r)){j.$().append(r);j.saveOriginalStyles();j.updateShape();}});}if(window.sap&&sap.zen&&sap.zen.designmode){if(m&&m.length>1){this.$().css("border-style","");this.$().css("border-width","");this.$().css("border-color","");}else{this.$().css("border-style","dashed");this.$().css("border-width","1px");this.$().css("border-color","gray");}}return this;}};this.onclick=function(m){if(m===undefined){return"";}else{g=true;this.$().css("cursor","pointer");return this;}};});});